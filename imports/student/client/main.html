<template name="studentLandingPage">
	<section id="studentLandingPage">
		<div class="notification" style="overflow-y:scroll;">
			<h4>Notification <span class="fa fa-info"></span></h4>
			<article>
				{{{setting.notification}}}
			</article>
		</div>
		<div class="log">
			<h4>Recent Activities</h4>
			{{#each log}}
				<strong>*</strong> <span>{{name}} {{action}} @{{dateFormat time}}</span><br/>
			{{/each}}
			<a href="{{pathFor 'stLogs'}}">See more...</a>
		</div>
	</section>
</template>
<template name="studentProfile">
	<div class="row">
		{{#with currentStudent}}
		<div class="col-sm-8">
			<h5>{{lastName}} {{firstName}} Profile</h5><hr/>
			<table class="table table-responsive table-striped">
					<thead>
						<tr>
							<th colspan="2" class="table-info">Admission Data</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<th>Last Name</th><td>{{lastName}}</td>
						</tr>
						<tr>
							<th>First Name</th><td>{{firstName}}</td>
						</tr>
						<tr>
							<th>Other Name</th><td>{{otherName}}</td>
						</tr>
						<tr>	
							<th>Gender</th> <td>{{gender}}</td>
						</tr>
						<tr>
							<th>Class</th>	<td>{{currentClass}}</td>
						</tr>
						<tr>
							<th>Student ID</th> <td>{{studentId}}</td>
						</tr>
						<tr>
							<th>Date of Birth</th> <td>{{dayMonthYear dob}}</td>
						</tr>
						<tr>
							<th colspan="2" class="table-info">Parent/Guardian</th>
						</tr>
						<tr>
							<th>Name</th>
							<td>{{parentOrGuardian.name}}</td>
						</tr>
						<tr>
							<th>Address</th>
							<td>{{parentOrGuardian.address}}</td>
						</tr>
						<tr>
							<th>Contact Number</th>
							<td>{{parentOrGuardian.phone}}</td>
						</tr>
					</tbody>
			</table>
				<!-- Other Information -->
			<table class="table table-responsive table-striped">
				<thead>
					<tr>
						<th colspan="2" class="table-info">Personal Information</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<th>Contact Number</th> <td>{{phone}}</td>
					</tr>
					<tr>
						<th>Email</th> <td>{{email}}</td>
					</tr>
					
					<tr>
						<th>State</th> <td>{{state}} State</td>
					</tr>
					<tr>
						<th>Town</th> <td>{{town}}</td>
					</tr>
					<tr>
						<th>Present Address</th> <td>{{presentAddress}}</td>
					</tr>
					<tr>
						<th>Home Address</th> <td>{{homeAddress}}</td>
					</tr>
					<tr>
						<th>Hobbies</th> <td>{{hobby}}</td>
					</tr>
					<tr>
						<th>Club and Society</th> <td>{{club}}</td>
					</tr>
					<tr>
						<th colspan="2" class="table-info">Next of Kin</th>
					</tr>
					<tr>
						<th>Name</th> <td>{{nok.name}}</td>
					</tr>
					<tr>
						<th>Address</th> <td>{{nok.address}}</td>
					
					</tr>
					
					<tr>
						<th>Contact</th> <td>{{nok.phone}}</td>
					</tr>
					<tr>
						<th>Relationship</th> <td>{{nok.relationship}}</td>
					</tr>
					<tr>
						<th colspan="2" class="table-info">Medical History</th>
					</tr>
					<tr>
						<th>Blood Group</th>
						<td>{{medicalHistory.bloodGroup}}</td>
					</tr>
					<tr>
						<th>Genotype</th>
						<td>{{medicalHistory.genotype}}</td>
					</tr>
					<tr>
						<th>Blood Group</th>
						<td>{{medicalHistory.medicalCondition}}</td>
					</tr>
				</tbody>
				<tfoot>
					<a href="{{pathFor 'editStProfile'}}" class="btn btn-primary btn-sm">Edit profile</a>
				</tfoot>	
			</table>
		</div>
		{{/with}}
	</div>
</template>

<template name="editStProfile">
	<h5>Update Profile</h5><hr/>
	{{#autoForm schema="g.Schemas.UpdateStudent" id="editStProfile" type="normal" doc=currentStudent validation='blur'}}
		<div class="row">
			<div class="col-sm-12">
				<legend>Profile Information</legend><hr/>
			</div>	
			<div class="col-md-6">
				<fieldset>
					{{>afQuickField name="state" options="allowed"}}
					{{>afQuickField name="town"}}
					{{>afQuickField name="homeAddress"}}
					{{>afQuickField name="presentAddress"}}
					{{>afQuickField name="nok"}}
				</fieldset>
				
			</div>	
			<div class="col-sm-6">
				<fieldset>
					{{>afQuickField name="dob"}}
					{{>afQuickField name="phone"}}
					{{>afQuickField name="hobby"}}
					{{>afQuickField name="club" options="allowed"}}
					<!-- {{>afQuickField name="medicalHistory"}} -->
					{{>afQuickField name="medicalHistory.bloodGroup" options="allowed"}}
					{{>afQuickField name="medicalHistory.genotype" options="allowed"}}
					{{>afQuickField name="medicalHistory.medicalCondition" options="allowed" type="select-checkbox-inline"}}
				</fieldset>
			</div><br/>				
			<div class="form-group col-sm-12">
				<button type="submit" class="btn btn-primary">Update</button>	
			</div>
		</div>
	{{/autoForm}}
</template>

<template name="stResult">
	<div class="row">
		<div class="col-sm-12">
			<h5>Student Results</h5><hr/>
			<form class='searchResult'>
				<select name="class">
				{{#if availableClass}}
					{{#each availableClass}}	
						<option value="{{this}}">{{this}}</option>
					{{/each}}
				{{/if}}
				</select>
				<select name="term">
					{{#each termArray}}
						<option value="{{this}}">{{termSuffix this}}</option>
					{{/each}}
				</select>
				<button type="submit" class="btn btn-primary btn-sm">Show result</button>
			</form><br/>
			{{#with currentStudent}}
				<table class="table table-responsive table-bordered">
					<tbody>
						<tr>
							<th>First Name</th>
							<td>{{firstName}}</td>
							<th>Other Name</th>
							<td>{{lastName}} {{otherName}}</td>
							<td rowspan="3">
								<img src="/student10.png" alt="{{studentId}} passport" style="max-width:50px">
							</td>
						</tr>
						<tr>
							<th>Student ID</th>
							<td>{{studentId}}</td>
							<th>Email</th>
							<td>{{email}}</td>
						</tr>
						<tr>
							<th>Current Class</th>
							<td>{{currentClass}}</td>
							<th>Current Term</th>
							<td>{{termSuffix setting.term}}</td>
						</tr>
					</tbody>
				</table>
			{{/with}}
			{{#with studentRes}}
				<table class="table table-responsive table-striped table-bordered">
					<thead>
						<tr>
							<th colspan="7" class="table-info">Result details</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<th>Class</th> <td>{{class}}</td>
							<th>Term</th> <td>{{termSuffix term}}</td>
							<th>Session</th><td>{{session}}</td>
						</tr>
					</tbody>
				</table>
				<table class="table table-responsive table-striped table-bordered serial">
					<thead>
						<tr>
							<th>#</th>
							<th>Subjects</th>
							<th>CA</th>
							<th>Exam</th>
							<th>Total</th>
							<th>Grade</th>
							<th>Remark</th>
						</tr>
					</thead>
					<tbody>
						{{#each resultObjectToArray studentRes}}
						<tr>
							<th></th>
							<td>{{this.name}}</td>
							<td>{{this.value.ca}}</td>
							<td>{{this.value.exam}}</td>
							<td>{{this.value.total}}</td>
							<td>{{this.value.grade}}</td>
							<td>{{this.value.remark}}</td>
						</tr>
						{{/each}}
					</tbody>
				</table><br/>
				<button class="btn btn-danger btn-lg" onclick="window.print()">Print</button>
			{{else}}
				{{#with getSession "stRequestedResult"}}
					<h5 class="text-info text-center">
						No result found for {{class}} term {{term}}.
					</h5>
				{{else}}
					<h5 class="text-danger text-center">
						Result not yet available for term {{setting.term}}
					</h5>
				{{/with}}
			{{/with}}
		</div>
	</div>	
</template>

<template name="stPayment">
		<h5>Student Payments</h5><hr/>
		<div class="row">
			<div class="col-sm-12">
				<form class='searchPayment'>
					<select name="class">
					{{#if availableClass}}
						{{#each availableClass}}
							<option value="{{this}}">{{this}}</option>
						{{/each}}
					{{/if}}
					</select>
					<select name="term">
						{{#each termArray}}
							<option value="{{this}}">{{termSuffix this}}</option>
						{{/each}}
					</select>
					<button type="submit" class="btn btn-primary btn-sm">Show payment</button>
				</form><br/>
				{{#with currentStudent}}
					<table class="table table-responsive table-bordered">
					<tbody>
						<tr>
							<th>First Name</th>
							<td>{{firstName}}</td>
							<th>Other Name</th>
							<td>{{lastName}} {{otherName}}</td>
							<td rowspan="3">
								<img src="/student10.png" alt="{{studentId}} passport" style="max-width:50px">
							</td>
						</tr>
						<tr>
							<th>Student ID</th>
							<td>{{studentId}}</td>
							<th>Email</th>
							<td>{{email}}</td>
						</tr>
						<tr>
							<th>Current Class</th>
							<td>{{currentClass}}</td>
							<th>Current Term</th>
							<td>{{termSuffix setting.term}}</td>
						</tr>
					</tbody>
					</table>
				{{/with}}
			</div>
			<div class="col-sm-8">
				{{#with studentPay}}
					<table class="table table-responsive table-striped table-bordered">
						<thead>
							<tr>
								<th colspan="2" class="table-info">Payment details</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Class</td>
								<td>{{class}}</td>
							</tr>
							<tr>
								<td>Term</td>
								<td>{{termSuffix term}}</td>
							</tr>
							<tr>
								<td>Session</td>
								<td>{{session}}</td>
							</tr>
							<tr>
								<td>Payment Category</td>
								<td>{{category}}</td>
							</tr>
							<tr>
								<td>Amount</td>
								<td>{{amount}}</td>
							</tr>
							<!-- online payment -->
							<!-- {{#if paymentMethod paymentType}} -->
							<tr>
								<td>Amount Approved</td>
								<td>{{approvedAmount}}</td>
							</tr>
							<tr>
								<td>Gateway Description</td>
								<td>{{paymentDescription}}</td>
							</tr>
							<tr>
								<td>Payment Reference</td>
								<td>{{payRef}}</td>
							</tr>
							<!-- {{/if}} -->
							<!-- end online payment fields -->
							<tr>
								<td>Payment Method</td>
								<td>{{paymentType}}</td>
							</tr>
							<tr>
								<td>Payment Status</td>
								<td>{{paymentStatus}}</td>
							</tr>
							<tr>
								<td>Payment Date</td>
								<td>{{dateFormat date}}</td>
							</tr>
							<tr>
								<td>Transaction ID</td>
								<td>{{transactionId}}</td>
							</tr>
							<tr>
								<td>Receiver's Name</td>
								<td>{{staffName}}</td>
							</tr>
							</tbody>
					</table>
					<br/>
					<button class="btn btn-danger" onclick="window.print()">Print</button>
				{{else}}
					{{#with getSession "stRequestedPayment"}}
						<h5 class="text-info text-center">Payment not yet made for {{class}} term {{term}}</h5>
					{{else}}
						<h5 class="text-info text-center">No payment found for term {{setting.term}}</h5>
					{{/with}}
				{{/with}}
			</div>	
		</div>
</template>

<template name="stAssignment">
	<h5>Assignment list</h5><hr/>
	<div class="row">
		<div class="col-sm-12">
			<form class="form-inline">
				<div class="form-group">
					<select name="subject" class="form-control">
						{{#each subjects}}
							<option value="{{this}}">{{this}}</option>
						{{/each}}
					</select> &nbsp;&nbsp;
					<button type="submit" class="btn btn-primary btn-sm">Filter assignment</button>
				</div>
			</form><br/>
			{{#each assignmentList}}
			<div class="row">		
				<div class="col-sm-2">
						<h6 class="">{{class}}</h6>
						<span class="badge badge-secondary">{{subject}}</span>
				</div>
				<div class="col-sm-10">
					<h6>
						<a href="{{pathFor 'stSingleAssignment'}}/{{_id}}">{{title}}</a>
						{{#if status}}
							<span class="badge badge-success">Answered</span>
						{{else}}
							<span class="badge badge-warning">Not Answered</span>
						{{/if}}	
						{{#if validity}}
							<span class="badge badge-danger">Expired</span>
						{{/if}}
						{{#if validity}}
						<span class="badge badge-danger">Closed</span>
						{{/if}}
					</h6>
					<span class="badge badge-info">Start: {{dateFormat startDate}}</span>
					<span class="badge badge-info">Due date: {{dateFormat endDate}}</span>
					<span class="badge badge-info">Max score: {{totalScore}}</span>
				</div>
			</div><hr/>
			{{else}}
				{{#with getSession "assFilter"}}
					<h5 class="text-info">No assignment found for <em>{{getSession "assFilter"}}.</em></h5>
				{{else}}
					<h5 class="text-info">No assignment found for your class.</h5>
				{{/with}}
			{{/each}}
		</div>
	</div>			
</template>

<template name="stSingleAssignment">
	<div class="row">
		<div class="col-sm-12">
			{{#with assignment}}
				<h4>
					{{title}} 
					{{#if dueDate}}
						<span class="badge badge-danger">expired</span>
					{{/if}}
				</h4><hr/>
				{{#if stAnswer}}
					<span class="badge badge-success">Answered</span>
					{{#if stAnswer.score}}
						and 
						<span class="badge badge-success">marked</span><span class="fa fa-check fa-2x text-success"></span>
					{{/if}}
				{{else}}
					<span class="text-warning">Not Answered</span>
				{{/if}}
				<hr/>
				<article>
					<h5>Question</h5>
					<p>{{content}}</p>
					<span class="badge badge-info">Class: {{class}}</span>
					<span class="badge badge-info">Subject: {{subject}}</span>
					<span class="badge badge-info">Mark: {{totalScore}}</span>
					<span class="badge badge-info">Start date: {{dateFormat startDate}}</span>
					<span class="badge badge-info">End date: {{dateFormat endDate}}</span>
					<br/>
					<p>
						Posted by: <strong>{{author}}</strong> 
					</p>
					<p>
						{{#if dueDate}}
							<p class="text-danger">Assignment has expired.</p>
						{{/if}}
					</p>
					<hr/>
					{{#if stAnswer}}
						<p><strong>Your submitted answer</strong></p>
						{{#with stAnswer}}
							<p>{{text}}</p>
							<p><span>
							<strong>Score: </strong>
							{{#if score}} 
								{{score}} / {{assignment.totalScore}} <i class="fa fa-check fa-2x text-success"></i>
							{{else}} 
								Not scored
							{{/if}}
							</span></p>
							<p>
								<span>
								<strong>Comment: </strong>
								</span>
								{{#if comment}}
									<strong>{{comment}}</strong>
								{{else}}
									No comment
								{{/if}}
							</p>
							<span><strong>Submitted on:</strong> <span class="badge badge-secondary">{{dateFormat date}}</span></span>
						{{/with}}
					{{else}}
						{{#if dueDate}}
							<span class="fa fa-ban fa-2x"> Submission not allowed</span>
						{{else}}
							<p>Type your answer in the box below</p>
							<form class="answer form-group">
								<textarea name="answer" cols="45" rows="5" placeholder="Your answer here" class="form-control"></textarea><br/>

								<button type="submit" class="btn btn-success">Submit Answer</button>
							</form>
						{{/if}}
					{{/if}}
				</article>
			{{/with}}
		</div>
	</div>
</template>
		
<template name="stMessage">
	
</template>

<template name="stLogs">
	<h5>Your activity log</h5><hr/>
	<div class="row">
		<div class="col-sm-12">
			<table class="table table-responsive table-bordered table-striped serial">
				<thead>
					<tr>
						<th>S/N</th>
						<th>Action</th>
						<th>Time</th>
					</tr>	
				</thead>
				<tbody>
				{{#each log}}
					<tr>
						<td></td>
						<td>{{name}} {{action}}</td>
						<td>{{dateFormat time}}</td>
					</tr>
				{{/each}}
				</tbody>
			</table>	
		</div>
	</div>
</template>