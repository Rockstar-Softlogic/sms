<head>
  <title>School Management System</title>
</head>
<body>
</body>

<template name="login">
	<div class="container-fluid" id="login">
		<div class="row justify-content-center">
			<div class="col-sm-12">
				<h4 class="text-center text-white">School Management System (Demo)</h4>
			</div>
			<div class="col-sm-8 col-md-6 col-lg-4 form-container">
				{{#if currentUser}}
				<h3>You're logged in as {{currentUser.username}}</h3>
					{{#if isInRole 'staff'}}
						<a href="/dashboard" class="btn btn-primary btn-lg">Dashboard</a>
					{{else}}
						{{#if isInRole 'student'}}
							<a href="/st/dashboard" class="btn btn-primary btn-lg">Dashboard</a>
						{{else}}
							{{> notFound}}
						{{/if}}
					{{/if}}
	          		<button class="btn btn-danger btn-lg" id="logout">Logout</button>
	          		<a href="{{pathFor 'feedback'}}" class="btn btn-danger btn-lg"><span class="fa fa-envelope"></span> Support</a> 
	        	{{else}}
	        	<form class="login-form">
	                <h3>SMS Login <span><a href="{{pathFor 'feedback'}}" class="btn btn-info btn-sm">Send feedback</a></span></h3>
		               
	                <h5 id="login-error" class="text-danger text-center" style="display:none;"></h5>
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text"  class="form-control" id="username" placeholder="username or email" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" class="form-control" id="password" value="" placeholder="Password" required>
                    </div>
	                 <button type="submit" id="btn-login" class="btn btn-primary btn-lg float-right">Login</button>
	            </form><br/>
	            <p>
					<b><u>Login Credentials</u></b><br/>
					<b>Admin Username: admin &amp; password:admin123 </b><br/>
					<b>Staffs: staff1, staff2, staff3, staff4 &amp; password:@012345# </b><br/>
					<b>Students: student1, student2, student3, student4 &amp; password:@012345# </b>
				</p>
				<p class="text-center">
					<a href="http://www.lovelampsys.com" target="_blank" class="text-info">Lovelamp Systems &amp; Consulting Firm</a>
				</p>
	        	 {{/if}}
			</div>
		</div>
	</div>
</template>

<template name="smsLoading">
	<div id="smsLoading" title="Processing">
		<div class="text-center">
			<h2><span class="fa fa-spin fa-spinner fa-2x"></span> Processing...</h2>
		</div>
	</div>
</template>
<template name="networkStatus">
	<div class="networkStatus">
		{{#with networkStatus}}
			{{#if connected}}
				<!-- <p class="alert alert-info">Network Status: <button class="btn btn-success btn-xs">Connected</button></p> -->
			{{else}}
				{{#if waiting}}
					<p class="alert alert-info" title="click to reload">Network Status: <button class="btn btn-warning btn-xs" onclick="window.location.reload()">Reconnecting...</button><br/>
					<span>Retry count: {{retryCount}}</span>
					</p>
				{{/if}}
				{{#if canTryReconnect}}
					<p class="alert alert-danger">
						<span>You're not connected!</span> <button class="btn btn-primary btn-xs" onclick="Meteor.reconnect()">Retry connect</button>
					</p>
				{{/if}}
			{{/if}}	
		{{/with}}
	</div>		
</template>

<template name="feedback">
<div class="container-fluid bg-white">
	<div class="row justify-content-center">
		<div class="col-sm-12 col-md-6">
			<h5 class="text-center">Feedback Form</h5><hr/>
			<p class="alert alert-info">Thank you for taking your time to contact us. <br/>We'll get back to you in less than 24 hours if need be.</p>
			<form method="POST">
				{{#if currentUser}}
					<h5>User Id: {{currentUser.username}}</h5>
				{{else}}
				<label>Email</label>
				<div class="form-group">
					<input type="email" class="form-control" id="email" name="email" placeholder="Email" minlength="5" required><br/>
					<small class="text-danger">A valid email address.</small>
				</div>
   				{{/if}}
   			 	<label>Subject</label>
				<div class="form-group">
					<input type="text" class="form-control" id="subject" name="subject" placeholder="Subject" minlength="5" maxlength="100" required><br/>
					<small class="text-danger">Minimum: 5 characters, maximum: 100 characters.</small>
				</div>
				<label>Message</label>
                <div class="form-group">
                	<textarea class="form-control" type="textarea" id="message" placeholder="Message" minlength="50" maxlength="15000" rows="7" name="message"></textarea><br/>
					<small class="text-danger">Minimum: 50 characters, maximum: 15000 characters</small>
                </div>
   				<button type="submit" id="submit" name="submit" class="btn btn-primary float-right">Submit Form</button>
	   		</form>
	   	</div>
	</div>
</div>
	<div class="processRequest" style="display:none">{{>smsLoading}}</div>

</template>

<template name="notFound">
	<div class="container text-center">
		<div class="row justify-content-center">
	        <div class="col-sm-12">
	            <h1>Oops!</h1>
	            <h2>404 Not Found</h2>
	            <div class="error-details">
	                The resource you requested was not found.
	            </div>
	            <div class="error-actions">
	                <a href="/" class="btn btn-primary btn-lg">
	                	<span class="fa fa-home"></span>
	                    Take Me Home
	                 </a>
	                 <a href="/" class="btn btn-danger btn-lg">Login Page
	                 </a>
	            </div>
	        </div>
        </div>
    </div>
</template>


<template name="footer">
	<footer style = "padding:1em;color:#fff;">
		<div class="row">
			<div class="col-md-6">
				<p>Copyright &copy; Sample Schools, sample state, sample country.</p>
			</div>
			<div class="col-md-6">
				<p>Designed by <a href="http://www.lovelampsys.com" target="_blank">Lovelamp Systems &amp; Consulting Firm</a></p>
			</div>
		</div>

	</footer>

</template>