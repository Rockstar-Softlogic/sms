<template name="staffDashboard">
		{{#if Template.subscriptionsReady}}
		<div class="row">
			<div class="col-sm-8">
				<div class="card">
					<div class="card-body">
						<h4 class="card-title text-info">
							NOTIFICATION
						</h4>
						<div class="card-text notification">
							<article>
								<p>{{{setting.notification}}}</p>
								{{#if isInRole 'admin,editor'}}
								<button class="btn btn-danger pull-right pushNew" title="New notification">Push New</button>
								{{else}}
								<button class="btn btn-danger pull-right" title="You don not have enough rights to push notification." disabled>Push New</button>
								{{/if}}
							</article>
							<!-- notification form -->
							<form class="form-group" style="display:none;">
								<textarea class="form-control" rows="4" placeholder="Notifications to push to staff and student" name="notification" required></textarea><br/>
								<button type="reset" class="btn btn-danger btn-sm cancelPush">Cancel</button>
								<button type="submit" class="btn btn-primary btn-sm pull-right">Push Notification</button>
							</form>
						</div>
					</div>
				</div>
			</div>

			<div class="col-sm-4">
				<div class="card">
					<div class="card-body">
						<div class="card-title">
							<h3 class="text-center text-secondary">Current</h3>
						</div>
						<div class="card-text">
							<h4 class="text-info">
								Session: {{setting.session}}
							</h4>
							<h4 class="text-info">
								Term: {{termSuffix setting.term}}
							</h4>
						</div>
					</div>
				</div>
			</div>
		</div><br/>
		<!-- end first row -->
		<div class="row">
			<div class="col-sm-12 col-md-6 col-lg-3">
				<div class="card">
					<div class="card-body">
						<h4 class="card-title text-danger">
							{{allStudent}}73
							<span class="fa fa-users fa-2x float-right"></span>
						</h4>
						<p class="card-text">
							Students
						</p>
					</div>
				</div>
			</div>
			<!-- card break -->
			<div class="col-sm-12 col-md-6 col-lg-3">
				<div class="card">
					<div class="card-body">
						<h4 class="card-title text-info">
							{{allStaff}}8
							<span class="fa fa-user-secret fa-2x float-right"></span>
						</h4>
						<p class="card-text">
							Staffs
						</p>
					</div>
				</div>
			</div>
			<!-- card break -->
			<div class="col-sm-12 col-md-6 col-lg-3">
				<div class="card">
					<div class="card-body">
						<h4 class="card-title text-danger">
							{{allPayment}}8
							<span class="fa fa-money fa-2x float-right"></span>
						</h4>
						<p class="card-text">
							Payments
						</p>
					</div>
				</div>
			</div>
			<!-- card break -->
			<div class="col-sm-12 col-md-6 col-lg-3">
				<div class="card">
					<div class="card-body">
						<h4 class="card-title text-info">
							{{allAssignment}}8
							<span class="fa fa-check fa-2x float-right"></span>
						</h4>
						<p class="card-text">
							Assignments
						</p>
					</div>
				</div>
			</div>
		</div><br/>
		<!-- end second row -->
		<div class="row">
			<div class="col-sm-7">
				<div class="card">
					<div class="card-body">
						<h4 class="card-title text-info">
							Students &amp; Fees
						</h4>
						<div class="card-text">
						{{#with termSchoolFees}}
							<table class="table table-responsive table-striped">
								<thead>
									<tr>
										<th>Class</th>
										<th>No of Student</th>
										<th>School Fees (#)</th>
									</tr>
								</thead>

								<tbody>
									<tr>
										<td>JSS1</td>
										<td>{{studentCount "JSS1"}}</td>
										<td>{{schoolFees.JSS1}}</td>
									</tr>
									<tr>
										<td>JSS2</td>
										<td>{{studentCount "JSS2"}}</td>
										<td>{{schoolFees.JSS2}}</td>
									</tr>
									<tr>
										<td>JSS3</td>
										<td>{{studentCount "JSS3"}}</td>
										<td>{{schoolFees.JSS3}}</td>
									</tr>
									<tr>
										<td>SSS1</td>
										<td>{{studentCount "SSS1"}}</td>
										<td>{{schoolFees.SSS1}}</td>
									</tr>
									<tr>
										<td>SSS2</td>
										<td>{{studentCount "SSS2"}}</td>
										<td>{{schoolFees.SSS2}}</td>
									</tr>
									<tr>
										<td>SSS3</td>
										<td>{{studentCount "SSS3"}}</td>
										<td>{{schoolFees.SSS3}}</td>
									</tr>
								</tbody>
							</table>
						{{/with}}
						</div>
					</div>
				</div>
			</div>
			<div class="col-sm-5">
				<div class="card">
					<div class="card-body">
						<div class="card-title">
							<h4 class="text-center text-danger">Recent Activities</h4>
						</div>
						<div class="card-text">
							{{#each log}}
								<strong>*</strong> <span>{{name}} {{action}}</span> <span class="badge badge-secondary">@{{dateFormat time}}</span><br/>
							{{/each}}
							<a href="{{pathFor 'logs'}}">See more...</a>
						</div>
					</div>
				</div>
			</div>
		</div><br/>
		<!-- end third row -->
		<div class="row">
			<div class="col-sm-12">
				<div class="card text-white bg-info">
					<div class="card-body">
						<div class="card-title">
							<h3 class="text-center">
								Performance Analysis
							</h3>
						</div>
						<div title="coming soon" class="card-text text-center">
							<span class="fa fa-bar-chart-o fa-5x"></span>
						</div>
					</div>
				</div>
			</div>
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>
<template name="generalSearch">
	{{#if Template.subscriptionsReady}}
	<div class="row">
		<div class="col-sm-12">
			<h5><span class="fa fa-search"></span> Search</h5><hr/>
		<!-- Nav tabs -->
			  <ul class="nav nav-tabs" role="tablist">
			    <li class="nav-item">
			    	<a href="#findStudent" aria-controls="findStudent" role="tab" data-toggle="tab" class="nav-link active">Student</a>
			    </li>
			    <li class="nav-item">
			    	<a href="#findPayment" aria-controls="findPayment" role="tab" data-toggle="tab" class="nav-link">Payment</a>
			    </li>
			  </ul>
			 <div class="tab-content" style="margin:15px;">
			    <div role="tabpanel" class="tab-pane show fade active" id="findStudent">
			    	<form>
			    	<div class="form-group">
			    		<label>Student Id or Name</label><br/>
			    		<input type="text" name="student" class="form-control search" placeholder="student Id or Name" required>
			    	</div>
			    	<button class="btn btn-primary btn-sm">Search</button>
			    	</form>
			    	{{#each findStudent}}
			    		<div class="searchResult">
							<p>
								<span><a href="{{pathFor 'singleStudent'}}/{{studentId}}">{{lastName}} {{firstName}} {{otherName}}</a></span>
								<span>{{studentId}}</span>
								<span>{{currentClass}}</span>
							</p>	
			    		</div>
			    	{{/each}}
			    </div>
			    <div role="tabpanel" class="tab-pane fade" id="findPayment">
			    	<form>
			    	<div class="form-group">
			    		<label>Transaction Id</label><br/>
			    		<input type="text" name="payment" class="form-control search" placeholder="transaction Id" required>
			    	</div>
			    	<button class="btn btn-primary btn-sm">Search</button>
			    	</form>
			    	{{#with findPayment}}
			    		<div class="searchResult">
							<p>
								<span>{{lastName}} {{firstName}} {{otherName}}</span>
								<span>{{studentId}}</span>
								<span>{{currentClass}}</span>
								<span><a href="{{pathFor 'singlePayment'}}/{{studentId}}" class="btn btn-info btn-sm">Payments</a></span>
							</p>
							{{#each payment}}
							<article>
								<small>
									
										{{class}} | {{termSuffix term}} term | {{transactionId}},
									
								</small>
							</article>	
							{{/each}}
			    		</div>
			    	{{/with}}
			    </div>
			</div>
		</div>
	 </div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>
<template name="profile">
	{{#if Template.subscriptionsReady}}
		<div class="row">
			{{#with currentStaff}}
				<div class="col-sm-8">
					<table class="table table-responsive table-striped">	
						<thead>
							<tr>
								<th colspan="2" class="table-info">Employment Data</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<th>Last Name</th><td>{{lastName}}</td>
							</tr>
							<tr>
								<th>First Name</th><td>{{firstName}}</td>
							</tr>
							<tr>
								<th>Other Name</th><td>{{otherName}}</td>
							</tr>
							<tr>	
								<th>Gender</th> <td>{{gender}}</td>
							</tr>
							<tr>
								<th>Date of Birth</th> <td>{{dayMonthYear dob}}</td>
							</tr>
							<tr>
								<th>Staff ID</th> <td>{{staffId}}</td>
							</tr>
							<tr>
								<th>Email</th> <td>{{email}}</td>
							</tr>
							<tr>
								<th>Subject Taught</th> <td>{{subjectTaught}}</td>
							</tr>
						</tbody>
						<tfoot>
							<span><a href="{{pathFor 'editStaff'}}/{{staffId}}" class="btn btn-primary btn-sm"><span class="fa fa-edit"></span> edit</a></span>
						</tfoot>
					</table>
				<!-- Other Information --><br/>
				<table class="table table-responsive table-striped">
					<thead>
						<tr>
							<th colspan="2" class="table-info">Other Information</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<th>Origin</th> <td>{{town}}, {{state}} State</td>
						</tr>
						<tr>
							<th>Present Address</th> <td>{{presentAddress}}</td>
						</tr>
						<tr>
							<th>Home Address</th> <td>{{homeAddress}}</td>
						</tr>
						<tr>
							<th>Contact Number</th> <td>{{phone}}</td>
						</tr>
						<tr>
							<th>Hobbies</th> <td>{{hobby}}</td>
						</tr>
						<tr>
							<th>Club and Society</th> <td>{{club}}</td>
						</tr>
						<tr>
							<th colspan="2" class="table-info">Medical Record</th>
						</tr>
						<tr>
							<th>Blood Group</th><td>{{medicalHistory.bloodGroup}}</td>
						</tr>
						<tr>
							<th>Genotype</th><td>{{medicalHistory.genotype}}</td>
						</tr>
						<tr>
							<th>Condition</th><td>{{medicalHistory.medicalCondition}}</td>
						</tr>
						<tr>
							<th colspan="2" class="table-info">Next of Kin</th>
						</tr>
						<tr>
							<th>Name</th> <td>{{nok.name}}</td>
						</tr>
						<tr>
							<th>Address</th> <td>{{nok.address}}</td>
						</tr>
						<tr>
							<th>Contact</th> <td>{{nok.phone}}</td>
						</tr>
						<tr>
							<th>Relationship</th> <td>{{nok.relationship}}</td>
						</tr>
					</tbody>
					<tfoot>
						<span><a href="{{pathFor 'updateStaff'}}/{{staffId}}" class="btn btn-primary btn-sm"><span class="fa fa-edit"></span> edit profile</a></span>
					</tfoot>
				</table>
				</div>
				<div class="col-sm-4">
					<div class="passport" style="text-align:center;">
						<img src="/staff5.png" alt="{{lastName}} {{firstName}} passport">
						<p><strong>{{staffId}}</strong></p>
					</div>
					<div>
						<p><a href="#">Assignments</a></p><hr/>
						<p><a href="#">Subjects</a></p><hr/>
						<p><a href="#">Messages</a></p><hr/>
						<p><a href="#">Send feedback</a></p><hr/>
					</div>
				</div>
			{{/with}}
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="editProfile">
	{{#if Template.subscriptionsReady}}
	<div class="col-sm-10">
		{{#with currentStaff}}
		<table style="margin: 5px auto;">
			<tr><td><strong>Name</strong></td><td>{{lastName}}, {{firstName}} {{otherName}}</td><td rowspan="3"><img src="/staff5.png" alt="{{firstName}} passport"></td></tr>
			<tr><td><strong>Email</strong></td><td>{{email}}</td></tr>
			<tr><td><strong>Staff Id</strong></td><td>{{staffId}}</td></tr>
		</table>
		{{/with}}
		{{#autoForm schema="g.Schemas.UpdateStaff" id="editProfile" type="normal" doc=currentStaff validation='blur'}} 
			<fieldset>
				<legend>Profile Information</legend>
				<fieldset class="col-sm-4">
					{{>afQuickField name="state" options="allowed"}}
					{{>afQuickField name="town"}}
					{{>afQuickField name="homeAddress"}}
					{{>afQuickField name="presentAddress"}}
					{{>afQuickField name="nok"}}
				</fieldset>
				<fieldset class="col-sm-4">
					{{>afQuickField name="dob"}}
					{{>afQuickField name="phone"}}
					{{>afQuickField name="hobby"}}
					{{>afQuickField name="club" options="allowed"}}
					{{>afQuickField name="medicalHistory.bloodGroup" options="allowed"}}
					{{>afQuickField name="medicalHistory.genotype" options="allowed"}}
					{{>afQuickField name="medicalHistory.medicalCondition" options="allowed" type="select-checkbox-inline"}}
				</fieldset>
			</fieldset><br style="clear:both;"/>		
			<div class="form-group">
				<button type="submit" class="btn btn-primary">Update Profile</button>
			</div>
		{{/autoForm}}
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>
							
<template name="ctrlpanel">
	{{#if Template.subscriptionsReady}}
	<h4><span class="fa fa-cog"></span> Application Settings</h4><hr/>
	<div class="row">
		<div class="col-sm-6">
			<div class="card">
				<div class="card-body">
					<div class="card-title">
						<h5 class="text-center">Session and Term</h5>
					</div>
					<div class="card-text">
						<h6>Current session: {{setting.session}}
							<button type="button" class="btn btn-primary btn-sm" id="newSessionBtn" title="Start a new session">New session</button>
						</h6>
							
						<h6>Current term: {{termSuffix setting.term}}
							<button type="button" class="btn btn-primary btn-sm" id="newTermBtn" title="Start a new term">New term</button>
						</h6>
							
					</div>
				</div>
			</div>
			<div class="card">
				<div class="card-body">
					<div class="card-title">
						<h4 class="text-center">Promote Students</h4>
					</div>
					<div class="card-text alert alert-warning">
						<b>Please Note:</b>
						<p>
							When you promote students, JSS1 students would be promoted to JSS2, JSS2 to JSS3 and so on.<br/>SSS3 would be moved to the graduated list.
						</p>
						<button class="btn btn-danger" id="promoteStudents" title="Click to promote all students in the school to the next level.">Promote Students</button>
					</div>
				</div>
			</div>
		</div>
		<!-- end session and term card -->
		<div class="col-sm-6">
			<div class="card">
				<div class="card-body">
					<div class="card-title">
						<h5 class="text-center">
							Current Term School Fees
						</h5>
					</div>
					<div class="card-text">
						{{#if termSchoolFees}}
							{{#with termSchoolFees}}
							<article class="schoolFees">
								<h6>Term: {{termSuffix setting.term}}</h6>
								<ul style="list-style-type:square;">
									<li>JSS1: {{schoolFees.JSS1}}</li>
									<li>JSS2: {{schoolFees.JSS2}}</li>
									<li>JSS3: {{schoolFees.JSS3}}</li>
									<li>SSS1: {{schoolFees.SSS1}}</li>
									<li>SSS2: {{schoolFees.SSS2}}</li>
									<li>SSS3: {{schoolFees.SSS3}}</li>
								</ul>
								<button class="btn btn-danger">Change</button>	
							</article>
							{{/with}}
							<article class="changeSchoolFees" style="display:none;">
								{{> quickForm schema="g.Schemas.SchoolFees" id="updateSchoolFees" type="normal" afFieldInput-placeholder="schemaLabel" validation='blur' doc=termSchoolFees}}
							</article>
						{{else}}
							<p>Term school fees not yet set</p>
						{{/if}}
						<br/>
						 <button class="btn btn-danger" title="Feature will be enabled soon!" disabled>New payment category</button>
					</div>
				</div>
			</div>
			<!-- end current term and school fees card -->
		</div>
	</div><br/>
	<!-- end first row	 -->
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="newSessionModal">
		<!-- Moddal start -->
	<div class="modal fade">
			<div class="modal-dialog" role='document'>
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss='modal' arial-label='Close'>
							<span arial-hidden='true'>&times;</span>
						</button>
						<h3 class="modal-title" id='myModalLabel'>
							New session
						</h3>
					</div>
					<div class="modal-body">
						{{>quickForm schema="g.Schemas.SchoolFees" id="newSession" type="normal" validation='blur' afFieldInput-placeholder="schemaLabel"}}
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-dismiss='modal'>Close</button>
					</div>
				</div>
			</div>
	</div>
</template>
<template name="setTermAndSchoolFees">
		<!-- Moddal start -->
	<div class="modal fade">
			<div class="modal-dialog" role='document'>
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss='modal' arial-label='Close'>
							<span arial-hidden='true'>&times;</span>
						</button>
						<h3 class="modal-title" id='myModalLabel'>
							New term
						</h3>
					</div>
					<div class="modal-body">
						{{> quickForm schema="g.Schemas.SchoolFees" id="setTermAndSchoolFees" type="normal" afFieldInput-placeholder="schemaLabel" validation='blur'}}
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-dismiss='modal'>Close</button>
					</div>
				</div>
			</div>
	</div>
		<!-- Modal end -->
</template>
<template name="editorList">
	{{#if isInRole 'admin'}}
		{{#if Template.subscriptionsReady}}

		{{else}}
			{{> smsLoading}}
		{{/if}}

	{{/if}}
</template>
<!-- Staff Template begin -->
<template name="staffList">
		<h5>Staff list &nbsp;&nbsp;&nbsp;<a href="{{pathFor 'newStaff'}}" class="btn btn-primary btn-sm"><span class="fa fa-plus"></span> New staff</a></h5><hr/>
	{{#if Template.subscriptionsReady}}
	<div class="row">
		<div class="col-sm-12">
			<form class="filter">
				<input type="text" name="name" placeholder="staff name">
				<input type="text" name="staffId" placeholder="staff Id">
				<button type="submit" class="btn btn-primary btn-sm">Filter staff</button>
				<button class="btn btn-primary btn-sm" id="all_staff">Show all staffs</button>
			</form>
			{{#if staffs}}
			<table class="table table-responsive table-bordered table-hover serial">
				<thead>
					<tr>
						<th>S/N</th>
						<th>Name</th>
						<th>Staff ID</th>
						<th>Subjects</th>
						<th>Gender</th>
						<th>Actions</th>
					</tr>	
				</thead>
				<tbody>
				{{#each staffs}}
					<tr>
						<td></td>
						<td>{{lastName}}, {{firstName}} {{otherName}}</td>
						<td>{{staffId}}</td>
						<td>{{subjectTaught}} <br/></td> 
						<td>{{gender}}</td>
						<td><a href="{{pathFor 'singleStaff'}}/{{staffId}}" class="btn btn-info btn-sm"> <span class="fa fa-info-circle"></span> More Details</a></td>
					</tr>
				{{/each}}
				</tbody>
			</table>
			{{else}}
				<h4>No staff found!</h4>
			{{/if}}
		</div>
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="singleStaff">
	{{#if Template.subscriptionsReady}}
	{{#with staff}}	
	<h5>{{lastName}}, {{firstName}} {{otherName}} Profile 
		{{#if isInRole 'admin'}}
		<span class="btn btn-danger btn-sm" id="removeAdmin">Remove Admin</span>
		<span class="btn btn-danger btn-sm" id="makeAdmin">Make Admin</span>
		{{/if}}
	</h5><hr/>
	<div class="row">
		<div class="col-sm-8">	
			<table class="table table-responsive table-striped">
				<thead>
					<tr>
						<th colspan="2" class="table-info">Employment Data</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<th>Last Name</th><td>{{lastName}}</td>
					</tr>
					<tr>
						<th>First Name</th><td>{{firstName}}</td>
					</tr>
					<tr>
						<th>Other Name</th><td>{{otherName}}</td>
					</tr>
					<tr>	
						<th>Gender</th> <td>{{gender}}</td>
					</tr>
					<tr>
						<th>Date of Birth</th> <td>{{dayMonthYear dob}}</td>
					</tr>
					<tr>
						<th>Staff ID</th> <td>{{staffId}}</td>
					</tr>
					<tr>
						<th>Email</th> <td>{{email}}</td>
					</tr>
					<tr>
						<th>Subject Taught</th> <td>{{subjectTaught}}</td>
					</tr>
				</tbody>
				<tfoot>
					<span><a href="{{pathFor 'editStaff'}}/{{staffId}}" class="btn btn-primary btn-sm"><span class="fa fa-edit"></span> edit</a></span>
				</tfoot>
			</table>


			<!-- Other Information -->
			<table class="table table-responsive table-striped">
				<thead>
					<tr>
						<th colspan="2" class="table-info">Other Information</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<th>Origin</th> <td>{{town}}, {{state}} State</td>
					</tr>
					<tr>
						<th>Present Address</th> <td>{{presentAddress}}</td>
					</tr>
					<tr>
						<th>Home Address</th> <td>{{homeAddress}}</td>
					</tr>
					<tr>
						<th>Contact Number</th> <td>{{phone}}</td>
					</tr>
					<tr>
						<th>Hobbies</th> <td>{{hobby}}</td>
					</tr>
					<tr>
						<th>Club and Society</th> <td>{{club}}</td>
					</tr>
					<tr>
						<th colspan="2" class="table-info">Medical Record</th>
					</tr>
					<tr>
						<th>Blood Group</th><td>{{medicalHistory.bloodGroup}}</td>
					</tr>
					<tr>
						<th>Genotype</th><td>{{medicalHistory.genotype}}</td>
					</tr>
					<tr>
						<th>Condition</th><td>{{medicalHistory.medicalCondition}}</td>
					</tr>
					<tr>
						<th colspan="2" class="table-info">Next of Kin</th>
					</tr>
					<tr>
						<th>Name</th> <td>{{nok.name}}</td>
					</tr>
					<tr>
						<th>Address</th> <td>{{nok.address}}</td>
					</tr>
					<tr>
						<th>Contact</th> <td>{{nok.phone}}</td>
					</tr>
					<tr>
						<th>Relationship</th> <td>{{nok.relationship}}</td>
					</tr>
				</tbody>
				<tfoot>
					<span><a href="{{pathFor 'updateStaff'}}/{{staffId}}" class="btn btn-primary btn-sm"><span class="fa fa-edit"></span> edit profile</a></span>
				</tfoot>
			</table>
		</div>
		<div class="col-sm-4">
			<p><img src="/staff5.png" alt="Staff Passport Photograph"></p>
			<p><a href="#">View Assignments</a></p>
			<p><a href="#">Send a Message</a></p>
			{{#if isInRole "admin,editor"}}
				<button class="btn btn-danger" id="deleteStaff" title="Remove this staff from school.">Delete Staff</button>
			{{/if}}
		</div>		
	</div>
	{{/with}}
	{{else}}
		{{>smsLoading}}
	{{/if}}
	
</template>



<template name="newStaff">
	<h5>New staff</h5><hr/>
	<p>Section suffixed with <span class="fa fa-asterisk text-danger"></span> must be filled.</p>
	{{#autoForm collection="g.Staffs" id="newStaff" type="normal" validation='blur'}}
		<div class="row">
			<section class="col-sm-6">
				<fieldset>
					<legend>Employment Data <span class="fa fa-asterisk text-danger"></span></legend>
					{{>afQuickField name="firstName"}}
					{{>afQuickField name="lastName"}}
					{{>afQuickField name="otherName"}}
					{{>afQuickField name="gender" options="allowed" firstOption="Select gender" type="select-radio-inline"}}
					{{>afQuickField name="dob"}}
					{{>afQuickField name="staffId"}}
					{{>afQuickField name="subjectTaught"}}
				</fieldset>
			</section>
			<section class="col-sm-6">
				<fieldset>
					<legend>Medical History </legend>
					{{>afQuickField name="medicalHistory.bloodGroup" options="allowed"}}
					{{>afQuickField name="medicalHistory.genotype" options="allowed"}}
					{{>afQuickField name="medicalHistory.medicalCondition" options="allowed" type="select-checkbox-inline"}}
				</fieldset>
				<fieldset>
					<legend>Next of Kin</legend>
					{{>afQuickField name="nok.name"}}
					{{>afQuickField name="nok.address"}}
					{{>afQuickField name="nok.phone"}}
					{{>afQuickField name="nok.relationship"}}
				</fieldset>
			</section>
			<!-- other information -->
			<div class="col-sm-6">
				<legend>Other Information</legend>
				<fieldset>
					{{>afQuickField name="state" options="allowed" firstOption="Select class"}}
					{{>afQuickField name="town"}}
					{{>afQuickField name="homeAddress"}}
					{{>afQuickField name="presentAddress"}}
					{{>afQuickField name="email"}}
					{{>afQuickField name="club" options="allowed"}}
				</fieldset>	
			</div>
			<div class="col-sm-6">
				<fieldset>
					{{>afQuickField name="phone"}}
					{{>afQuickField name="hobby"}}
				</fieldset>
			<!-- miscellaneous fields -->
				{{>afQuickField name="createdAt"}}
				{{>afQuickField name="addedBy"}}
			</div>
			<div class="col-sm-12">
				<div class="form-group">										<button type="reset" class="btn btn-danger">Reset</button>
					&nbsp;&nbsp;&nbsp;<button type="submit" class="btn btn-primary btn-lg">Submit</button>
				</div>
			</div>
		</div>
	{{/autoForm}}
</template>

<template name="editStaff">
	{{#if Template.subscriptionsReady}}
		<div class="row">
			<div class="col-sm-6">
				<h5>Edit Staff details</h5><hr/>
				{{#with editStaffInfo}}
					<table class="table table-sm table-bordered">
						<tbody>
							<tr>
								<th>{{lastName}}, {{firstName}} {{otherName}}</th>
								<td rowspan="3"><img src="/staff5.png" alt="{{firstName}} passport" class="rounded-circle" style="max-width:80px;"></td>
							</tr> 
						</tbody>
					</table>
				{{/with}}
			</div>
		</div>
		{{#autoForm schema="g.Schemas.EditStaff" id="editStaff" type="normal" doc=editStaffInfo validation='blur'}}
		<div class="row">
			<div class="col-sm-12">
				<h4>Employment Data</h4>
			</div>
			<div class="col-sm-6">
				<fieldset>
					{{> afQuickField name="firstName"}}
					{{> afQuickField name="lastName"}}
					{{> afQuickField name="otherName"}}
					{{> afQuickField name="gender" options="allowed" type="select-radio-inline"}}
				</fieldset>
			</div>
			<div class="col-sm-6">
				<fieldset>
					{{> afQuickField name="subjectTaught"}}
				</fieldset>
			</div>
			<div class="col-sm-12">
				<div class="form-group">
					<button type="submit" class="btn btn-primary">Update</button>
				</div>
			</div>
		</div>
		{{/autoForm}}

	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="updateStaff">
	{{#if Template.subscriptionsReady}}
	<div class="row">
		<div class="col-sm-6">
			<h5>Update Staff Information</h5><hr/>
			{{#with updateStaffInfo}}
				<table class="table table-sm table-bordered">
					<tbody>
						<tr>
							<th>{{lastName}}, {{firstName}} {{otherName}}</th>
							<td rowspan="2"><img src="/staff5.png" alt="{{firstName}} passport" class="rounded-circle" style="max-width:80px;"></td>
						</tr>
					</tbody>
				</table>
			{{/with}}
		</div>
	</div>
	{{#autoForm schema="g.Schemas.UpdateStaff" id="updateStaff" type="normal" doc=updateStaffInfo validation='blur'}} 
	<div class="row">
		<div class="col-sm-12">
			<h5>Profile Information</h5><hr/>
		</div>
		<div class="col-sm-6">
			<fieldset>
				{{>afQuickField name="state" options="allowed"}}
				{{>afQuickField name="town"}}
				{{>afQuickField name="homeAddress"}}
				{{>afQuickField name="presentAddress"}}
				{{>afQuickField name="nok"}}
			</fieldset>
		</div>
		<div class="col-sm-6">
			<fieldset>
				{{>afQuickField name="dob"}}
				{{>afQuickField name="phone"}}
				{{>afQuickField name="hobby"}}
				{{>afQuickField name="club" options="allowed"}}
				<!-- {{>afQuickField name="medicalHistory"}} -->
				{{>afQuickField name="medicalHistory.bloodGroup" options="allowed"}}
				{{>afQuickField name="medicalHistory.genotype" options="allowed"}}
				{{>afQuickField name="medicalHistory.medicalCondition" options="allowed" type="select-checkbox-inline"}}
			</fieldset>
		</div><br/>
		<div class="col-sm-12 form-group">
			<button type="submit" class="btn btn-primary">Update</button>
		</div>
	</div>
	{{/autoForm}}
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<!-- Staff Template end -->

<!-- Passport upload -->
<template name="passportUpload">
	<div class="col-sm-7">
		<h3>Upload Passport</h3><hr/>
			<div class="text-info">
				{{#with uploadInfo}}
					<p><strong>Name: </strong>{{name}}</p>
					<p><strong>Id: </strong>{{id}}</p>
					<p><strong>Role: </strong>{{diff}}</p>
				{{/with}}
			</div>
			<div class="alert-warning" style="padding: 10px;">
				<p>(a). Format: .png, .jpg only</p>
				<p>(b). Size: less than 50kb and greater than 5kb</p>
				<p>(c). Dimension: Width &lt;&equals; 250, Height &lt;&equals; 310</p>
			</div>

			<label>Select file to upload</label><br/>
			<input type="file" name="file" id="file" value="Select passport"><br/>

		<button>Take a picture</button>
	</div>
	<div class="col-sm-4">
		<h3>Upload Preview</h3>
		<div id="passportPreview">Upload Preview</div><br/>
		<button id="uploadBtn" class="btn btn-danger">Upload</button>	
	</div>
</template>

<!-- ******************************************* -->
<!-- *************Break Break Break************* -->
<!-- ******************************************* -->
<!-- students templates begin -->

<template name="studentList">
	<h5>Student list &nbsp; <a href="{{pathFor 'newStudent'}}" class="btn btn-primary btn-sm"><span class="fa fa-plus"></span> New Student</a></h5><hr/>
	{{#if Template.subscriptionsReady}}
	<div class="row">
		<div class=" col-sm-12">	
		<h5 class="text-info">
			{{#with getSession "studentFilter"}}
				<strong>Showing <em>{{selectedClass}}</em></strong>
			{{else}}
				<strong>Showing <em>JSS1</em> students.</strong>
			{{/with}}
		</h5>
		<form class="filter">
			<input type="text" name="name" placeholder="name">	
			<input type="text" name="studentId" placeholder="student Id">
			<select name='class'>
			{{#each classes}}
				<option>{{this}}</option>
			{{/each}}
			</select>
			<button type="submit" class="btn btn-primary btn-sm">Filter students</button>
		</form><br/>
		{{#if students}}
			<button class="demoteStudent btn btn-danger btn-sm" disabled>Demote selected</button>
		<table class="table table-responsive table-bordered table-hover serial">
			<thead>
				<tr>
					<th>#</th>
					<th><input type="checkbox" name="checkAllBoxes" class="checkAllBoxes"></th>
					<th>Name</th>
					<th>ID</th>
					<th>Gender</th>
					<th>Action</th>
				</tr>
			</thead>
			<tbody>
			{{#each students}}
				<tr>
					<td></td>
					<td>
					<input type="checkbox" name="checkStudent" value="{{meteorIdInStudent}}" style="display:inline;">
					</td>
					<td>{{lastName}}, {{firstName}} {{otherName}}</td>
					<td>{{studentId}}</td>
					<td>{{gender}}</td>
					<td style="text-align: center;"><a href="{{pathFor 'singleStudent'}}/{{studentId}}" class="btn btn-info btn-sm"><span class="fa fa-info-circle"></span> More details</a> <br/>
					</td>
				</tr>
			{{/each}}
			</tbody>
		</table>
		{{else}}
			<h5>
				{{#with getSession "studentFilter"}}
					<strong>No student found in <em>{{selectedClass}}</em></strong>
				{{else}}
					<strong>No student found in JSS1</strong>
				{{/with}}
			</h5>
		{{/if}}
		</div>
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>
<template name="singleStudent">
	{{#if Template.subscriptionsReady}}
		<!-- Admission Information -->
	{{#with student}}
	<h5>{{lastName}}, {{firstName}} {{otherName}} Profile</h5><hr/>	
	<div class="row">
			<div class="col-sm-8">	
				<table class="table table-responsive table-striped">
					<thead>
						<tr>
							<th colspan="2" class="table-info">Admission Data</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<th>Last Name</th><td>{{lastName}}</td>
						</tr>
						<tr>
							<th>First Name</th><td>{{firstName}}</td>
						</tr>
						<tr>
							<th>Other Name</th><td>{{otherName}}</td>
						</tr>
						<tr>	
							<th>Gender</th> <td>{{gender}}</td>
						</tr>
						<tr>
							<th>Class</th>	<td>{{currentClass}}</td>
						</tr>
						<tr>
							<th>Student ID</th> <td>{{studentId}}</td>
						</tr>
						<tr>
							<th>Date of Birth</th> <td>{{dayMonthYear dob}}</td>
						</tr>
						<tr>
							<th colspan="2" class="table-info">Parent/Guardian</th>
						</tr>
						<tr>
							<th>Name</th>
							<td>{{parentOrGuardian.name}}</td>
						</tr>
						<tr>
							<th>Address</th>
							<td>{{parentOrGuardian.address}}</td>
						</tr>
						<tr>
							<th>Contact Number</th>
							<td>{{parentOrGuardian.phone}}</td>
						</tr>
					</tbody>
					<tfoot><span class="edit"><a href="{{pathFor 'editStudent'}}/{{studentId}}" class="btn btn-primary btn-sm"><span class="fa fa-edit"></span> edit admission info</a></span></tfoot>
				</table>
				<!-- Other Information -->
				<table class="table table-responsive table-striped">
					<thead>
						<tr>
							<th colspan="2" class="table-info">Personal Information</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<th>Contact Number</th> <td>{{phone}}</td>
						</tr>
						<tr>
							<th>Email</th> <td>{{email}}</td>
						</tr>
						
						<tr>
							<th>State</th> <td>{{state}} State</td>
						</tr>
						<tr>
							<th>Town</th> <td>{{town}}</td>
						</tr>
						<tr>
							<th>Present Address</th> <td>{{presentAddress}}</td>
						</tr>
						<tr>
							<th>Home Address</th> <td>{{homeAddress}}</td>
						</tr>
						<tr>
							<th>Hobbies</th> <td>{{hobby}}</td>
						</tr>
						<tr>
							<th>Club and Society</th> <td>{{club}}</td>
						</tr>
						<tr>
							<th colspan="2" class="table-info">Next of Kin</th>
						</tr>
						<tr>
							<th>Name</th> <td>{{nok.name}}</td>
						</tr>
						<tr>
							<th>Address</th> <td>{{nok.address}}</td>
						
						</tr>
						
						<tr>
							<th>Contact</th> <td>{{nok.phone}}</td>
						</tr>
						<tr>
							<th>Relationship</th> <td>{{nok.relationship}}</td>
						</tr>
						<tr>
							<th colspan="2" class="table-info">Medical History</th>
						</tr>
						<tr>
							<th>Blood Group</th>
							<td>{{medicalHistory.bloodGroup}}</td>
						</tr>
						<tr>
							<th>Genotype</th>
							<td>{{medicalHistory.genotype}}</td>
						</tr>
						<tr>
							<th>Blood Group</th>
							<td>{{medicalHistory.medicalCondition}}</td>
						</tr>
					</tbody>
					<tfoot><span class="edit"><a href="{{pathFor 'updateStudent'}}/{{studentId}}" class="btn btn-primary btn-sm"><span class="fa fa-edit"></span> edit profile</a></span></tfoot>
				</table>
		</div>
		<div class="col-sm-4">
			<p><img src="/student10.png" alt="{{studentId}} Passport Photograph"></p>
			<p><a href="{{pathFor 'singleResult'}}/{{studentId}}" class="btn btn-primary btn-sm"><span class="fa fa-check-circle"></span> View Results</a></p>
			<p><a href="{{pathFor 'singlePayment'}}/{{studentId}}" class="btn btn-primary btn-sm"><span class="fa fa-money"></span> View Payments</a></p>
			<p><a href="{{pathFor 'performance'}}/{{studentId}}" class="btn btn-primary btn-sm"><span class="fa fa-bar-chart-o"></span> View Performance</a></p>
			<button class="btn btn-danger" id="deleteStudent" title="Remove this student from school.">Delete Student</button>
		</div>		
	</div>
	{{/with}}
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>
<template name="newStudent">	
	<h5>New student</h5>
	<p>Section suffixed with <span class="fa fa-asterisk text-danger"></span> must be filled.</p>
	<hr/>
	{{#autoForm collection="g.Students" id="newStudent" type="normal" validation='blur'}}
	<div class="row">
		<div class="col-sm-6">
			<fieldset>
				<legend>Personal Information <span class="fa fa-asterisk text-danger"></span></legend>
				{{>afQuickField name="firstName"}}
				{{>afQuickField name="lastName"}}
				{{>afQuickField name="otherName"}}
				{{>afQuickField name="gender" options="allowed" firstOption="Select gender" type="select-radio-inline"}}
				{{>afQuickField name="dob"}}
			</fieldset>
			<fieldset>
				<legend>Other Information</legend>
				{{>afQuickField name="state" options="allowed" firstOption="Select class"}}
				{{>afQuickField name="town"}}
				{{>afQuickField name="homeAddress"}}
				{{>afQuickField name="presentAddress"}}
				{{>afQuickField name="phone"}}
				{{>afQuickField name="email"}}
				{{>afQuickField name="hobby"}}
				{{>afQuickField name="club" options="allowed"}}
			</fieldset>
		</div>
		<div class="col-sm-6">
			<fieldset>
				<legend>Admission Data <span class="fa fa-asterisk text-danger"></span></legend>
				{{>afQuickField name="currentClass" options="allowed" firstOption="Select class"}}
				{{>afQuickField name="studentId"}}
				{{>afQuickField name="parentOrGuardian"}}
			</fieldset>
			<fieldset>
				<legend>Medical History </legend>
				{{>afQuickField name="medicalHistory.bloodGroup" options="allowed"}}
				{{>afQuickField name="medicalHistory.genotype" options="allowed"}}
				{{>afQuickField name="medicalHistory.medicalCondition" options="allowed" type="select-checkbox-inline"}}
			</fieldset>
			<fieldset>
				{{>afQuickField name="nok"}}
			</fieldset>
				{{>afQuickField name="createdAt"}}
				{{>afQuickField name="addedBy"}}
		</div>
		<div class="col-sm-12">
			<div class="form-group">										
				<button type="reset" class="btn btn-danger">Reset</button>
						&nbsp;&nbsp;&nbsp;
				<button type="submit" class="btn btn-primary btn-lg">Submit</button>
			</div>
		</div>
	</div>
	{{/autoForm}}
</template>


<template name="editStudent">
	{{#if Template.subscriptionsReady}}
	<div class="row">
		<div class="col-sm-6">
			<h5>Edit student details</h5><hr/>
			{{#with editStudentInfo}}
				<table class="table table-sm table-bordered">
					<tbody>
						<tr>
							<th>{{lastName}}, {{firstName}} {{otherName}}</th>
							<td rowspan="2"><img src="/student10.png" alt="{{studentId}} passport" class="rounded-circle" style="max-width:80px;"></td>
						</tr>
					</tbody>
				</table>
			{{/with}}
		</div>
	</div>
	{{#autoForm schema="g.Schemas.EditStudent" id="editStudent" type="normal" doc=editStudentInfo validation='blur'}}
	<div class="row">
		<div class="col-sm-12">
			<legend>Admission Data</legend><hr/>
		</div>
		<div class="col-sm-6">
			<fieldset>
				{{> afQuickField name="firstName"}}
				{{> afQuickField name="lastName"}}
				{{> afQuickField name="otherName"}}
				{{> afQuickField name="currentClass" options="allowed" firstOption="Current class"}}
				{{> afQuickField name="gender" options="allowed" type="select-radio-inline"}}
			</fieldset>
		</div>
		<div class="col-sm-6">
			<fieldset>
				{{> afQuickField name="parentOrGuardian"}}
			</fieldset>
		</div><br/>
		<div class="form-group col-sm-12">
			<button type="submit" class="btn btn-primary">Update</button>
		</div>	
	</div>
	{{/autoForm}}
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="updateStudent">
	{{#if Template.subscriptionsReady}}
	<div class="row">
		<div class="col-sm-6">
			<h3>Update student details</h3><hr/>
			{{#with updateStudentInfo}}
				<table class="table table-sm table-bordered">
					<tbody>
						<tr>
							<th>{{lastName}}, {{firstName}} {{otherName}}</th>
							<td rowspan="2"><img src="/student10.png" alt="{{studentId}} passport" class="rounded-circle" style="max-width:80px;"></td>
						</tr>
					</tbody>
				</table>
			{{/with}}
		</div>
	</div>
	{{#autoForm schema="g.Schemas.UpdateStudent" id="updateStudent" type="normal" doc=updateStudentInfo validation='blur'}}
	<div class="row">
		<div class="col-sm-12">
			<legend>Profile Information</legend><hr/>
		</div>	
		<div class="col-md-6">
			<fieldset>
				{{>afQuickField name="state" options="allowed"}}
				{{>afQuickField name="town"}}
				{{>afQuickField name="homeAddress"}}
				{{>afQuickField name="presentAddress"}}
				{{>afQuickField name="nok"}}
			</fieldset>
			
		</div>	
		<div class="col-sm-6">
			<fieldset>
				{{>afQuickField name="dob"}}
				{{>afQuickField name="phone"}}
				{{>afQuickField name="hobby"}}
				{{>afQuickField name="club" options="allowed"}}
				<!-- {{>afQuickField name="medicalHistory"}} -->
				{{>afQuickField name="medicalHistory.bloodGroup" options="allowed"}}
				{{>afQuickField name="medicalHistory.genotype" options="allowed"}}
				{{>afQuickField name="medicalHistory.medicalCondition" options="allowed" type="select-checkbox-inline"}}
			</fieldset>
		</div><br/>				
		<div class="form-group col-sm-12">
			<button type="submit" class="btn btn-primary">Update</button>	
		</div>
	</div>
		{{/autoForm}}
	{{else}}
		{{>smsLoading}}
	{{/if}}
	
</template>
<template name="import">
	<h5>Import Data</h5><hr/>
	<div class="row">
		<div class="col-sm-12">
			<form>
				<select name="data">
					<option disabled selected>Data to import</option>
					<option value="staffs">Staffs</option>
					<option value="students">Students</option>
					<option value="results">Results</option>
				</select>
				<select name="class" style="display:none;">
					<option disabled selected>Select class</option>
				{{#each classes}}
					<option value="{{this}}">{{this}}</option>
				{{/each}}
				</select>
				<select name="subject" style="display:none;">
					<option disabled selected>Select subject</option>
				{{#each subjects}}
					<option value="{{this}}">{{this}}</option>
				{{/each}}
				</select>
				<input type="file" name="file" id="file">
				<button type="submit" class="btn btn-primary">Import</button>
			</form><hr/>
			<section class="preview" style="display:none;">
				<h5>Preview as JSON</h5>
				<pre class="bg-light" style="max-height:30em;overflow:auto;"></pre>
			</section><br/>
		</div>
	</div>
</template>
<template name="export">
	<h5>Export Data</h5><hr/>
	<div class="row">
		<div class="col-sm-12">
			<form>
				<select name="data">
					<option disabled selected>Data to export</option>
					<option value="staffs">Staffs</option>
					<option value="students">Students</option>
					<option value="graduated">Graduated Student</option>
					<option value="results">Results</option>
				</select>
				<select name="class" style="display:none;">
					<option disabled selected>Select class</option>
				{{#each classes}}
					<option value="{{this}}">{{this}}</option>
				{{/each}}
				</select>
				<select name="graduatedYear" style="display:none;">
					{{#each yearArray}}
						<option value="{{this}}">{{this}}</option>
					{{/each}}
				</select>
				<button type="submit" class="btn btn-primary btn-sm">Export</button>
			</form><hr/>
			<section class="preview" style="display:none;">
				<h5>Preview</h5>
				<pre class="bg-light" style="max-height:30em;overflow:auto;"></pre>
					<button class="btn btn-primary exportAsJSON" title="JavaScript Object Notation">Export as JSON</button>
					<button class="btn btn-primary exportAsXLSX" title="xlsx, xls, ods">Export as Spreadsheet</button>	
			</section><br/>
		</div>
	</div>
</template>
<!-- Student templates end -->

<!-- Result templates begin -->
<template name="resultList">
	<h5>Result List <a href="{{pathFor 'uploadResult'}}" class="btn btn-primary btn-sm"><span class="fa fa-upload"></span> Upload Result</a></h5><hr/>
	{{#if Template.subscriptionsReady}}
	<div class="row">
		<div class="col-sm-12">
			<h6 class="text-info">
				{{#with getSession "resultFilter"}}
					<strong>Showing result for <em>{{selectedClass}}</em> class.</strong>
				{{else}}
					<strong>Showing result for <em>JSS1</em> class.</strong>
				{{/with}}
			</h6>
			<form class="filter">
				<input type="text" name="studentId" placeholder="student Id">
				<select name='class'>
					{{#each classes}}
					<option>{{this}}</option>
					{{/each}}
				</select>
				<button type="submit" class="btn btn-primary btn-sm">Filter result</button>
			</form><br/>
			{{#if results}}
			<table class="table table-responsive table-bordered table-hover serial">
				<thead>
					<tr>
						<th>S/N</th>
						<th>Name</th>
						<th>Student ID</th>
						<th>Last Result</th>
						<th>Action</th>
					</tr>	
				</thead>
			{{#each results}}
				<tbody>
					<tr>
						<td></td>
						<td>{{firstName}}, {{lastName}} {{otherName}}</td>
						<td>{{studentId}}</td>
						<!-- if student has result					 -->
					{{#if lastResult}}
						{{#with lastResult}}
						<td>
								{{class}} {{termSuffix term}} {{session}}
						</td>
						{{/with}}
						<td>
							<a href="{{pathFor 'singleResult'}}/{{studentId}}" class="btn btn-info btn-sm"><span class="fa fa-info"></span> View</a> 
							{{#unless termResultAvailable}}
							<a href="{{pathFor 'updateResult'}}" class="addResult btn btn-primary btn-sm"><span class="fa fa-plus"></span> Add</a>
							{{/unless}}
						</td>
						<!-- else if no result -->
					{{else}}
						<td>No result</td>
						<td>
							{{#unless termResultAvailable}}
							<a href="{{pathFor 'updateResult'}}" class="addResult btn btn-primary btn-sm"><span class="fa fa-plus"></span> Add</a>
							{{/unless}}
						</td>
					{{/if}}
					</tr>
				</tbody>
			{{/each}}
			</table>
			{{else}}
				<h6>
				{{#with getSession "resultFilter"}}
					<strong>No result found for <em>{{selectedClass}}</em> class.</strong>
				{{else}}
					<strong>No result found for <em>JSS1</em> class.</strong>
				{{/with}}
				</h6>

			{{/if}}
		</div>
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="singleResult">
	{{#if Template.subscriptionsReady}}
		<div class="row">
			<div class="col-sm-12">	
			{{#with studentInfo}}
				<h5>{{firstName}}, {{lastName}} {{otherName}} Result</h5>
				<hr style="border-bottom: 3px dashed #abcdef;"/>
				<form class='searchResult'>
					<select name="class">
					{{#if availableClass}}
						{{#each availableClass}}	
							<option value="{{this}}">{{this}}</option>
						{{/each}}
					{{/if}}
					</select>
					<select name="term">
						{{#each termArray}}
						<option value="{{this}}">{{termSuffix this}} term</option>
						{{/each}}
					</select>
					<button type="submit" class="btn btn-primary btn-sm">Show result</button>
				</form><br/>
				<table class="table table-responsive table-bordered">
					<tbody>
						<tr>
							<th>First Name</th>
							<td>{{firstName}}</td>
							<th>Other Name</th>
							<td>{{lastName}} {{otherName}}</td>
							<td rowspan="3">
								<img src="student10.png" alt="{{studentId}} passport">
							</td>
						</tr>
						<tr>
							<th>Student ID</th>
							<td>{{studentId}}</td>
							<th>Email</th>
							<td>{{email}}</td>
						</tr>
						<tr>
							<th>Current Class</th>
							<td>{{currentClass}}</td>
							<th>Current Term</th>
							<td>{{termSuffix setting.term}}</td>
						</tr>
					</tbody>
				</table>
			{{/with}}<!-- end first student Info -->
			{{#with singleRes}}
					<table class="table table-responsive table-striped table-bordered">
						<thead>
							<tr>
								<th colspan="7" class="table-info">Result details</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<th>Class</th> <td>{{class}}</td>
								<th>Term</th> <td>{{termSuffix term}}</td>
								<th>Session</th><td>{{session}}</td>
							</tr>
						</tbody>
					</table>
					<table class="table table-responsive table-striped table-bordered serial">
						<thead>
							<tr>
								<th>#</th>
								<th>Subjects</th>
								<th>CA</th>
								<th>Exam</th>
								<th>Total</th>
								<th>Grade</th>
								<th>Remark</th>
							</tr>
						</thead>
						<tbody>
							{{#each resultObjectToArray singleRes}}
							<tr>
								<th></th>
								<td>{{this.name}}</td>
								<td>{{this.value.ca}}</td>
								<td>{{this.value.exam}}</td>
								<td>{{this.value.total}}</td>
								<td>{{this.value.grade}}</td>
								<td>{{this.value.remark}}</td>
							</tr>
							{{/each}}
						</tbody>
						{{#with studentInfo}}
						<tfoot>
							<a href="{{pathFor 'editResult'}}/{{studentId}}" class="btn btn-primary btn-sm"><span class="fa fa-edit"></span> edit</a>
						</tfoot>
						{{/with}}
					</table><br/>
					<button class="btn btn-danger btn-lg" onclick="window.print()">Print</button>
				{{else}}
					{{#with getSession "requestedResult"}}
						<h5 class="text-info text-center">
							No result found for {{class}} term {{term}}.
						</h5>
					{{else}}
						<h5 class="text-danger text-center">
							Result not yet available for term {{setting.term}}
						</h5>
					{{/with}}
				{{/with}}
		</div>	
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>


<template name="updateResult">
	{{#if Template.subscriptionsReady}}
		<div class=" col-sm-10">
		{{#if resultFor}}
			{{#with resultFor}}
				<h3>Add Result</h3><hr/>
				<table style="margin: 5px auto;">
					<tr>
						<td><strong>Name:</strong></td> <td><strong>{{name}}</strong></td>
						<td><strong>Student ID:</strong></td> <td><strong>{{studentId}}</strong></td>
						<td rowspan="2"><img src="student10.png" alt="{{studentId}} passport"></td>
					</tr>
					<tr>
						<td><strong>Class:</strong></td> <td><strong>{{currentClass}}</strong></td>
						<td><strong>Term:</strong></td> <td><strong>{{termSuffix term}}</strong></td>
					</tr>
				</table>

			{{/with}}
			{{> quickForm schema="g.Schemas.ResultArray" id="updateResult" type="normal" template="bootstrap3-inline" label-class="sr-only" afFieldInput-placeholder="schemaLabel" validation='blur'}}

		{{else}}
			<p>No student is selected for this result. Select a student first.</p>
		{{/if}}
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="editResult">
		{{#if Template.subscriptionsReady}}
		<div class=" col-sm-8">
			<h3>Edit Result</h3><hr/>
			<h3>Student details</h3><hr/>
				{{#with studentInfo}}
					<table style="margin: 5px auto;">
						<tr>
							<td><strong>Name:</strong></td> <td><strong>{{lastName}}, {{firstName}} {{otherName}}</strong></td>
							<td><strong>Student ID:</strong></td> <td><strong>{{studentId}}</strong></td>
							<td rowspan="2"><img src="student10.png" alt="{{studentId}} passport"></td>
						</tr>
						<tr>
							<td><strong>Class:</strong></td> <td><strong>{{currentClass}}</strong></td>
							<td><strong>Term:</strong></td>
							<td><strong>{{termSuffix setting.term}}</strong></td>
						</tr>
					</table>
				{{/with}}
				{{#with resultToEdit}}
					<h3>Update result for</h3>
					<table>
						<tr>
						<td><strong>Class</strong></td>
						<td>{{class}}</td>
						<td><strong>Term</strong></td>
						<td>{{termSuffix term}}</td>
						</tr>
					</table>
					{{> quickForm type="normal" id="editResult" schema="g.Schemas.ResultArray" collection="g.Results" doc=resultToEdit template="bootstrap3-inline" label-class="sr-only" afFieldInput-placeholder="schemaLabel" validation='blur'}}
				{{else}}
				<h3>No result to edit</h3>
				{{/with}}
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>

<!-- Result Ended -->
<!-- Payments templates begin -->
<template name="paymentList">
	<h5>Payment List <button class="btn btn-primary btn-sm"><span class="fa fa-plus"></span> New Payment</button></h5><hr/>
	{{#if Template.subscriptionsReady}}
	<div class="row">
		<div class="col-sm-12">
			<h6 class="text-info">
				{{#with getSession "paymentFilter"}}
					<strong>Showing payment for <em>{{selectedClass}}</em> class.</strong>
				{{else}}
					<strong>Showing payment for <em>JSS1</em> class.</strong>
				{{/with}}
			</h6>
			<form class="filter">
				<input type="text" name="studentId" placeholder="student Id">
				<select name='class'>
					{{#each classes}}
					<option>{{this}}</option>
					{{/each}}
				</select>
				<button type="submit" class="btn btn-primary btn-sm">Search Payment</button>
			</form><br/>
		{{#if payments}}
		<table class="table table-responsive table-hover table-bordered serial">
			<thead>
				<tr>
					<th>S/N</th>
					<th>Name</th>
					<th>Student ID</th>
					<th>Last Payment</th>
					<th>Action</th>
				</tr>
			</thead>
		{{#each payments}}
			<tbody>
				<tr>
					<td></td>
					<td>{{firstName}}, {{lastName}} {{otherName}}</td>
					<td>{{studentId}}</td>
				{{#if lastPayment}}
					{{#with lastPayment}}
						<td>
							{{class}} {{term}} {{session}}
						</td>
					{{/with}}
						<td>
							<a href="{{pathFor 'singlePayment'}}/{{studentId}}" class="btn btn-info btn-sm"><span class="fa fa-info"></span> View </a> 
							{{#unless termPaymentAvailable}}
							<a href="{{pathFor 'updatePayment'}}" class="addPayment btn btn-primary btn-sm"><span class="fa fa-plus"></span> Add </a>
							{{/unless}}
						</td>
					
				{{else}}
						<td>No payment</td>
						<td>
							{{#unless termPaymentAvailable}}
							<a href="{{pathFor 'updatePayment'}}" class="addPayment btn btn-primary btn-sm"><span class="fa fa-plus"></span> Add </a>
							{{/unless}}
						</td>
				{{/if}}
				</tr>
			</tbody>
		{{/each}}
		</table>
		{{else}}
			<h6>
				{{#with getSession "paymentFilter"}}
					<strong>No payment record found for <em>{{selectedClass}}</em> class.</strong>
				{{else}}
					<strong>No payment record found for <em>JSS1</em> class.</strong>
				{{/with}}
			</h6>
		{{/if}}
		</div>
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>


<template name="singlePayment">
		{{#if Template.subscriptionsReady}}
			<div class="row">
			{{#with studentInfo}}
				<div class="col-sm-12">
					<h5>{{firstName}}, {{lastName}} {{otherName}} Payments</h5>
					<hr style="border-bottom: 3px dashed #abcdef;"/>
					<form class='searchPayment'>
						<select name="class">
						{{#if availableClass}}
							{{#each availableClass}}	
								<option value="{{this}}">{{this}}</option>
							{{/each}}
						{{/if}}
						</select>
						<select name="term">
						{{#each termArray}}
							<option value="{{this}}">{{termSuffix this}}</option>
						{{/each}}
						</select>
						<button type="submit" class="btn btn-primary btn-sm">Show payment</button>
					</form>
					<table class="table table-responsive table-bordered">
						<tbody>
							<tr>
								<th>First Name</th>
								<td>{{firstName}}</td>
								<th>Other Name</th>
								<td>{{lastName}} {{otherName}}</td>
								<td rowspan="3">
									<img src="student10.png" alt="{{studentId}} passport">
								</td>
							</tr>
							<tr>
								<th>Student ID</th>
								<td>{{studentId}}</td>
								<th>Email</th>
								<td>{{email}}</td>
							</tr>
							<tr>
								<th>Current Class</th>
								<td>{{currentClass}}</td>
								<th>Current Term</th>
								<td>{{termSuffix setting.term}}</td>
							</tr>
						</tbody>
					</table>
					{{#with singlePay}}
						<table class="table table-responsive table-striped table-bordered">
							<thead>
								<tr>
									<th colspan="2" class="table-info">Payment details</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>Class</td>
									<td>{{class}}</td>
								</tr>
								<tr>
									<td>Term</td>
									<td>{{termSuffix term}}</td>
								</tr>
								<tr>
									<td>Session</td>
									<td>{{session}}</td>
								</tr>
								<tr>
									<td>Payment Category</td>
									<td>{{category}}</td>
								</tr>
								<tr>
									<td>Amount</td>
									<td>{{amount}}</td>
								</tr>
								<!-- online payment -->
								{{#if paymentMethod paymentType}}
								<tr>
									<td>Amount Approved</td>
									<td>{{approvedAmount}}</td>
								</tr>
								<tr>
									<td>Gateway Description</td>
									<td>{{paymentDescription}}</td>
								</tr>
								<tr>
									<td>Payment Reference</td>
									<td>{{payRef}}</td>
								</tr>
								{{/if}}
								<!-- end online payment fields -->
								<tr>
									<td>Payment Method</td>
									<td>{{paymentType}}</td>
								</tr>
								<tr>
									<td>Payment Status</td>
									<td>{{paymentStatus}}</td>
								</tr>
								<tr>
									<td>Payment Date</td>
									<td>{{dateFormat date}}</td>
								</tr>
								<tr>
									<td>Transaction ID</td>
									<td>{{transactionId}}</td>
								</tr>
								<tr>
									<td>Receiver's Name</td>
									<td>{{staffName}}</td>
								</tr>
								</tbody>
						</table>
						<br/>
						<button class="btn btn-danger" onclick="window.print()">Print</button>
					{{else}}
						{{#with getSession "requestedPayment"}}
							<h5 class="text-info text-center">Payment not yet made for {{class}} term {{term}}</h5>
						{{else}}
							<h5 class="text-info text-center">No payment found for term {{setting.term}}</h5>
						{{/with}}
					{{/with}}
				</div>
				{{/with}}
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>

<template name="updatePayment">
		{{#if Template.subscriptionsReady}}
		<div class=" col-sm-8">
			<h3>Payment details</h3><hr/>
			{{#if paymentFor}}
				<form id="createPaymentReceipt">
					<select name="paymentCat">
						{{#each paymentFor.category}}
							<option value="{{this}}">{{this}}</option>
						{{/each}}
					</select>
					<select name="paymentMethod">
						<option value="Cash">Cash</option>
						<option value="Online">Online</option>
					</select>
					<button type="submit" class="btn btn-primary btn-sm">Create receipt</button>
				</form>
				<p class="text-info"><strong>Select a payment category and payment method above and proceed to pay.</strong></p>
				{{#with paymentFor.stInfo}}
					<img src="/student10.png" style="float:right;max-width:100px;margin:10px;">
					<table style="margin:5px;font-size:1.1em;">
						<tr>
							<td>Name</td>
							<td>{{name}}</td>	
						</tr>
						<tr>
							<td>Student Id</td>
							<td>{{studentId}}</td>
						</tr>
						<tr>
							<td>Current class</td>
							<td>{{currentClass}}</td>
						</tr>
						<tr>
							<td>Current term</td>
							<td>{{termSuffix term}}</td>
						</tr>
						<tr>
							<td>Payment category</td>
							<td>{{paymentCategory}}</td>
						</tr>
						<tr>
							<td>Amount</td>
							<td>{{amount}}</td>
						</tr>
						<tr>
							<td>Payment method</td>
							<td>{{method}}</td>
						</tr>
					</table>
					<br style="clear:both;">
					<p class="text-info"><strong>
						Please note:<br/>
						<span>Cash payment means that you've collected this payment by hand.</span><br/>
						<span>Online payment would be processed by interswitch payment gateway.</span>
					</strong></p>
					{{#if failedPaymentReason}}
						<p class="text-danger"><strong>Payment failed due to {{failedPaymentReason}}. Try again!</strong></p>
					{{/if}}
					{{#if paymentMethod method}}
						<div id="onlinePayment">
							<a data-isw-payment-button data-isw-ref='kGM0Ul8XP'>
							  <script type='text/javascript' 
							    src='https://qa.interswitchng.com/paymentgateway/public/js/webpay.js' 
							    data-isw-customer-ref='{{transactionId}}' 
							    data-isw-customer-callback='cardPaymentCallback'
							    data-isw-trans-amount='{{amount}}00'> 
							  </script>
							</a>
							<script>
							  function cardPaymentCallback(response){
							  		if(!response){
								  		return;
								  	}
								  	let paymentInfo = Session.get('st.info'); 
									if(response.resp==="00" && response.desc=="Approved by Financial Institution" && response.payRef!==response.txnref){
										paymentInfo.response = response;
										g.meteorCall("updatePaymentByCard",{doc:paymentInfo,
											successMsg:"Payment was successful",
											redirect:FlowRouter.path("singlePayment",{id:paymentInfo.studentId})
										});
									}else{
										paymentInfo.failedPaymentReason = response.desc;
										Session.set("st.info",paymentInfo);
									}
							  }
							</script>
						</div>
					{{else}}
						<button class="btn btn-primary" id="proceedPayment" title="Click to confirm payment details above">Proceed</button>
					{{/if}}
				{{/with}}
			{{else}}
				<p>No student is selected for this payment. Select a student first.</p>
			{{/if}}
			
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
	
</template>
<!-- Payments templates end -->
<!-- ******************************************* -->
<!-- *************Break Break Break************* -->
<!-- ******************************************* -->
<template name="assignmentList">
	{{#if Template.subscriptionsReady}}
	<div class="row">
		<div class="col-sm-12">
			<h5>
				Assignment list <button class="btn btn-primary btn-sm" onclick="Modal.show('newAssignment')"><span class="fa fa-plus"></span> New Assignment</button>
			</h5>
			<hr/>
			{{#with getSession "assignmentFilter"}}
				<h6 class="text-info">Showing <em>{{subject}} and {{class}}</em> assignments.</h6>
			{{else}}
				<h6 class="text-info">Showing <em>JSS1</em> assignments.</h6>
			{{/with}}	
			<form class="form-inline">
				<div class="form-group">
					<select name="session" class="form-control mx-sm-3">
						{{#each sessionArray}}
						<option value="{{this}}">{{this}}</option>
						{{/each}}
					</select>
				</div>
				<div class="form-group">
					<select name="term" class="form-control mx-sm-3">
						{{#each termArray}}
						<option value="{{this}}">{{termSuffix this}}</option>
						{{/each}}
					</select>
				</div>
				<div class="form-group">
					<select name='class' class="form-control mx-sm-3">
						{{#each classes}}
						<option value="{{this}}">{{this}}</option>
						{{/each}}
					</select>
				</div>
				<div class="form-group">
					<select name="subject" class="form-control mx-sm-3">
						{{#each subjects}}
						<option value="{{this}}">{{this}}</option>
						{{/each}}
					</select>
				</div>
					<button type="submit" class="btn btn-primary btn-sm">Filter Assignment</button>
			</form> <hr/>
			
			{{#if assignments}}
				{{#each assignments}}
			<div class="row">
				<div class="col-sm-2">
					<h6 class="">{{class}}</h6>
					<span class="badge badge-secondary">{{subject}}</span>
				</div>
				<div class="col-sm-10">
					<h6>
						<a href="{{pathFor 'singleAssignment'}}/{{_id}}" class="text-info">{{title}}</a>
						<span class="btn badge badge-secondary">{{answerCount}} Answer(s)</span>
						{{#if validity}}
						<span class="badge badge-danger">Closed</span>
						{{/if}}
					</h6>
					<span class="badge badge-info">Start: {{dateFormat startDate}}</span>
					<span class="badge badge-info">Due date: {{dateFormat endDate}}</span>
					<span class="badge badge-info">Max score: {{totalScore}}</span>
				</div>
			</div><hr/>
				{{/each}}
			
			{{else}}
				{{#with getSession "assignmentFilter"}}
					<h5 class="text-info">No assignment found for <em>{{subject}} or {{class}}.</em></h5>
				{{else}}
					<h5 class="text-info">No assignment found</h5>
				{{/with}}
			{{/if}}
		</div>
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="singleAssignment">
		{{#if Template.subscriptionsReady}}
		<div class="row">
			{{#with assignment}}
			<div class="col-sm-5">
				<h5>{{title}}</h5><hr/>
				<article>
					<h5>Question</h5>
					<p class="text-justify">{{content}}</p>
					<span class="badge badge-info">Class: {{class}}</span>
					<span class="badge badge-info">Subject: {{subject}}</span>
					<span class="badge badge-info">Mark: {{totalScore}}</span>
					<span class="badge badge-info">Start date: {{dateFormat startDate}}</span>
					<span class="badge badge-info">End date: {{dateFormat endDate}}</span><br/>
					<p>
						Posted by: 
						{{#if isInRole 'admin, editor'}}
							<strong>
							<a href="{{pathFor 'singleStaff'}}/{{staffId}}" class="text-primary">{{author}}</a>
							</strong>
						{{else}}
							<strong>{{author}}</strong>
						{{/if}}
					</p>
					{{#if canEdit}}
					<p class="float-right">
						<span title="click to modify this assignment">
							<a href="{{pathFor 'editAssignment'}}/{{_id}}" class="btn btn-warning btn-sm">Edit</a>
						</span>
					</p><br/>
					{{else}}
					<p style="float: right;">
						<span class="btn btn-warning btn-sm" title="You cannot edit this assignment">
							<span class="fa fa-ban"></span>	
							Edit
						</span>
					</p>
					{{/if}}
					<p>
						{{#if answerCount}} 
							<strong>{{answerCount}} answer(s) submitted. </strong>
						{{else}} 
							<strong>No answer submitted yet.</strong>
						{{/if}}
					</p>
					
				</article>
			</div>
			<div class="col-sm-7">
				{{#if answerList}}
				<h5>Answers</h5><hr/>
				{{#each answerList}}
					<article>
						<h6 class="badge badge-secondary">{{fullName}}</h6>
						<p>{{text}}</p>
							{{#if score}}
								<span><strong>Score: </strong>{{score}} / {{assignment.totalScore}}</span> <i class="fa fa-check fa-2x" style="color: green;"></i>&nbsp;&nbsp;<span><strong>Comment: </strong></span><content class="text-danger">{{comment}}</content>
							{{else}}
								{{#if assignment.canEdit}}
								<form class="form-group">
									<label>Award score: </label>
									<input type="number" max="{{assignment.totalScore}}" min="0" name="score" placeholder="score this answer" required> 
									<input type="text" name="comment" placeholder="comment">
									<button type="submit" class="btn btn-primary btn-sm">Submit</button>
									<div style="display: none;">
										<div style="display: none;">
											<p style="display: none;">
												<input type="hidden" name="id" value="{{assignment._id}}" style="display: none;">
											</p>
										</div>
									</div>
								</form>

								{{else}}
									<span class="text-danger">Not yet marked by the teacher</span>
								{{/if}}
							{{/if}}
							<br/>
							<span class="badge badge-info">Submitted on: {{dateFormat date}}</span>
					</article><hr/>
				{{/each}}
				{{/if}}
			</div>
			{{/with}}
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
	
</template>
<template name="newAssignment">
		<!-- Moddal start -->
	<div class="modal fade">
		<div class="modal-dialog" role='document'>
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss='modal' arial-label='Close'>
						<span arial-hidden='true'>&times;</span>
					</button>
					<h3 class="modal-title" id='myModalLabel'>
						New assignment
					</h3>
				</div>
				<div class="modal-body">
					{{#autoForm schema="g.Schemas.Assignment" id="newAssignment" type="normal" afFieldInput-placeholder="schemaLabel" validation='blur'}}
						{{> afQuickField name="title"}}
						{{> afQuickField name="content"}}
						{{> afQuickField name="class" options="allowed" firstOption="Class"}}
						{{> afQuickField name="subject" options="allowed" firstOption="Subject"}}
						{{> afQuickField name="totalScore"}}
						{{> afQuickField name="startDate"}}
						{{> afQuickField name="endDate" buttonClasses="glyphicon glyphicon-calendar"}}
						<div class="form-group">
							<button type="submit" class="btn btn-primary">Create</button>
						</div>
					{{/autoForm}}
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-danger" data-dismiss='modal'>Close</button>
				</div>
			</div>
		</div>
	</div>
</template>
<template name="editAssignment">
	{{#if Template.subscriptionsReady}}
	<div class=" col-sm-10">
		<h3>Edit assignment</h3><hr/> <br/>
		{{#autoForm schema="g.Schemas.Assignment" id="editAssignment" type="normal" afFieldInput-placeholder="schemaLabel" doc=assignmentToEdit validation='blur'}}
			{{> afQuickField name="title"}}
			{{> afQuickField name="content"}}
			{{> afQuickField name="subject" options="allowed" firstOption="Subject"}}
			{{> afQuickField name="class"}}
			{{> afQuickField name="totalScore"}}
			{{> afQuickField name="startDate"}}
			{{> afQuickField name="endDate" buttonClasses="glyphicon glyphicon-calendar"}}
			<div class="form-group">
				<button type="submit" class="btn btn-primary">Update</button>
			</div>
		{{/autoForm}}
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>
<!-- ******************************************* -->
<!-- *************Break Break Break************* -->
<!-- ******************************************* -->
<template name='messages'>
	{{#if Template.subscriptionsReady}}
	<div class="row">
		<div class="col-sm-12">
			<h3>Messages</h3><hr/>
		<!-- Nav tabs -->
			  <ul class="nav nav-tabs" role="tablist">
			    <li class="nav-item">
			    	<a href="#inbox" aria-controls="inbox" role="tab" data-toggle="tab" class="nav-link active" aria-expanded="true">Inbox Messages</a>
			    </li>
			    <li class="nav-item">
			    	<a href="#sent" aria-controls="sent" role="tab" data-toggle="tab" class="nav-link">Sent Messages</a>
			    </li>
			    <li class="nav-item">
			    	<a href="#newMessage" aria-controls="newMessage" role="tab" data-toggle="tab" class="nav-link">Compose New</a>
			    </li>
			    <li class="nav-item">
			    	<a href="#draft" aria-controls="draft" role="tab" data-toggle="tab" class="nav-link disabled">Draft Message</a>
			    </li>
			  </ul>
			 <div class="tab-content">
			    <div role="tabpanel" class="tab-pane fade show active" id="inbox">
			    	{{> inboxMessage}}
			    </div>
			    <div role="tabpanel" class="tab-pane fade" id="sent">
			    	{{> sentMessage}}
			    </div>
			    <div role="tabpanel" class="tab-pane fade" id="draft">
			    	{{> draftMessage}}
			    </div>
			    <div role="tabpanel" class="tab-pane fade" id="newMessage">
			    	{{> newMessage}}
			    </div>
			 </div>
		</div>
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="inboxMessage">
	{{#if Template.subscriptionsReady}}
	<div class="row">	
		<div class="col-sm-12">
			<br/>
			{{#with inboxCount}}
			<h5>
				<button class="btn btn-sm inboxBtn" title="Inbox messages">Inbox: <span class="badge badge-info">{{count}}</span>
				</button>
				<button class="btn btn-sm unreadBtn" title="Unread messages">Unread: <span class="badge badge-info">{{unread}}</span></button>
				<button class="btn btn-sm readBtn" title="Read messages"><i class="fa fa-check text-success"> </i>Read: <span class="badge badge-info">{{read}}</span></button>
			</h5>
			{{/with}}
		</div>
		<div class="col-sm-12">
			{{#if inboxMsg}}
				<table class="table table-responsive table-hover table-sm">
					<thead>
						<tr>
							<th></th>
							<th>Sender</th>
							<th>Subject</th>
							<th>Date received</th>
							<th>Action</th>
						</tr>	
					</thead>
					<tbody>
					{{#each inboxMsg}}
						<tr>
							<td>
								<span class="{{read}}"></span>
							</td>
							<td>{{senderName}}</td>
							<td>{{subject}} <span class="badge badge-success" title="Number of replies">{{count}}</span></td>
							<td>{{dateFormat createdAt}}</td>
							<td>
								<a href="{{pathFor 'message'}}/{{_id}}" style="text-decoration: none;">
									<button class="btn btn-info btn-sm">Open</button>	
								</a>
								<button class="btn btn-danger btn-sm"><span class="fa fa-trash"></span> Delete</button>
							</td>
						</tr>
					{{/each}}
					</tbody>
				</table>
			{{else}}
				<h5 class="text-info">No message</h5>
			{{/if}}
		</div>
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="sentMessage">
	{{#if Template.subscriptionsReady}}
	<div class="row">
		<div class="col-sm">
			<br/>
			<h5>
				<button class="btn btn-sm" title="Sent messages">Sent: <span class="badge badge-info">{{sentCount}}</span></button>
			</h5>
			{{#if sentMsg}}
				<table class="table table-responsive table-hover table-sm">
					<thead>
						<tr>
							<th></th>
							<th>Recipients</th>
							<th>Subject</th>
							<th>Date sent</th>
							<th>Action</th>
						</tr>
					</thead>
					<tbody>
					{{#each sentMsg}}
						<tr>
							<td>
								<input type="checkbox" name="id" value="{{_id}}">
							</td>
							<td>
								{{staffName}} {{studentName}}
							</td>
							<td>
								{{subject}} <span class="badge badge-success" title="Number of replies">{{count}}</span>
							</td>
							<td>
								{{dateFormat createdAt}}
							</td>
							<td>
								<a href="{{pathFor 'message'}}/{{_id}}">
									<button class="btn btn-info btn-sm">Open</button>	
								</a>
								<button class="btn btn-danger btn-sm"><span class="fa fa-trash"></span> Delete</button>
							</td>
						</tr>
					{{/each}}
					</tbody>
				</table>
			{{else}}
				<h5 class="text-info">No sent messages</h5>
			{{/if}}
		</div>
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>
<template name="singleMessage">
		{{#if Template.subscriptionsReady}}
		<div class="row">
			<div class="col-sm-12">
			{{#with message}}
				<h4>{{subject}}</h4><hr/>
				<span><b>Sender: </b>{{senderName}}</span><br/>
				<span><b>Receiver: </b>{{staffName}}</span><br/>
				<span><b>Date: </b>{{dateFormat createdAt}}</span><br/>
				<span><b>Replies: </b>{{count}}</span><br/><hr/>
				<article style="padding:1em;line-height:2;">
					{{content}}
				</article>
			{{/with}}
			<form>
				<div class="form-group">
					<textarea class="form-control" placeholder="Reply to this message" minlength="5" rows="5" name="reply" required></textarea>
				</div>
				<button class="btn btn-primary btn-sm" type="submit">Submit reply</button>
			</form><br/>
			{{#if msgReply}}
				<h5>Replies <span class="badge badge-info" title="{{count}} replies">{{count}}</span></h5><hr/>
				{{#each msgReply}}
				<div class="reply">
					<p><span style="background-color: orangered; padding:2px;color:#fff;cursor:pointer;" title="commenter name"><strong>{{name}} </strong></span>
					<span title="Posted date"><strong> {{dateFormat replyDate}}</strong></span>

					</p>
					<p style="padding-left:2em;">{{reply}}</p>

				</div>
				<hr/>		
				{{/each}}
			
			{{else}}
				<h3>No Replies</h3>
			{{/if}}
			</div>
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>

<template name="newMessage">
		{{#if Template.subscriptionsReady}}
		<div class="col-sm-10">
			<div class="alert alert-info alert-dismissible" role='alert'>
			<button type="button" class="close" data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button>
				Please Note: 
					<ul>
						<li>
						Select staff(s) to send a message, 
						<strong>hold ctrl key to select multiple staff.</strong>
						</li>
						<li>
							Select class(es) of students to send a message, 
							<strong>select multiple boxes to send message to different classes.</strong>
						</li>
						<li>
							If message is to be sent a single student, <a href="{{pathFor 'studentList'}}" class="alert-link">open student</a> details and click on <strong>send message</strong>.
						</li>
					</ul>
			</div>
			<label>Staff (<small>if sms is for staff</small>)</label><br/>
			<input type="checkbox" class="all_staff">All Staffs
			<form>
				<div class="form-group">
					<select name="staff" class="form-control msgStaff" multiple="true">
						{{#each staff}}
							<option value="{{meteorIdInStaff}}" name='{{lastName}} {{firstName}} {{otherName}}'>{{lastName}}, {{firstName}} {{otherName}}</option>
						{{/each}}
					</select>
				</div>
				<div id="msgClass">
					<label>Class of students (<small>if message is for one or more classes</small>)</label> <br/>
					{{#each classes}}
					<label class="checkbox-inline">
						<input type="checkbox" name="class" value="{{this}}">{{this}}
					</label>
					{{/each}}
				</div><br/>
				<div class="form-group">
					<label for="title">Subject</label><br/>
					<input type="text" name="title" class="form-control" required placeholder="Subject of the message" maxlength="75" minlength="5">
				</div>
				<div class="form-group">
					<label for="content">Message body</label><br/>
					<textarea class="form-control" rows="6" required placeholder="Content of the message" name="body" minlength="10"></textarea>
				</div>

				<button type="submit" class="btn btn-primary">Send message</button>
				<button type="button" class="btn btn-danger">Save to draft</button>
			</form><br/>
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>

<template name="draftMessage">
		{{#if Template.subscriptionsReady}}

			<h3>Draft Message</h3>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>
<!-- ******************************************* -->
<!-- *************Break Break Break************* -->
<!-- ******************************************* -->

<template name="sms">
	{{#if Template.subscriptionsReady}}
		<div class=" col-sm-8">
			<h3>Short Message Services</h3><hr/>
			<div class="info">
				<h4>SMS Balance: 15,711</h4><br/>
				<h4><u>Recently sent SMS</u></h4>
			</div>
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>


<template name="newSms">
	{{#if Template.subscriptionsReady}}
		<div class=" col-sm-8">
			<h3>Compose SMS</h3><hr/>
			<label>Staff (<small>if SMS is for staff</small>)</label><br/>
			<input type="checkbox" class="all_staff">All Staffs
			<form>
				<div class="form-group">
					<label class="text-info">Showing only staffs with phone number.</label>
					<select name="staff" class="form-control smsStaff" multiple="true">
						{{#each staff}}
							<option value="{{phone}}">{{lastName}} {{firstName}} ({{phone}})</option>
						{{/each}}
					</select>
				</div>
				<div class="smsClass">
					<label>Class of students (<small>if SMS is for one or more classes</small>)</label> <br/>
					{{#each classes}}
					<span class="checkbox-inline">
						<input type="checkbox" name="class" value="{{this}}">{{this}}(73)
					</span>
					{{/each}}
				</div><br/>
				<div class="form-group">
					<label>Message</label><br/>
					<textarea class="form-control" rows="6" required placeholder="Message" name="message" minlength="10"></textarea>
				</div>
				<p class="smsCost">
					<b>
					Character: <span class="characterCount">0/160</span> =>
					Cost: <span class="smsCount">0</span> SMS
					</b>	
				</p>
				<button type="submit" class="btn btn-primary">Send SMS</button>
			</form><br/>
			
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="performance">
	{{#if Template.subscriptionsReady}}
		<div class=" col-sm-8">
			<h3>Performance Analysis</h3><hr/>
			
			
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="studentPerformance">
	{{#if Template.subscriptionsReady}}
		<div class=" col-sm-8">
			<h3>Student Performance Analysis</h3><hr/>
			
			
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>
<template name="graduatedStudents">
	<h5>Graduated Students List</h5><hr/>
	{{#if Template.subscriptionsReady}}
	<div class="row">
		<div class="col-sm-12">	
			<h4 class="text-info">
				Graduated Students count: {{graduates.count}}
			</h4>
			<form class="filter">
				<input type="text" name="studentId" placeholder="student Id">
				<select name="year">
					{{#each yearArray}}
					<option value="{{this}}">{{this}}</option>
					{{/each}}
				</select>
				<button type="submit" class="btn btn-primary btn-sm">Filter graduates</button>
			</form><br/>
			{{#if graduates}}
				<table class="table table-responsive table-bordered table-hover serial">
					<thead>
						<tr>
							<th>S/N</th>
							<th>Name</th>
							<th>ID</th>
							<th>Gender</th>
							<th>View</th>
						</tr>	
					</thead>
					<tbody>
					{{#each graduates}}
						<tr>
							<td></td>
							<td>{{lastName}}, {{firstName}} {{otherName}}</td>
							<td>{{studentId}}</td>
							<td>{{gender}}</td>
							<td style="text-align: center;"><a href="{{pathFor 'singleGraduatedStudent'}}/{{studentId}}" class="btn btn-info btn-sm"><span class="fa fa-info-circle"></span> More Details</a> <br/>
							</td>
						</tr>
					{{/each}}
					</tbody>
				</table>
			{{else}}
				<h4 class="text-info">Graduated list is empty!</h4>
			{{/if}}
		</div>
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="singleGraduatedStudent">
	{{#if Template.subscriptionsReady}}
		<!-- Admission Information -->
		{{#with graduate}}
		<h5>{{lastName}}, {{firstName}} {{otherName}} ({{currentClass}} {{graduatedYear}})</h5><hr/>	
		<div class="row">
			<div class="col-sm-8">	
				<table class="table table-responsive table-striped">
				<thead>
					<tr>
						<th colspan="2" class="table-info">Profile</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<th>Last Name</th><td>{{lastName}}</td>
					</tr>
					<tr>
						<th>First Name</th><td>{{firstName}}</td>
					</tr>
					<tr>
						<th>Other Name</th><td>{{otherName}}</td>
					</tr>
					<tr>	
						<th>Gender</th> <td>{{gender}}</td>
					</tr>
					<tr>
						<th>Class</th>	<td>{{currentClass}}</td>
					</tr>
					<tr>
						<th>Student ID</th> <td>{{studentId}}</td>
					</tr>
					<tr>
						<th>Email</th> <td>{{email}}</td>
					</tr>
					<tr>
						<th>Date of Birth</th> <td>{{dayMonthYear dob}}</td>
					</tr>
					<tr>
						<th>State</th> <td>{{state}} State</td>
					</tr>
					<tr>
						<th>Town</th> <td>{{town}}</td>
					</tr>
					
					<tr>
						<th>Club and Society</th> <td>{{club}}</td>
					</tr>
					<tr>
						<th>Contact Number</th> <td>{{phone}}</td>
					</tr>
					<tr>
						<th>Present Address</th> <td>{{presentAddress}}</td>
					</tr>
					<tr>
						<th>Home Address</th> <td>{{homeAddress}}</td>
					</tr>
					<tr>
						<th>Hobbies</th> <td>{{hobby}}</td>
					</tr>
					<tr>
						<th colspan="2" class="table-info">Parent/Guardian</th>
					</tr>
					<tr>
						<th>Name</th>
						<td>{{parentOrGuardian.name}}</td>
					</tr>
					<tr>
						<th>Address</th>
						<td>{{parentOrGuardian.address}}</td>
					</tr>
					<tr>
						<th>Contact Number</th>
						<td>{{parentOrGuardian.phone}}</td>
					</tr>
					<tr>
						<th colspan="2" class="table-info">Next of kin</th>
					</tr>
					<tr>
						<th>Next of kin name</th> <td>{{nok.name}}</td>
					</tr>
					<tr>
						<th>Next of kin address</th> <td>{{nok.address}}</td>
					
					</tr>
					
					<tr>
						<th>Next of kin contact</th> <td>{{nok.phone}}</td>
					</tr>
					<tr>
						<th>Next of kin relationship</th> <td>{{nok.relationship}}</td>
					</tr>
				</tbody>
				</table>
			</div>
			<div class="col-sm-4">
				<p><img src="{{studentId}}.png" alt="Student Passport Photograph"></p>
				<p><a href="{{pathFor 'singleResult'}}/{{studentId}}" class="btn btn-primary btn-sm"><span class="fa fa-check-circle"></span> View Results</a></p>
				<p><a href="{{pathFor 'singlePayment'}}/{{studentId}}" class="btn btn-primary btn-sm"><span class="fa fa-money"></span> View Payments</a></p>
				<p><a href="{{pathFor 'performance'}}/{{studentId}}" class="btn btn-primary btn-sm"><span class="fa fa-bar-chart-o"></span> View Performance</a></p>
				<p><button class="btn btn-danger" title="Demote student to SSS3" id="demoteGraduate">Demote student</button></p>
			</div>	
		</div>
		{{/with}}
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="logs">
	{{#if Template.subscriptionsReady}}
		<div class="col-sm-12">
			<h5>Activity log</h5><hr/>
			<table class="table table-responsive table-bordered table-striped table-sm serial">
				<thead>
					<tr>
						<th>S/N</th>
						<th>Action</th>
						<th>Time</th>
					</tr>	
				</thead>
				<tbody>
				{{#each log}}
					<tr>
						<td></td>
						<td>{{name}} {{action}}</td>
						<td>{{dateFormat time}}</td>
					</tr>
				{{/each}}
				</tbody>
			</table>
			
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="subjectMgmt">
	{{#if Template.subscriptionsReady}}
	<h4>Subject Management</h4><hr/>
	<div class="row">
		<div class="col-sm-6 subject">
			<h5>Subjects</h5><hr/>
			<article class="subjectList">
				<h5>List <span class="fa fa-caret-right pull-right"></span></h5>
				<ol>
				{{#each subjects.subjects}}
					<li name="{{this}}">{{this}} <span class="fa fa-plus pull-right" title="Add this subject to the currently selected category."></span></li> 
					
				{{else}}
					<p>No subject found.</p>
				{{/each}}
				</ol>
				<form class="addNewSubject">
					<input type="text" name="subjectName" placeholder="Add new subject" required>
					<button type="submit" class="btn btn-primary btn-sm"><span class="fa fa-plus"></span> Add</button>
				</form>
			</article><hr/>
			<article class="subjectCategory">
				<h4>Category <span class="fa fa-caret-right pull-right"></span></h4>
				<ol>
				{{#each getObjectKey subjects.category}}
					<li name="{{this}}">{{this}}()</li>
				{{else}}
					<p>No subject category found.</p>
				{{/each}}
				</ol>
				<form class="addNewSubjectCategory">
					<input type="text" name="subjectCategory" placeholder="Add new subject category" required>
					<button type="submit" class="btn btn-primary btn-sm"><span class="fa fa-plus"></span> Create</button>
				</form>
			</article>
		</div>
		<div class="col-sm-6 modifySubjectCategory">
			<form>
				<h4>Modify a subject category</h4>
				<select name="subjectCategory">
					{{#if getSession "subjectCategory"}}
						<option>*{{getSession "subjectCategory"}}</option>
					{{else}}	
						<option selected disabled>Select a category</option>
					{{/if}}
					{{#each getObjectKey subjects.category}}
						<option value="{{this}}">{{this}}</option>
					{{else}}
						<option selected disabled>No category</option>
					{{/each}}
				</select>
				<button type="submit" class="btn btn-primary btn-sm">Show</button>
			</form><hr/>
			<ol>
				{{#each category}}
					<li name="{{this}}">{{this}} <span class="fa fa-trash pull-right" title="delete this subject from this category."></span></li>
				{{else}}
					{{#if getSession "subjectCategory"}}
						<p>{{getSession "subjectCategory"}} subject category is empty.<br/> Click "<span class="fa fa-plus"></span>" on subject list to add subject to this cateogry.</p>
					{{else}}
						<p>No subject category is selected.</p>
					{{/if}}
				{{/each}}	
			</ol>
		</div>
	</div>
	<div class="col-sm-12" id="subjectMgmt">
		
		<section class="col-sm-6 ">
			
			
			
		</section>
		<section class="col-sm-6 ">
			
		</section>
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>