<template name="staffDashboard">
		{{#if Template.subscriptionsReady}}
		<div id="staffDashboard">
		<!-- left division -->
			<section class="col-md-5 left">
				<div class="notification" style="overflow-y:scroll;">
					<h4>Notification <span class="fa fa-info pull-right"></span></h4>
					<article>
						<p>{{{setting.notification}}}</p>
						{{#if isInRole 'admin,editor'}}
						<button class="btn btn-danger pull-right pushNew" title="New notification">Push New</button>
						{{else}}
						<button class="btn btn-danger pull-right" title="You don not have enough rights to push notification." disabled>Push New</button>
						{{/if}}
					</article>
					<!-- notification form -->
					<form class="form-group" style="display:none;">
						<textarea class="form-control" rows="4" placeholder="Notifications to push to staff and student" name="notification" required></textarea><br/>
						<button type="reset" class="btn btn-danger btn-xs cancelPush">Cancel</button>
						<button type="submit" class="btn btn-primary btn-xs pull-right">Push Notification</button>
					</form>
				</div>
				<div class="result">
					<h4>Results</h4>
					<p><strong>
						<span>Termly Results added: {{allPayment}}</span><br/>
						<span>JSS1: {{resultCount "JSS1"}}</span><br/>
						<span>JSS2: {{resultCount "JSS2"}}</span><br/>
						<span>JSS3: {{resultCount "JSS3"}}</span><br/>
						<span>SSS1: {{resultCount "SSS1"}}</span><br/>
						<span>SSS2: {{resultCount "SSS2"}}</span><br/>
						<span>SSS3: {{resultCount "SSS3"}}</span><br/>
						</strong>
					</p>
				</div>
				<div class="">
					<h4>General Performance</h4>
				</div>
			</section>
			<!-- right division -->
			<section class="col-md-5 right">
				<div class="summary">
					<h4>Summary</h4>
					<span><b>Session: {{setting.session}}, Term: {{termSuffix setting.term}}</b></span><br/>
						<strong><span>All Students: {{allStudent}}</span></strong>
						{{#with termSchoolFees}}
						<table>
							<tr>
								<th>Class</th>
								<th>Count</th>
								<th>Fees</th>
							</tr>
							<tr>
								<td>JSS1</td>
								<td>{{studentCount "JSS1"}}</td>
								<td>{{schoolFees.JSS1}}</td>
							</tr>
							<tr>
								<td>JSS2</td>
								<td>{{studentCount "JSS2"}}</td>
								<td>{{schoolFees.JSS2}}</td>
							</tr>
							<tr>
								<td>JSS3</td>
								<td>{{studentCount "JSS3"}}</td>
								<td>{{schoolFees.JSS3}}</td>
							</tr>
							<tr>
								<td>SSS1</td>
								<td>{{studentCount "SSS1"}}</td>
								<td>{{schoolFees.SSS1}}</td>
							</tr>
							<tr>
								<td>SSS2</td>
								<td>{{studentCount "SSS2"}}</td>
								<td>{{schoolFees.SSS2}}</td>
							</tr>
							<tr>
								<td>SSS3</td>
								<td>{{studentCount "SSS3"}}</td>
								<td>{{schoolFees.SSS3}}</td>
							</tr>
						</table>
						{{/with}}
				</div>
				<div class="payment">
					<h4>Payments</h4>
					<p><strong>
						<span>Termly Payments received: {{allPayment}}</span><br/>
						<span>JSS1: {{paymentCount "JSS1"}}</span><br/>
						<span>JSS2: {{paymentCount "JSS2"}}</span><br/>
						<span>JSS3: {{paymentCount "JSS3"}}</span><br/>
						<span>SSS1: {{paymentCount "SSS1"}}</span><br/>
						<span>SSS2: {{paymentCount "SSS2"}}</span><br/>
						<span>SSS3: {{paymentCount "SSS3"}}</span><br/>
						</strong>
					</p>
				</div>
				<div class="log">
					<h4>Recent Activities</h4>
					{{#each log}}
							<strong>*</strong> <span>{{name}} {{action}} @{{dateFormat time}}</span><br/>
					{{/each}}
					<a href="{{pathFor 'logs'}}">See more...</a>
				</div>
			</section>
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>
<template name="generalSearch">
	{{#if Template.subscriptionsReady}}
		<div class="col-md-10 col-md-offset-1" id="generalSearch">
			<h3>Search</h3><hr/>
		<!-- Nav tabs -->
			  <ul class="nav nav-tabs" role="tablist">
			    <li role="presentation" class="active">
			    	<a href="#findStudent" aria-controls="findStudent" role="tab" data-toggle="tab">Student</a>
			    </li>
			    <li role="presentation">
			    	<a href="#findPayment" aria-controls="findPayment" role="tab" data-toggle="tab">Payment</a>
			    </li>
			  </ul>
			 <div class="tab-content" style="margin:15px;">
			    <div role="tabpanel" class="tab-pane fade in active" id="findStudent">
			    	<form>
			    	<div class="form-group">
			    		<label>Student Id or Name</label><br/>
			    		<input type="text" name="student" class="form-control search" placeholder="student Id or Name" required>
			    	</div>
			    	<button class="btn btn-primary btn-xs">Search</button>
			    	</form>
			    	{{#each findStudent}}
			    		<div class="searchResult">
							<p>
								<span><a href="{{pathFor 'singleStudent'}}/{{studentId}}">{{lastName}} {{firstName}} {{otherName}}</a></span>
								<span>{{studentId}}</span>
								<span>{{currentClass}}</span>
							</p>	
			    		</div>
			    	{{/each}}
			    </div>
			    <div role="tabpanel" class="tab-pane fade" id="findPayment">
			    	<form>
			    	<div class="form-group">
			    		<label>Transaction Id</label><br/>
			    		<input type="text" name="payment" class="form-control search" placeholder="transaction Id" required>
			    	</div>
			    	<button class="btn btn-primary btn-xs">Search</button>
			    	</form>
			    	{{#with findPayment}}
			    		<div class="searchResult">
							<p>
								<span>{{lastName}} {{firstName}} {{otherName}}</span>
								<span>{{studentId}}</span>
								<span>{{currentClass}}</span>
								<span><a href="{{pathFor 'singlePayment'}}/{{studentId}}" class="btn btn-info btn-xs">Payments</a></span>
							</p>
							{{#each payment}}
							<article>
								<small>
									
										{{class}} | {{termSuffix term}} term | {{transactionId}},
									
								</small>
							</article>	
							{{/each}}
			    		</div>
			    	{{/with}}
			    </div>
			 </div>
		 </div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>
<template name="profile">
	{{#if Template.subscriptionsReady}}
		<div class="col-md-11">
			{{#with currentStaff}}
				<h3>{{lastName}} {{firstName}} {{otherName}} Profile</h3> <hr/>
						<div class="col-md-8" id="profile">
							<table class="table">
							<caption><h4>Employment Data</h4></caption>
							<tr>
								<td>Last Name</td><td>{{lastName}}</td>
							</tr>
							<tr>
								<td>First Name</td><td>{{firstName}}</td>
							</tr>
							<tr>
								<td>Other Name</td><td>{{otherName}}</td>
							</tr>
							<tr>	
								<td>Gender</td> <td>{{gender}}</td>
							</tr>
							<tr>
								<td>Date of Birth</td> <td>{{dayMonthYear dob}}</td>
							</tr>
							<tr>
								<td>Staff ID</td> <td>{{staffId}}</td>
							</tr>
							<tr>
								<td>Email</td> <td>{{email}}</td>
							</tr>
							<tr>
								<td>Subject Taught</td> <td>{{subjectTaught}}</td>
							</tr>
							<tfoot><span><a href="{{pathFor 'editStaff'}}/{{staffId}}" class="btn btn-primary btn-xs"><span class="fa fa-edit"></span> edit</a></span></tfoot>
						</table>
						<!-- Other Information -->
						<table class="table">
							<caption><h4>Other Information</h4></caption> 
							<tr>
								<td>Origin</td> <td>{{town}}, {{state}} State</td>
							</tr>
							<tr>
								<td>Present Address</td> <td>{{presentAddress}}</td>
							</tr>
							<tr>
								<td>Home Address</td> <td>{{homeAddress}}</td>
							</tr>
							<tr>
								<td>Contact Number</td> <td>{{phone}}</td>
							</tr>
							<tr>
								<td>Hobbies</td> <td>{{hobby}}</td>
							</tr>
							<tr>
								<td>Club and Society</td> <td>{{club}}</td>
							</tr>
							<tr>
								<td colspan="2" class="text-center"><h4>Medical Record</h4></td>
							</tr>
							<tr>
								<td>Blood Group</td><td>{{medicalHistory.bloodGroup}}</td>
							</tr>
							<tr>
								<td>Genotype</td><td>{{medicalHistory.genotype}}</td>
							</tr>
							<tr>
								<td>Condition</td><td>{{medicalHistory.medicalCondition}}</td>
							</tr>
							<tr>
								<td colspan="2" class="text-center"><h4>Next of Kin</h4></td>
							</tr>
							<tr>
								<td>Name</td> <td>{{nok.name}}</td>
							</tr>
							<tr>
								<td>Address</td> <td>{{nok.address}}</td>
							</tr>
							<tr>
								<td>Contact</td> <td>{{nok.phone}}</td>
							</tr>
							<tr>
								<td>Relationship</td> <td>{{nok.relationship}}</td>
							</tr>
							
							<tfoot><span><a href="{{pathFor 'updateStaff'}}/{{staffId}}" class="btn btn-primary btn-xs"><span class="fa fa-edit"></span> edit profile</a></span></tfoot>
						</table>

						</div>
						<div class="col-md-3 col-md-offset-1" style="border-left: 1px solid black; margin: 0 auto; text-align: justify;">
							<div class="passport" style="text-align: center;">
								<img src="/staff5.png" alt="{{lastName}} {{firstName}} passport">
								<p><strong>{{studentId}}</strong></p>
							</div>
							<div>
								<p><a href="#">Assignments</a></p><hr/>
								<p><a href="#">Subjects</a></p><hr/>
								<p><a href="#">Messages</a></p><hr/>
								<p><a href="#">Send feedback</a></p><hr/>
							</div>
						</div>
			{{/with}}
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="editProfile">
	{{#if Template.subscriptionsReady}}
	<div class="col-md-10 col-md-offset-2">
		{{#with currentStaff}}
		<table style="margin: 5px auto;">
			<tr><td><strong>Name</strong></td><td>{{lastName}}, {{firstName}} {{otherName}}</td><td rowspan="3"><img src="/staff5.png" alt="{{firstName}} passport"></td></tr>
			<tr><td><strong>Email</strong></td><td>{{email}}</td></tr>
			<tr><td><strong>Staff Id</strong></td><td>{{staffId}}</td></tr>
		</table>
		{{/with}}
		{{#autoForm schema="g.Schemas.UpdateStaff" id="editProfile" type="normal" doc=currentStaff validation='blur'}} 
			<fieldset>
				<legend>Profile Information</legend>
				<fieldset class="col-md-5">
					{{>afQuickField name="state" options="allowed"}}
					{{>afQuickField name="town"}}
					{{>afQuickField name="homeAddress"}}
					{{>afQuickField name="presentAddress"}}
					{{>afQuickField name="nok"}}
				</fieldset>
				<fieldset class="col-md-5">
					{{>afQuickField name="dob"}}
					{{>afQuickField name="phone"}}
					{{>afQuickField name="hobby"}}
					{{>afQuickField name="club" options="allowed"}}
					{{>afQuickField name="medicalHistory.bloodGroup" options="allowed"}}
					{{>afQuickField name="medicalHistory.genotype" options="allowed"}}
					{{>afQuickField name="medicalHistory.medicalCondition" options="allowed" type="select-checkbox-inline"}}
				</fieldset>
			</fieldset><br style="clear:both;"/>		
			<div class="form-group">
				<button type="submit" class="btn btn-primary">Update Profile</button>
			</div>
		{{/autoForm}}
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>
							
<template name="ctrlpanel">
		{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-md-10" id="ctrlpanel">
			<h3>Application Settings</h3><hr/>
				<div class="col-sm-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">
							Session and Term
							</h3>	
						</div>
						<article class="panel-body">
							<h4><strong>Current session: {{setting.session}}</strong></h4>
							<button type="button" class="btn btn-primary" id="newSessionBtn" title="Start a new session">New session</button>
						</article>
						<article class="panel-body">
							<h4><strong>Current term: {{termSuffix setting.term}}</strong></h4>
							<button type="button" class="btn btn-primary" id="newTermBtn" title="Start a new term">New term</button>
						</article>
					</div>
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">
								Promote Students
							</h3>
						</div>
						<article class="panel-body">
							<b>Please Note:</b>
							<p>
								When you promote students, JSS1 students would be promoted to JSS2, JSS2 to JSS3 and so on.<br/>SSS3 would be moved to the graduated list.
							</p>
							<button class="btn btn-danger" id="promoteStudents" title="Click to promote all students in the school to the next level.">Promote Students</button>
						</article>
					</div>
					
				</div>

				<div class="col-sm-6">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">
								Current Term School Fees
							</h3>
						</div>
						<div class="panel-body">
							{{#if termSchoolFees}}
							{{#with termSchoolFees}}
							<article class="schoolFees">
								<h4>Term: {{termSuffix setting.term}}</h4>
								<ul style="list-style-type:square;">
									<li>JSS1: {{schoolFees.JSS1}}</li>
									<li>JSS2: {{schoolFees.JSS2}}</li>
									<li>JSS3: {{schoolFees.JSS3}}</li>
									<li>SSS1: {{schoolFees.SSS1}}</li>
									<li>SSS2: {{schoolFees.SSS2}}</li>
									<li>SSS3: {{schoolFees.SSS3}}</li>
								</ul>
								<button class="btn btn-danger">Change</button>	
							</article>
							{{/with}}
							<article class="changeSchoolFees" style="display:none;">
								{{> quickForm schema="g.Schemas.SchoolFees" id="updateSchoolFees" type="normal" afFieldInput-placeholder="schemaLabel" validation='blur' doc=termSchoolFees}}
							</article>
						{{else}}
							<p>Term school fees not yet set</p>
						{{/if}}
						<br/>
					 <button class="btn btn-danger" title="Feature will be enabled soon!" disabled>New payment category</button>
					</div>
					</div>
				</div>
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>

<template name="newSessionModal">
		<!-- Moddal start -->
	<div class="modal fade">
			<div class="modal-dialog" role='document'>
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss='modal' arial-label='Close'>
							<span arial-hidden='true'>&times;</span>
						</button>
						<h3 class="modal-title" id='myModalLabel'>
							New session
						</h3>
					</div>
					<div class="modal-body">
						<h4>Creating a new session</h4>
						{{#with setting}}
							<ul style="list-style-type: square;">
								<li><b>Current session: {{session}}</b></li>
								<li><b>Current Term : {{termSuffix term}}</b></li>
							</ul>
						{{/with}}
						{{>quickForm schema="g.Schemas.SchoolFees" id="newSession" type="normal" validation='blur' afFieldInput-placeholder="schemaLabel"}}
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-dismiss='modal'>Close</button>
					</div>
				</div>
			</div>
	</div>
</template>
<template name="setTermAndSchoolFees">
		<!-- Moddal start -->
	<div class="modal fade">
			<div class="modal-dialog" role='document'>
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss='modal' arial-label='Close'>
							<span arial-hidden='true'>&times;</span>
						</button>
						<h3 class="modal-title" id='myModalLabel'>
							New term
						</h3>
					</div>
					<div class="modal-body">
						<h4>Creating a new term</h4>
						{{#with setting}}
							<ul style="list-style-type:square;">
								<li><b>Current session: {{session}}</b></li>
								<li><b>Current term : {{termSuffix term}}</b></li>
							</ul>
						{{/with}}
						{{> quickForm schema="g.Schemas.SchoolFees" id="setTermAndSchoolFees" type="normal" afFieldInput-placeholder="schemaLabel" validation='blur'}}
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-dismiss='modal'>Close</button>
					</div>
				</div>
			</div>
	</div>
		<!-- Modal end -->
</template>
<template name="editorList">
	{{#if isInRole 'admin'}}
		{{#if Template.subscriptionsReady}}

		{{else}}
			{{> smsLoading}}
		{{/if}}

	{{/if}}
</template>
<!-- Staff Template begin -->
<template name="staffList">
	{{#if Template.subscriptionsReady}}
	<div class="col-md-10 col-md-offset-1">
		<h3>Staff list &nbsp;&nbsp;&nbsp;<a href="{{pathFor 'newStaff'}}" class="btn btn-primary btn-xs"><span class="fa fa-plus"></span> New staff</a></h3><hr/>
		<form class="filter">
			<input type="text" name="name" placeholder="staff name">
			<input type="text" name="staffId" placeholder="staff Id">
			<button type="submit" class="btn btn-primary btn-xs">Filter staff</button>
			<button class="btn btn-primary btn-xs" id="all_staff">Show all staffs</button>
		</form>
		{{#if staffs}}
		<table class="table table-striped serial">
			<tr>
				<th>S/N</th>
				<th>Name</th>
				<th>Staff ID</th>
				<th>Subjects</th>
				<th>Gender</th>
				<th>Club</th>
				<th>Actions</th>
			</tr>
		{{#each staffs}}
			<tr>
				<td></td>
				<td>{{lastName}}, {{firstName}} {{otherName}}</td>
				<td>{{staffId}}</td>
				<td>{{subjectTaught}} <br/></td> 
				<td>{{gender}}</td>
				<td>{{club}}</td>
				<td><a href="{{pathFor 'singleStaff'}}/{{staffId}}" class="btn btn-info btn-xs"> <span class="fa fa-info-circle"></span> More Details</a></td>
			</tr>
		{{/each}}
		</table>
		{{else}}
			<h4>No staff found!</h4>
		{{/if}}
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="singleStaff">
	{{#if Template.subscriptionsReady}}
	<div class="col-md-offset-1 col-md-10">
	{{#with staff}}	
	<section id="singleStaff" class="row">
			<h3>{{lastName}}, {{firstName}} {{otherName}} Profile 
				{{#if isInRole 'admin'}}
				<span class="btn btn-danger btn-xs" id="removeAdmin">Remove Admin</span>
				<span class="btn btn-danger btn-xs" id="makeAdmin">Make Admin</span>
				{{/if}}
			</h3>
			<hr style="border-bottom:3px dashed orangered;border-top:3px dotted orangered;"/>
					<div class="col-md-8">	
						<table class="table">
							<caption>Employment Data</caption>

							<tr>
								<td>Last Name</td><td>{{lastName}}</td>
							</tr>
							<tr>
								<td>First Name</td><td>{{firstName}}</td>
							</tr>
							<tr>
								<td>Other Name</td><td>{{otherName}}</td>
							</tr>
							<tr>	
								<td>Gender</td> <td>{{gender}}</td>
							</tr>
							<tr>
								<td>Date of Birth</td> <td>{{dayMonthYear dob}}</td>
							</tr>
							<tr>
								<td>Staff ID</td> <td>{{staffId}}</td>
							</tr>
						
							<tr>
								<td>Email</td> <td>{{email}}</td>
							</tr>
							<tr>
								<td>Subject Taught</td> <td>{{subjectTaught}}</td>
							</tr>
						
							

							<tfoot><span><a href="{{pathFor 'editStaff'}}/{{staffId}}" class="btn btn-primary btn-xs"><span class="fa fa-edit"></span> edit</a></span></tfoot>
						</table>


						<!-- Other Information -->
						<table class="table">
							<caption>Other Information</caption> 
							<tr>
								<td>Origin</td> <td>{{town}}, {{state}} State</td>
							</tr>
							<tr>
								<td>Present Address</td> <td>{{presentAddress}}</td>
							</tr>
							<tr>
								<td>Home Address</td> <td>{{homeAddress}}</td>
							</tr>
							<tr>
								<td>Contact Number</td> <td>{{phone}}</td>
							</tr>
							<tr>
								<td>Hobbies</td> <td>{{hobby}}</td>
							</tr>
							<tr>
								<td>Club and Society</td> <td>{{club}}</td>
							</tr>
							<tr>
								<td colspan="2" class="text-center"><h4>Medical Record</h4></td>
							</tr>
							<tr>
								<td>Blood Group</td><td>{{medicalHistory.bloodGroup}}</td>
							</tr>
							<tr>
								<td>Genotype</td><td>{{medicalHistory.genotype}}</td>
							</tr>
							<tr>
								<td>Condition</td><td>{{medicalHistory.medicalCondition}}</td>
							</tr>
							<tr>
								<td colspan="2" class="text-center"><h4>Next of Kin</h4></td>
							</tr>
							<tr>
								<td>Name</td> <td>{{nok.name}}</td>
							</tr>
							<tr>
								<td>Address</td> <td>{{nok.address}}</td>
							</tr>
							<tr>
								<td>Contact</td> <td>{{nok.phone}}</td>
							</tr>
							<tr>
								<td>Relationship</td> <td>{{nok.relationship}}</td>
							</tr>
							
							<tfoot><span><a href="{{pathFor 'updateStaff'}}/{{staffId}}" class="btn btn-primary btn-xs"><span class="fa fa-edit"></span> edit profile</a></span></tfoot>
						</table>
				</div>
				<div class="col-md-4">
					<p><img src="{{staffId}}.png" alt="Staff Passport Photograph"></p>
					<p><a href="#">View Assignments</a></p>
					<p><a href="#">Send a Message</a></p>
					{{#if isInRole "admin,editor"}}
						<button class="btn btn-danger" id="deleteStaff" title="Remove this staff from school.">Delete Staff</button>
					{{/if}}
				</div>		
	</section>
	{{/with}}
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
	
</template>



<template name="newStaff">
	<div class="col-md-offset-1 col-md-10">
		<h3>New staff</h3><hr/>
		{{#autoForm collection="g.Staffs" id="newStaff" type="normal" validation='blur'}}
				<p><b>Section suffixed with <span class="fa fa-asterisk text-danger"></span> must be filled.</b></p>
				<section class="col-md-5 col-sm-5">
					<fieldset>
						<legend>Employment Data <span class="fa fa-asterisk text-danger"></span></legend>
						{{>afQuickField name="firstName"}}
						{{>afQuickField name="lastName"}}
						{{>afQuickField name="otherName"}}
						{{>afQuickField name="gender" options="allowed" firstOption="Select gender" type="select-radio-inline"}}
						{{>afQuickField name="dob"}}
						{{>afQuickField name="staffId"}}
						{{>afQuickField name="subjectTaught"}}
					</fieldset>
				</section>
				<section class="col-md-offset-1 col-md-5 col-sm-offset-1 col-sm-5">
					<fieldset>
						<legend>Medical History </legend>
						{{>afQuickField name="medicalHistory.bloodGroup" options="allowed"}}
						{{>afQuickField name="medicalHistory.genotype" options="allowed"}}
						{{>afQuickField name="medicalHistory.medicalCondition" options="allowed" type="select-checkbox-inline"}}
					</fieldset>
					<fieldset>
						<legend>Next of Kin</legend>
						{{>afQuickField name="nok.name"}}
						{{>afQuickField name="nok.address"}}
						{{>afQuickField name="nok.phone"}}
						{{>afQuickField name="nok.relationship"}}
					</fieldset>
				</section><br style="clear:both;"/>
				<!-- other information -->
				<fieldset>
					<legend>Other Information</legend>
					<fieldset class="col-md-5">
						{{>afQuickField name="state" options="allowed" firstOption="Select class"}}
						{{>afQuickField name="town"}}
						{{>afQuickField name="homeAddress"}}
						{{>afQuickField name="presentAddress"}}
						{{>afQuickField name="email"}}
						{{>afQuickField name="club" options="allowed"}}
					</fieldset>
					<fieldset class="col-md-5 col-md-offset-1">
						{{>afQuickField name="phone"}}
						{{>afQuickField name="hobby"}}
					</fieldset>
				</fieldset><br style="clear:both;"/>
				<!-- miscellaneous fields -->
				{{>afQuickField name="createdAt"}}
				{{>afQuickField name="addedBy"}}
				<br style="clear:both;">
				<div class="form-group">										<button type="reset" class="btn btn-danger">Reset</button>
					&nbsp;&nbsp;&nbsp;<button type="submit" class="btn btn-primary btn-lg">Submit</button>

				</div>

				
			{{/autoForm}}
	</div>
</template>

<template name="editStaff">
	{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-md-10">
		<h3>Edit Staff details</h3><hr/>
		{{#with editStaffInfo}}
			<table style="margin: 5px auto;">
				<tr><td><strong>Name</strong></td><td>{{lastName}}, {{firstName}} {{otherName}}</td><td rowspan="3"><img src="staff5.png" alt="{{firstName}} passport"></td></tr>
				<tr><td><strong>Email</strong></td><td>{{email}}</td></tr>
				<tr><td><strong>Staff Id</strong></td><td>{{staffId}}</td></tr>
			</table>
		{{/with}}
			{{#autoForm schema="g.Schemas.EditStaff" id="editStaff" type="normal" doc=editStaffInfo validation='blur'}}
			<fieldset>
				<legend>Employment Data</legend>
				<fieldset class="col-md-5">
					{{> afQuickField name="firstName"}}
					{{> afQuickField name="lastName"}}
					{{> afQuickField name="otherName"}}
					{{> afQuickField name="gender" options="allowed"}}
				</fieldset>
				<fieldset class="col-md-5 col-md-offset-1">
					{{> afQuickField name="subjectTaught"}}
				</fieldset>
			</fieldset>
			<br style="clear:both;"/>
				<div class="form-group">
					<button type="submit" class="btn btn-primary">Update</button>
				</div>
			{{/autoForm}}
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
	
</template>

<template name="updateStaff">
	{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-md-11">
			{{#with updateStaffInfo}}
			<table style="margin: 5px auto;">
				<tr><td><strong>Name</strong></td><td>{{lastName}}, {{firstName}} {{otherName}}</td><td rowspan="3"><img src="http://localhost:3000/staff5.png" alt="{{firstName}} passport"></td></tr>
				<tr><td><strong>Email</strong></td><td>{{email}}</td></tr>
				<tr><td><strong>Staff Id</strong></td><td>{{staffId}}</td></tr>
			</table>
			{{/with}}
			{{#autoForm schema="g.Schemas.UpdateStaff" id="updateStaff" type="normal" doc=updateStaffInfo validation='blur'}} 
				<fieldset>
						<legend>Profile Information</legend>
						<fieldset class="col-md-5">
							{{>afQuickField name="state" options="allowed"}}
							{{>afQuickField name="town"}}
							{{>afQuickField name="homeAddress"}}
							{{>afQuickField name="presentAddress"}}
							{{>afQuickField name="nok"}}
						</fieldset>
						
						<fieldset class="col-md-5 col-md-offset-1">
							{{>afQuickField name="dob"}}
							{{>afQuickField name="phone"}}
							{{>afQuickField name="hobby"}}
							{{>afQuickField name="club" options="allowed"}}
							<!-- {{>afQuickField name="medicalHistory"}} -->
							{{>afQuickField name="medicalHistory.bloodGroup" options="allowed"}}
							{{>afQuickField name="medicalHistory.genotype" options="allowed"}}
							{{>afQuickField name="medicalHistory.medicalCondition" options="allowed" type="select-checkbox-inline"}}
						</fieldset>
					</fieldset>	<br style="clear:both;"/>	
				<div class="form-group">
					<button type="submit" class="btn btn-primary">Update</button>
				</div>
			{{/autoForm}}
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<!-- Staff Template end -->

<!-- Passport upload -->
<template name="passportUpload">
	<div class="col-md-7">
		<h3>Upload Passport</h3><hr/>
			<div class="text-info">
				{{#with uploadInfo}}
					<p><strong>Name: </strong>{{name}}</p>
					<p><strong>Id: </strong>{{id}}</p>
					<p><strong>Role: </strong>{{diff}}</p>
				{{/with}}
			</div>
			<div class="alert-warning" style="padding: 10px;">
				<p>(a). Format: .png, .jpg only</p>
				<p>(b). Size: less than 50kb and greater than 5kb</p>
				<p>(c). Dimension: Width &lt;&equals; 250, Height &lt;&equals; 310</p>
			</div>

			<label>Select file to upload</label><br/>
			<input type="file" name="file" id="file" value="Select passport"><br/>

		<button>Take a picture</button>
	</div>
	<div class="col-md-5">
		<h3>Upload Preview</h3>
		<div id="passportPreview">Upload Preview</div><br/>
		<button id="uploadBtn" class="btn btn-danger">Upload</button>	
	</div>
</template>

<!-- ******************************************* -->
<!-- *************Break Break Break************* -->
<!-- ******************************************* -->
<!-- students templates begin -->

<template name="studentList">
	{{#if Template.subscriptionsReady}}
	<div class="col-md-offset-1 col-md-11">	
		<h3>Student list &nbsp; <a href="{{pathFor 'newStudent'}}" class="btn btn-primary btn-xs"><span class="fa fa-plus"></span> New Student</a></h3><hr/>
		<h4 class="text-info">
			{{#if studentFilter}}
				<strong>Showing <em>{{studentFilter.selectedClass}}</em> students.</strong>
			{{else}}
				<strong>Showing <em>JSS1</em> students.</strong>
			{{/if}}
		</h4>
		<form class="filter">
			<input type="text" name="name" placeholder="name">	
			<input type="text" name="studentId" placeholder="student Id">
			<select name='class'>
			{{#each classes}}
				<option>{{this}}</option>
			{{/each}}
			</select>
			<button type="submit" class="btn btn-primary btn-xs">Filter students</button>
		</form>
		{{#if students}}
			<button class="demoteStudent btn btn-danger btn-xs" style="display:none;">Demote student</button>
		<table class="table table-bordered serial">
			<tr>
				<th>S/N</th>
				<th><input type="checkbox" name="checkAllBoxes" class="checkAllBoxes"></th>
				<th>Name</th>
				<th>Class</th>
				<th>ID</th>
				<th>Gender</th>
				<th>View</th>
			</tr>
		{{#each students}}
			<tr>
				<td></td>
				<td class="text-center">
				<input type="checkbox" name="checkStudent" value="{{meteorIdInStudent}}" style="display:inline;">
				</td>
				<td>{{lastName}}, {{firstName}} {{otherName}}</td>
				<td>{{currentClass}} </td>
				<td>{{studentId}}</td>
				<td>{{gender}}</td>
				<td style="text-align: center;"><a href="{{pathFor 'singleStudent'}}/{{studentId}}" class="btn btn-info btn-xs"><span class="fa fa-info-circle"></span> More details</a> <br/>
				</td>
			</tr>
		{{/each}}
		</table>
		{{else}}
			<h4>No student found!</h4>
		{{/if}}
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>
<template name="singleStudent">
	{{#if Template.subscriptionsReady}}
	<div class="col-md-10 col-md-offset-1">
		<!-- Admission Information -->
		{{#with student}}	
		<section id="singleStudent" class="row">
				<h1>{{lastName}}, {{firstName}} {{otherName}} Profile</h1><hr style="border-bottom: 3px dashed #abcdef;" />
						<div class="col-md-8 col-sm-8">	
							<table class="table">
								<caption>Admission Data</caption>

								<tr>
									<td>Last Name</td><td>{{lastName}}</td>
								</tr>
								<tr>
									<td>First Name</td><td>{{firstName}}</td>
								</tr>
								<tr>
									<td>Other Name</td><td>{{otherName}}</td>
								</tr>
								<tr>	
									<td>Gender</td> <td>{{gender}}</td>
								</tr>
								<tr>
									<td>Class</td>	<td>{{currentClass}}</td>
								</tr>
								<tr>
									<td>Student ID</td> <td>{{studentId}}</td>
								</tr>
								<tr>
									<td>Date of Birth</td> <td>{{dayMonthYear dob}}</td>
								</tr>
								<tr><td colspan="2" class="text-center"><h4>Parent/Guardian</h4></td></tr>
								<tr>
									<td>Name</td>
									<td>{{parentOrGuardian.name}}</td>
								</tr>
								<tr>
									<td>Address</td>
									<td>{{parentOrGuardian.address}}</td>
								</tr>
								<tr>
									<td>Contact Number</td>
									<td>{{parentOrGuardian.phone}}</td>
								</tr>
								<tfoot><span class="edit"><a href="{{pathFor 'editStudent'}}/{{studentId}}" class="btn btn-primary btn-xs"><span class="fa fa-edit"></span> edit admission info</a></span></tfoot>
							</table>
							<!-- Other Information -->
							<table class="table">
								<caption>Personal Information</caption>

								<tr>
									<td>Contact Number</td> <td>{{phone}}</td>
								</tr>
								<tr>
									<td>Email</td> <td>{{email}}</td>
								</tr>
								
								<tr>
									<td>State</td> <td>{{state}} State</td>
								</tr>
								<tr>
									<td>Town</td> <td>{{town}}</td>
								</tr>
								<tr>
									<td>Present Address</td> <td>{{presentAddress}}</td>
								</tr>
								<tr>
									<td>Home Address</td> <td>{{homeAddress}}</td>
								</tr>
								<tr>
									<td>Hobbies</td> <td>{{hobby}}</td>
								</tr>
								<tr>
									<td>Club and Society</td> <td>{{club}}</td>
								</tr>
								<tr>
									<td colspan="2" class="text-center"><h4>Next of Kin</h4></td>
								</tr>
								<tr>
									<td>Name</td> <td>{{nok.name}}</td>
								</tr>
								<tr>
									<td>Address</td> <td>{{nok.address}}</td>
								
								</tr>
								
								<tr>
									<td>Contact</td> <td>{{nok.phone}}</td>
								</tr>
								<tr>
									<td>Relationship</td> <td>{{nok.relationship}}</td>
								</tr>
								<tr>
									<td colspan="2" class="text-center"><h4>Medical History</h4></td>
								</tr>
								<tr>
									<td>Blood Group</td>
									<td>{{medicalHistory.bloodGroup}}</td>
								</tr>
								<tr>
									<td>Genotype</td>
									<td>{{medicalHistory.genotype}}</td>
								</tr>
								<tr>
									<td>Blood Group</td>
									<td>{{medicalHistory.medicalCondition}}</td>
								</tr>
								<tfoot><span class="edit"><a href="{{pathFor 'updateStudent'}}/{{studentId}}" class="btn btn-primary btn-xs"><span class="fa fa-edit"></span> edit profile</a></span></tfoot>
							</table>
					</div>
					<div class="col-md-4 col-sm-4">
						<p><img src="{{studentId}}.png" alt="Student Passport Photograph"></p>
						<p><a href="{{pathFor 'singleResult'}}/{{studentId}}" class="btn btn-primary btn-xs"><span class="fa fa-check-circle"></span> View Results</a></p>
						<p><a href="{{pathFor 'singlePayment'}}/{{studentId}}" class="btn btn-primary btn-xs"><span class="fa fa-money"></span> View Payments</a></p>
						<p><a href="{{pathFor 'performance'}}/{{studentId}}" class="btn btn-primary btn-xs"><span class="fa fa-bar-chart-o"></span> View Performance</a></p>
						<button class="btn btn-danger" id="deleteStudent" title="Remove this student from school.">Delete Student</button>
					</div>		
		</section>
		{{/with}}
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>
<template name="newStudent">	
	<div class="col-md-offset-1 col-md-11">
		<h3>New student</h3><hr/>
			{{#autoForm collection="g.Students" id="newStudent" type="normal" validation='blur'}}
				<p><b>Section suffixed with <span class="fa fa-asterisk text-danger"></span> must be filled.</b></p>
				<section class="col-md-5 col-sm-5">
					<fieldset>
						<legend>Personal Information <span class="fa fa-asterisk text-danger"></span></legend>
						{{>afQuickField name="firstName"}}
						{{>afQuickField name="lastName"}}
						{{>afQuickField name="otherName"}}
						{{>afQuickField name="gender" options="allowed" firstOption="Select gender" type="select-radio-inline"}}
						{{>afQuickField name="dob"}}
					</fieldset>
					<fieldset>
						<legend>Admission Data <span class="fa fa-asterisk text-danger"></span></legend>
						{{>afQuickField name="currentClass" options="allowed" firstOption="Select class"}}
						{{>afQuickField name="studentId"}}
					</fieldset>
					<fieldset>
						<legend>Other Information</legend>
						{{>afQuickField name="state" options="allowed" firstOption="Select class"}}
						{{>afQuickField name="town"}}
						{{>afQuickField name="homeAddress"}}
						{{>afQuickField name="presentAddress"}}
						{{>afQuickField name="phone"}}
						{{>afQuickField name="email"}}
						{{>afQuickField name="hobby"}}
						{{>afQuickField name="club" options="allowed"}}
					</fieldset>
				</section>
				<section class="col-md-offset-1 col-md-5 col-sm-offset-1 col-sm-5">
					<fieldset>
						<legend>Parent or Guardian <span class="fa fa-asterisk text-danger"></span></legend>
						{{>afQuickField name="parentOrGuardian"}}
					</fieldset>
					<fieldset>
						<legend>Medical History </legend>
						{{>afQuickField name="medicalHistory.bloodGroup" options="allowed"}}
						{{>afQuickField name="medicalHistory.genotype" options="allowed"}}
						{{>afQuickField name="medicalHistory.medicalCondition" options="allowed" type="select-checkbox-inline"}}
					</fieldset>
					<fieldset>
						<legend>Next of Kin</legend>
						{{>afQuickField name="nok"}}
					</fieldset>
				</section>
				<!-- miscellaneous fields -->
				{{>afQuickField name="createdAt"}}
				{{>afQuickField name="addedBy"}}
				<br style="clear:both;">
				<div class="form-group">										<button type="reset" class="btn btn-danger">Reset</button>
					&nbsp;&nbsp;&nbsp;<button type="submit" class="btn btn-primary btn-lg">Submit</button>

				</div>

				
			{{/autoForm}}
	</div>
</template>


<template name="editStudent">
	{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-md-10">
			<h3>Edit student details</h3><hr/>
			{{#with editStudentInfo}}
				<table style="margin: 5px auto;">
					<tr><td><strong>Name</strong></td><td>{{lastName}}, {{firstName}} {{otherName}}</td><td rowspan="3"><img src="/student10.png" alt="{{firstName}} passport"></td></tr>
					<tr><td><strong>Email</strong></td><td>{{email}}</td></tr>
					<tr><td><strong>Student Id</strong></td><td>{{studentId}}</td></tr>
				</table>
			{{/with}}
			{{#autoForm schema="g.Schemas.EditStudent" id="editStudent" type="normal" doc=editStudentInfo validation='blur'}}
			<fieldset>
				<legend>Admission Data</legend>
				<fieldset class="col-md-5">
					{{> afQuickField name="firstName"}}
					{{> afQuickField name="lastName"}}
					{{> afQuickField name="otherName"}}
					{{> afQuickField name="currentClass" options="allowed" firstOption="Current class"}}
					{{> afQuickField name="gender" options="allowed"}}
				</fieldset>
				<fieldset class="col-md-5 col-md-offset-1">
					{{> afQuickField name="parentOrGuardian"}}
				</fieldset>
			</fieldset>
			<br style="clear:both;"/>
				<div class="form-group">
					<button type="submit" class="btn btn-primary">Update</button>
				</div>
			{{/autoForm}}
		</div>	
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="updateStudent">
	{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-md-11">
		<h3>Update student details</h3><hr/>
		{{#with updateStudentInfo}}
			<table style="margin: 5px auto;">
				<tr><td><strong>Name</strong></td><td>{{lastName}}, {{firstName}} {{otherName}}</td><td rowspan="3"><img src="/student10.png" alt="{{firstName}} passport"></td></tr>
				<tr><td><strong>Email</strong></td><td>{{email}}</td></tr>
				<tr><td><strong>Student Id</strong></td><td>{{studentId}}</td></tr>
			</table>
		{{/with}}
			{{#autoForm schema="g.Schemas.UpdateStudent" id="updateStudent" type="normal" doc=updateStudentInfo validation='blur'}}
					<fieldset>
						<legend>Profile Information</legend>
						<fieldset class="col-md-5">
							{{>afQuickField name="state" options="allowed"}}
							{{>afQuickField name="town"}}
							{{>afQuickField name="homeAddress"}}
							{{>afQuickField name="presentAddress"}}
							{{>afQuickField name="nok"}}
						</fieldset>
						
						<fieldset class="col-md-5">
							{{>afQuickField name="dob"}}
							{{>afQuickField name="phone"}}
							{{>afQuickField name="hobby"}}
							{{>afQuickField name="club" options="allowed"}}
							<!-- {{>afQuickField name="medicalHistory"}} -->
							{{>afQuickField name="medicalHistory.bloodGroup" options="allowed"}}
							{{>afQuickField name="medicalHistory.genotype" options="allowed"}}
							{{>afQuickField name="medicalHistory.medicalCondition" options="allowed" type="select-checkbox-inline"}}
						</fieldset>
					</fieldset>					
				<br style="clear:both;"/>
				<div class="form-group">
					<button type="submit" class="btn btn-primary">Update</button>	
				</div>
			{{/autoForm}}
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
	
</template>
<!-- Student templates end -->

<!-- Result templates begin -->
<template name="resultList">
	{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-md-11">
			<h3>Result List <button class="btn btn-primary btn-xs"><span class="fa fa-plus"></span> New Result</button></h3><hr/>
			<h4 class="text-info">
				{{#if resultFilter}}
					<strong>Showing result for <em>{{resultFilter.selectedClass}}</em> class.</strong>
				{{else}}
					<strong>Showing result for <em>JSS1</em> class.</strong>
				{{/if}}
			</h4>
			<form class="filter">
				<input type="text" name="studentId" placeholder="student Id">
				<select name='class'>
					{{#each classes}}
					<option>{{this}}</option>
					{{/each}}
				</select>
				<button type="submit" class="btn btn-primary btn-xs">Filter result</button>
			</form>
			{{#if results}}
			<table class="serial table table-striped">
				<tr>
					<th>S/N</th>
					<th>Name</th>
					<th>Student ID</th>
					<th>Class</th>
					<th>Last Result added</th>
					<th>Action</th>
				</tr>
			{{#each results}}
				<tr>
					<td></td>
					<td>{{firstName}}, {{lastName}} {{otherName}}</td>
					<td>{{studentId}}</td>
					<td>{{currentClass}}</td>
					<!-- if student has result					 -->
				{{#if lastResult}}
					{{#with lastResult}}
					<td>
							{{class}} | {{termSuffix term}} | {{session}}
					</td>
					{{/with}}
					<td style="text-align: center;">
						<a href="{{pathFor 'singleResult'}}/{{studentId}}" class="btn btn-info btn-xs"><span class="fa fa-info"></span> View Results</a> 
						{{#unless termResultAvailable}}
						|| <a href="{{pathFor 'updateResult'}}" class="addResult btn btn-primary btn-xs"><span class="fa fa-plus"></span> Add result</a>
						{{/unless}}
					</td>
					<!-- else if no result -->
				{{else}}
					<td>No result</td>
					<td style="text-align: center;">
						{{#unless termResultAvailable}}
						<a href="{{pathFor 'updateResult'}}" class="addResult btn btn-primary btn-xs"><span class="fa fa-plus"></span> Add result</a>
						{{/unless}}
					</td>
				{{/if}}
					
				</tr>
			{{/each}}
			</table>
			{{else}}
				<h4>
				{{#if resultFilter}}
					<strong>No result found for <em>{{resultFilter.selectedClass}}</em> class.</strong>
				{{else}}
					<strong>No result found for <em>JSS1</em> class.</strong>
				{{/if}}
				</h4>

			{{/if}}
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="singleResult">
	{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-md-10" id="singleResult">
			{{#with studentInfo}}
				<h2>{{firstName}}, {{lastName}} {{otherName}} Result</h2>
				<hr style="border-bottom: 3px dashed #abcdef;"/>
				<form class='searchResult'>
					<select name="class">
					{{#if availableClass}}
						{{#each availableClass}}	
							<option value="{{this}}">{{this}}</option>
						{{/each}}
					{{/if}}
					</select>
					<select name="term">
						{{#each termArray}}
						<option value="{{this}}">{{termSuffix this}} term</option>
						{{/each}}
					</select>
					<button type="submit" class="btn btn-primary btn-xs">Show result</button>
				</form>
				<table class="table table-striped">
					<tr>
						<td><strong>First Name</strong></td>
						<td>{{firstName}}</td>
						<td><strong>Other Name(s)</strong></td>
						<td>{{lastName}} {{otherName}}</td>
						<td rowspan="3" style="border: 1px solid black">
							<img src="student10.png" alt="{{studentId}} passport">
						</td>
					</tr>
					<tr>
						<td><strong>Student ID</strong></td>
						<td>{{studentId}}</td>
						<td><strong>Email</strong></td>
						<td>{{email}}</td>
					</tr>
					<tr>
						<td><strong>Current Class</strong></td>
						<td>{{currentClass}}</td>
						<td><strong>Current Term</strong></td>
						<td>{{termSuffix setting.term}}</td>
					</tr>
				</table>
				{{/with}}<!-- end first student Info -->
			{{#with singleRes}}
					<h2>Result details</h2>
					<table class="table table-striped">
						<tr>
							<td><strong>Class</strong></td> <td>{{class}}</td>
							<td><strong>Term</strong></td> <td>{{termSuffix term}}</td>
							<td><strong>Session</strong></td><td>{{session}}</td>
						</tr>
					</table>
					<table class="table table-striped serial">
						<tr>
							<th>S/N</th>
							<th>Subjects</th>
							<th>CA</th>
							<th>Exam</th>
							<th>Total</th>
							<th>Grade</th>
							<th>Remark</th>
						</tr>
						{{#if english}}
						<tr>
							<td></td>
							<td>English Language</td>
							<td>{{english.ca}}</td>
							<td>{{english.exam}}</td>
							<td>{{english.total}}</td>
							<td>{{english.grade}}</td>
							<td>{{english.remark}}</td>
						</tr>
						{{/if}}
						{{#if mathematics}}
						<tr>
							<td></td>
							<td>Mathematics</td>
							<td>{{mathematics.ca}}</td>
							<td>{{mathematics.exam}}</td>
							<td>{{mathematics.total}}</td>
							<td>{{mathematics.grade}}</td>
							<td>{{mathematics.remark}}</td>
						</tr>
						{{/if}}

						{{#if physics}}
						<tr>
							<td></td>
							<td>Physics</td>
							<td>{{physics.ca}}</td>
							<td>{{physics.exam}}</td>
							<td>{{physics.total}}</td>
							<td>{{physics.grade}}</td>
							<td>{{physics.remark}}</td>
						</tr>
						{{/if}}
						{{#if chemistry}}
						<tr>
							<td></td>
							<td>Chemistry</td>
							<td>{{chemistry.ca}}</td>
							<td>{{chemistry.exam}}</td>
							<td>{{chemistry.total}}</td>
							<td>{{chemistry.grade}}</td>
							<td>{{chemistry.remark}}</td>
						</tr>
						{{/if}}
						{{#if biology}}
						<tr>
							<td></td>
							<td>Biology</td>
							<td>{{biology.ca}}</td>
							<td>{{biology.exam}}</td>
							<td>{{biology.total}}</td>
							<td>{{biology.grade}}</td>
							<td>{{biology.remark}}</td>
						</tr>
						{{/if}}
						{{#if account}}
						<tr>
							<td></td>
							<td>Accounting</td>
							<td>{{account.ca}}</td>
							<td>{{account.exam}}</td>
							<td>{{account.total}}</td>
							<td>{{account.grade}}</td>
							<td>{{account.remark}}</td>
						</tr>
						{{/if}}
						{{#if commerce}}
						<tr>
							<td></td>
							<td>Commerce</td>
							<td>{{commerce.ca}}</td>
							<td>{{commerce.exam}}</td>
							<td>{{commerce.total}}</td>
							<td>{{commerce.grade}}</td>
							<td>{{commerce.remark}}</td>
						</tr>
						{{/if}}
						{{#if economics}}
						<tr>
							<td></td>
							<td>Economics</td>
							<td>{{economics.ca}}</td>
							<td>{{economics.exam}}</td>
							<td>{{economics.total}}</td>
							<td>{{economics.grade}}</td>
							<td>{{economics.remark}}</td>
						</tr>
						{{/if}}
						{{#if literature}}
						<tr>
							<td></td>
							<td>Literature</td>
							<td>{{literature.ca}}</td>
							<td>{{literature.exam}}</td>
							<td>{{literature.total}}</td>
							<td>{{literature.grade}}</td>
							<td>{{literature.remark}}</td>
						</tr>
						{{/if}}
						{{#if government}}
						<tr>
							<td></td>
							<td>Government</td>
							<td>{{government.ca}}</td>
							<td>{{government.exam}}</td>
							<td>{{government.total}}</td>
							<td>{{government.grade}}</td>
							<td>{{government.remark}}</td>
						</tr>
						{{/if}}
						{{#if geography}}
						<tr>
							<td></td>
							<td>Geography</td>
							<td>{{geography.ca}}</td>
							<td>{{geography.exam}}</td>
							<td>{{geography.total}}</td>
							<td>{{geography.grade}}</td>
							<td>{{geography.remark}}</td>
						</tr>
						{{/if}}
						{{#with studentInfo}}
						<br/>
						<tfoot><a href="{{pathFor 'editResult'}}/{{studentId}}" class="btn btn-primary btn-xs"><span class="fa fa-edit"></span> edit</a></tfoot>
						{{/with}}
					</table><br/>
					<button class="btn btn-danger btn-lg" onclick="window.print()">Print</button>
				{{else}}
				<h4>Result Unavailable!</h4>
				{{/with}}
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>


<template name="updateResult">
	{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-sm-10">
		{{#if resultFor}}
			{{#with resultFor}}
				<h3>Add Result</h3><hr/>
				<table style="margin: 5px auto;">
					<tr>
						<td><strong>Name:</strong></td> <td><strong>{{name}}</strong></td>
						<td><strong>Student ID:</strong></td> <td><strong>{{studentId}}</strong></td>
						<td rowspan="2"><img src="student10.png" alt="{{studentId}} passport"></td>
					</tr>
					<tr>
						<td><strong>Class:</strong></td> <td><strong>{{currentClass}}</strong></td>
						<td><strong>Term:</strong></td> <td><strong>{{termSuffix term}}</strong></td>
					</tr>
				</table>

			{{/with}}
			{{> quickForm schema="g.Schemas.ResultArray" id="updateResult" type="normal" template="bootstrap3-inline" label-class="sr-only" afFieldInput-placeholder="schemaLabel" validation='blur'}}

		{{else}}
			<p>No student is selected for this result. Select a student first.</p>
		{{/if}}
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="editResult">
		{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-sm-8">
			<h3>Edit Result</h3><hr/>
			<h3>Student details</h3><hr/>
				{{#with studentInfo}}
					<table style="margin: 5px auto;">
						<tr>
							<td><strong>Name:</strong></td> <td><strong>{{lastName}}, {{firstName}} {{otherName}}</strong></td>
							<td><strong>Student ID:</strong></td> <td><strong>{{studentId}}</strong></td>
							<td rowspan="2"><img src="student10.png" alt="{{studentId}} passport"></td>
						</tr>
						<tr>
							<td><strong>Class:</strong></td> <td><strong>{{currentClass}}</strong></td>
							<td><strong>Term:</strong></td>
							<td><strong>{{termSuffix setting.term}}</strong></td>
						</tr>
					</table>
				{{/with}}
				{{#with resultToEdit}}
					<h3>Update result for</h3>
					<table>
						<tr>
						<td><strong>Class</strong></td>
						<td>{{class}}</td>
						<td><strong>Term</strong></td>
						<td>{{termSuffix term}}</td>
						</tr>
					</table>
					{{> quickForm type="normal" id="editResult" schema="g.Schemas.ResultArray" collection="g.Results" doc=resultToEdit template="bootstrap3-inline" label-class="sr-only" afFieldInput-placeholder="schemaLabel" validation='blur'}}
				{{else}}
				<h3>No result to edit</h3>
				{{/with}}
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>

<!-- Result Ended -->
<!-- Payments templates begin -->
<template name="paymentList">
	{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-sm-10">
		<h3>Payment List <button class="btn btn-primary btn-xs"><span class="fa fa-plus"></span> New Payment</button></h3><hr/>
		<h4 class="text-info">
				{{#if paymentFilter}}
					<strong>Showing payment for <em>{{paymentFilter.selectedClass}}</em> class.</strong>
				{{else}}
					<strong>Showing payment for <em>JSS1</em> class.</strong>
				{{/if}}
		</h4>
		<form class="filter">
			<input type="text" name="studentId" placeholder="student Id">
			<select name='class'>
				{{#each classes}}
				<option>{{this}}</option>
				{{/each}}
			</select>
			<button type="submit" class="btn btn-primary btn-xs">Search Payment</button>
		</form>
		{{#if payments}}
		<table class="serial table table-striped">
			<tr>
				<th>S/N</th>
				<th>Name</th>
				<th>Student ID</th>
				<th>Class</th>
				<th>Last Payment made</th>
				<th>Action</th>
			</tr>
		{{#each payments}}
			<tr>
				<td></td>
				<td>{{firstName}}, {{lastName}} {{otherName}}</td>
				<td>{{studentId}}</td>
				<td>{{currentClass}}</td>
			{{#if lastPayment}}
				{{#with lastPayment}}
					<td>
						{{class}} | {{term}} | {{session}}
					</td>
				{{/with}}
					<td style="text-align: center;">
						<a href="{{pathFor 'singlePayment'}}/{{studentId}}" class="btn btn-info btn-xs"><span class="fa fa-info"></span> View Payments</a> 
						{{#unless termPaymentAvailable}}
						|| <a href="{{pathFor 'updatePayment'}}" class="addPayment btn btn-primary btn-xs"><span class="fa fa-plus"></span> Add payment</a>
						{{/unless}}
					</td>
				
			{{else}}
					<td>No payment</td>
					<td style="text-align: center;">
						{{#unless termPaymentAvailable}}
						<a href="{{pathFor 'updatePayment'}}" class="addPayment btn btn-primary btn-xs"><span class="fa fa-plus"></span> Add payment</a>
						{{/unless}}
					</td>
			{{/if}}
			</tr>
		{{/each}}
		</table>
		{{else}}
			<h4>
				{{#if paymentFilter}}
					<strong>No payment record found for <em>{{paymentFilter.selectedClass}}</em> class.</strong>
				{{else}}
					<strong>No payment record found for <em>JSS1</em> class.</strong>
				{{/if}}
			</h4>
		{{/if}}
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>


<template name="singlePayment">
		{{#if Template.subscriptionsReady}}
			<div class="col-md-offset-1 col-md-8" id="singlePayment">
				{{#with studentInfo}}
					<h2>{{firstName}}, {{lastName}} {{otherName}} Payments</h2>
					<hr style="border-bottom: 3px dashed #abcdef;"/>
					<form class='searchPayment'>
						<select name="class">
						{{#if availableClass}}
							{{#each availableClass}}	
								<option value="{{this}}">{{this}}</option>
							{{/each}}
						{{/if}}
						</select>
						<select name="term">
						{{#each termArray}}
							<option value="{{this}}">{{termSuffix this}}</option>
						{{/each}}
						</select>
						<button type="submit" class="btn btn-primary btn-xs">Show payment</button>
					</form>
					<table class="table table-striped">
						<tr>
							<td><strong>First Name</strong></td>
							<td>{{lastName}}</td>
							<td><strong>Other Name(s)</strong></td>
							<td>{{firstName}} {{otherName}}</td>
							<td rowspan="3" style="border: 1px solid black">
								<img src="/student10.png" alt="{{studentId}} passport">
							</td>
						</tr>
						<tr>
							<td><strong>Student ID</strong></td>
							<td>{{studentId}}</td>
							<td><strong>Email</strong></td>
							<td>{{email}}</td>
						</tr>
						<tr>
							<td><strong>Current Class</strong></td>
							<td>{{currentClass}}</td>
							<td><strong>Current Term</strong></td>
							<td>{{termSuffix setting.term}}</td>
						</tr>
					</table>
					{{#with singlePay}}
						<h3>Payment details</h3>
						<table class="table table-striped">
							<tr>
								<td>Class</td>
								<td>{{class}}</td>
							</tr>
							<tr>
								<td>Term</td>
								<td>{{termSuffix term}}</td>
							</tr>
							<tr>
								<td>Session</td>
								<td>{{session}}</td>
							</tr>
							<tr>
								<td>Payment Category</td>
								<td>{{category}}</td>
							</tr>
							<tr>
								<td>Amount</td>
								<td>{{amount}}</td>
							</tr>
							<!-- online payment -->
							{{#if paymentMethod paymentType}}
							<tr>
								<td>Amount Approved</td>
								<td>{{approvedAmount}}</td>
							</tr>
							<tr>
								<td>Gateway Description</td>
								<td>{{paymentDescription}}</td>
							</tr>
							<tr>
								<td>Payment Reference</td>
								<td>{{payRef}}</td>
							</tr>
							{{/if}}
							<!-- end online payment fields -->
							<tr>
								<td>Payment Method</td>
								<td>{{paymentType}}</td>
							</tr>
							<tr>
								<td>Payment Status</td>
								<td>{{paymentStatus}}</td>
							</tr>
							<tr>
								<td>Payment Date</td>
								<td>{{dateFormat date}}</td>
							</tr>
							<tr>
								<td>Transaction ID</td>
								<td>{{transactionId}}</td>
							</tr>
							<tr>
								<td>Receiver's Name</td>
								<td>{{staffName}}</td>
							</tr>
						</table>
						<br/>
						<button class="btn btn-danger" onclick="window.print()">Print</button>
					{{else}}
						<h4 class="text-center">Payment unavailable!</h4>
					{{/with}}
			{{/with}}
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>

<template name="updatePayment">
		{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-md-8">
			<h3>Payment details</h3><hr/>
			{{#if paymentFor}}
				<form id="createPaymentReceipt">
					<select name="paymentCat">
						{{#each paymentFor.category}}
							<option value="{{this}}">{{this}}</option>
						{{/each}}
					</select>
					<select name="paymentMethod">
						<option value="Cash">Cash</option>
						<option value="Online">Online</option>
					</select>
					<button type="submit" class="btn btn-primary btn-xs">Create receipt</button>
				</form>
				<p class="text-info"><strong>Select a payment category and payment method above and proceed to pay.</strong></p>
				{{#with paymentFor.stInfo}}
					<img src="/student10.png" style="float:right;max-width:100px;margin:10px;">
					<table style="margin:5px;font-size:1.1em;">
						<tr>
							<td>Name</td>
							<td>{{name}}</td>	
						</tr>
						<tr>
							<td>Student Id</td>
							<td>{{studentId}}</td>
						</tr>
						<tr>
							<td>Current class</td>
							<td>{{currentClass}}</td>
						</tr>
						<tr>
							<td>Current term</td>
							<td>{{termSuffix term}}</td>
						</tr>
						<tr>
							<td>Payment category</td>
							<td>{{paymentCategory}}</td>
						</tr>
						<tr>
							<td>Amount</td>
							<td>{{amount}}</td>
						</tr>
						<tr>
							<td>Payment method</td>
							<td>{{method}}</td>
						</tr>
					</table>
					<br style="clear:both;">
					<p class="text-info"><strong>
						Please note:<br/>
						<span>Cash payment means that you've collected this payment by hand.</span><br/>
						<span>Online payment would be processed by interswitch payment gateway.</span>
					</strong></p>
					{{#if failedPaymentReason}}
						<p class="text-danger"><strong>Payment failed due to {{failedPaymentReason}}. Try again!</strong></p>
					{{/if}}
					{{#if paymentMethod method}}
						<div id="onlinePayment">
							<a data-isw-payment-button data-isw-ref='kGM0Ul8XP'>
							  <script type='text/javascript' 
							    src='https://qa.interswitchng.com/paymentgateway/public/js/webpay.js' 
							    data-isw-customer-ref='{{transactionId}}' 
							    data-isw-customer-callback='cardPaymentCallback'
							    data-isw-trans-amount='{{amount}}00'> 
							  </script>
							</a>
							<script>
							  function cardPaymentCallback(response){
							  		if(!response){
								  		return;
								  	}
								  	let paymentInfo = Session.get('st.info'); 
									if(response.resp==="00" && response.desc=="Approved by Financial Institution" && response.payRef!==response.txnref){
										paymentInfo.response = response;
										g.meteorCall("updatePaymentByCard",{doc:paymentInfo,
											successMsg:"Payment was successful",
											redirect:FlowRouter.path("singlePayment",{id:paymentInfo.studentId})
										});
									}else{
										paymentInfo.failedPaymentReason = response.desc;
										Session.set("st.info",paymentInfo);
									}
							  }
							</script>
						</div>
					{{else}}
						<button class="btn btn-primary" id="proceedPayment" title="Click to confirm payment details above">Proceed</button>
					{{/if}}
				{{/with}}
			{{else}}
				<p>No student is selected for this payment. Select a student first.</p>
			{{/if}}
			
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
	
</template>
<!-- Payments templates end -->
<!-- ******************************************* -->
<!-- *************Break Break Break************* -->
<!-- ******************************************* -->
<template name="assignmentList">
	{{#if Template.subscriptionsReady}}
		<div class="col-md-11 col-md-offset-1">
		<h3>Assignment list <button class="btn btn-primary btn-xs" onclick="Modal.show('newAssignment')"><span class="fa fa-plus"></span> New Assignment</button></h3><hr/>
			<h4 class="text-info">
				{{#if assignmentFilter}}
					<strong>Showing <em>{{assignmentFilter.subject}} and {{assignmentFilter.class}}</em> assignments.</strong>
				{{else}}
					<strong>Showing <em>JSS1</em> assignments.</strong>
				{{/if}}	
			</h4>
			<form class="form-inline">
				<div class="form-group">
					<select name="session">
						{{#each sessionArray}}
						<option value="{{this}}">{{this}}</option>
						{{/each}}
					</select>
					<select name="term">
						{{#each termArray}}
						<option value="{{this}}">{{termSuffix this}}</option>
						{{/each}}
					</select>
					<select name='class' class="form-control">
						{{#each classes}}
						<option value="{{this}}">{{this}}</option>
						{{/each}}
					</select>
					<select name="subject" class="form-control">
						{{#each subjects}}
						<option value="{{this}}">{{this}}</option>
						{{/each}}
					</select>
					<button type="submit" class="btn btn-primary btn-xs">Filter Assignment</button>
				</div>
			</form> <br/>
			{{#if assignments}}
				{{#each assignments}}
					<div class="assignmentList">
								<div class="col-md-2 badge">
									<h4>{{class}}</h4>
									<p>{{subject}}</p>
								</div>
								<div class="col-md-10">
									<h4><a href="{{pathFor 'singleAssignment'}}/{{_id}}">{{title}}</a> [{{answerCount}} Answer(s)]
									{{#if validity}}
										<i class="label label-danger">Expired</i>
									{{/if}}
									</h4>
									<span><strong>Start: </strong>{{dateFormat startDate}}</span>
									<span><strong>Due date: </strong>{{dateFormat endDate}}</span>
									<span><strong>Max score: </strong>{{totalScore}}</span>
								</div>
					</div><hr/>
				{{/each}}
			{{else}}
				<h4>
				{{#if assignmentFilter}}
					<strong>No assignment found for <em>{{assignmentFilter.subject}} or {{assignmentFilter.class}}.</em></strong>
				{{else}}
					<strong>No assignment found</strong>
				{{/if}}
				</h4>
				<p></p>
			{{/if}}
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>

<template name="singleAssignment">
		{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-md-10">
			<div class="assignment">
				{{#with assignment}}
					<h3><span>{{title}}</span></h3><hr/>
					<article>
						<h3>Question</h3>
						<p>{{content}}</p>
						<span><strong>Class:</strong> {{class}}</span>
						<span><strong>Subject:</strong> {{subject}}</span>
						<span><strong>Mark:</strong> {{totalScore}}</span>
						<span><strong>Start date:</strong> {{dateFormat startDate}}</span>
						<span><strong>End date:</strong> {{dateFormat endDate}}</span><br/>
						<p>
							Posted by: 
							{{#if isInRole 'admin, editor'}}
								<strong>
								<a href="{{pathFor 'singleStaff'}}/{{staffId}}">{{author}}</a>
								</strong>
							{{else}}
								<strong>{{author}}</strong>
							{{/if}}
						</p>
						{{#if canEdit}}
						<p style="float: right;">
							<span title="click to modify this assignment">
								<a href="{{pathFor 'editAssignment'}}/{{_id}}">Edit</a>
							</span>
						</p><br/>
						{{else}}
						<p style="float: right;">
							<span title="You cannot edit this assignment" class="fa fa-ban fa-1x">
								 Edit
							</span>
						</p>
						{{/if}}
						<p>
							{{#if answerCount}} 
								<strong>{{answerCount}} answer(s) submitted. </strong>
							{{else}} 
								No answer submitted yet.
							{{/if}}
						</p>
						{{#if answerList}}
							<h3>Answers</h3><hr/>
							{{#each answerList}}
								<div class="answer">
									<p>
										<strong>{{fullName}}</strong>
										<p>{{text}}</p>
										{{#if score}}
											<span><strong>Score: </strong>{{score}} / {{assignment.totalScore}}</span> <i class="fa fa-check fa-2x" style="color: green;"></i>&nbsp;&nbsp;<span><strong>Comment: </strong></span><content class="text-danger">{{comment}}</content>
										{{else}}
											{{#if assignment.canEdit}}
											<form class="form-group">

												<label>Award score: </label>
												<input type="number" max="{{assignment.totalScore}}" min="0" name="score" placeholder="score this answer" required=""> 
												<input type="text" name="comment" placeholder="comment">

												
												<button type="submit" class="btn btn-default">Add score &amp; comment</button>
												<div style="display: none;">
													<div style="display: none;">
														<p style="display: none;">
															<input type="hidden" name="id" value="{{assignment._id}}" style="display: none;">
														</p>
													</div>
												</div>
											</form>

											{{else}}
												<p class="text-info"><small>Not yet marked by the teacher</small></p>
											{{/if}}
										{{/if}}
										<span><strong>Submitted on: </strong>{{dateFormat date}}</span>
										</p>
								</div><hr/>
							{{/each}}
						{{/if}}
					</article>
				{{/with}}
			</div>
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
	
</template>
<template name="newAssignment">
		<!-- Moddal start -->
	<div class="modal fade">
			<div class="modal-dialog" role='document'>
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss='modal' arial-label='Close'>
							<span arial-hidden='true'>&times;</span>
						</button>
						<h3 class="modal-title" id='myModalLabel'>
							New assignment
						</h3>
					</div>
					<div class="modal-body">
						{{#autoForm schema="g.Schemas.Assignment" id="newAssignment" type="normal" afFieldInput-placeholder="schemaLabel" validation='blur'}}
							{{> afQuickField name="title"}}
							{{> afQuickField name="content"}}
							{{> afQuickField name="class" options="allowed" firstOption="Class"}}
							{{> afQuickField name="subject" options="allowed" firstOption="Subject"}}
							{{> afQuickField name="totalScore"}}
							{{> afQuickField name="startDate"}}
							{{> afQuickField name="endDate" buttonClasses="glyphicon glyphicon-calendar"}}
							<div class="form-group">
								<button type="submit" class="btn btn-primary">Create</button>
							</div>
						{{/autoForm}}
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-dismiss='modal'>Close</button>
					</div>
				</div>
			</div>
	</div>
</template>
<template name="editAssignment">
		{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-md-10">
			<h3>Edit assignment</h3><hr/> <br/>
			{{#autoForm schema="g.Schemas.Assignment" id="editAssignment" type="normal" afFieldInput-placeholder="schemaLabel" doc=assignmentToEdit validation='blur'}}
				{{> afQuickField name="title"}}
				{{> afQuickField name="content"}}
				{{> afQuickField name="subject" options="allowed" firstOption="Subject"}}
				{{> afQuickField name="class"}}
				{{> afQuickField name="totalScore"}}
				{{> afQuickField name="startDate"}}
				{{> afQuickField name="endDate" buttonClasses="glyphicon glyphicon-calendar"}}
				<div class="form-group">
					<button type="submit" class="btn btn-primary">Update</button>
				</div>
			{{/autoForm}}
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>
<!-- ******************************************* -->
<!-- *************Break Break Break************* -->
<!-- ******************************************* -->
<template name='messages'>
		{{#if Template.subscriptionsReady}}
		<div class="messages col-md-11 col-md-offset-1">
			<h3>Messages</h3><hr/>
		<!-- Nav tabs -->
			  <ul class="nav nav-tabs" role="tablist">
			    <li role="presentation" class="active">
			    	<a href="#inbox" aria-controls="inbox" role="tab" data-toggle="tab">Inbox Messages</a>
			    </li>
			    <li role="presentation">
			    	<a href="#sent" aria-controls="sent" role="tab" data-toggle="tab">Sent Messages</a>
			    </li>
			    <li role="presentation">
			    	<a href="#draft" aria-controls="draft" role="tab" data-toggle="tab">Draft Message</a>
			    </li>
			    <li role="presentation">
			    	<a href="#newMessage" aria-controls="newMessage" role="tab" data-toggle="tab">Compose New</a>
			    </li>
			  </ul>
			 <div class="tab-content">
			    <div role="tabpanel" class="tab-pane fade in active" id="inbox">
			    	{{> inboxMessage}}
			    </div>
			    <div role="tabpanel" class="tab-pane fade" id="sent">
			    	{{> sentMessage}}
			    </div>
			    <div role="tabpanel" class="tab-pane fade" id="draft">
			    	{{> draftMessage}}
			    </div>
			    <div role="tabpanel" class="tab-pane fade" id="newMessage">
			    	{{> newMessage}}
			    </div>
			 </div>
		 </div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>

<template name="inboxMessage">
		{{#if Template.subscriptionsReady}}
			<h3>Inbox messages</h3><hr/>
			{{#with inboxCount}}
				<button class="btn inboxBtn" title="Inbox messages">Inbox: <span class="badge">{{count}}</span></button>
				<button class="btn unreadBtn" title="Unread messages"><i class="fa fa-envelope text-info"> </i>Unread: <span class="badge">{{unread}}</span></button>
				<button class="btn readBtn" title="Read messages"><i class="fa fa-check text-success"> </i>Read: <span class="badge">{{read}}</span></button>
				<hr/>
			{{/with}}
			<section class="inbox">
				{{#if inboxMsg}}
					<table class="inboxMsg">
						<tr>
							<th></th>
							<th>Sender</th>
							<th>Subject</th>
							<th>Date received</th>
							<th>Action</th>
						</tr>
						{{#each inboxMsg}}
								<tr>
									<td>
										<span class="{{read}}"></span>
									</td>
									<td>
										{{senderName}}
									</td>
									<td>
										{{subject}} <span class="badge" title="Number of replies">{{count}}</span>
									</td>
									<td>
										{{dateFormat createdAt}}
									</td>
									<td>
										<a href="{{pathFor 'message'}}/{{_id}}" style="text-decoration: none;">
											<button class="btn btn-info btn-xs">Open</button>	
										</a>
										<button class="btn btn-danger btn-xs"><span class="fa fa-trash"></span> Delete</button>
									</td>
								</tr>
						{{/each}}
					</table>
				{{else}}
					<p>No message</p>
				{{/if}}
			</section>

		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>

<template name="sentMessage">
		{{#if Template.subscriptionsReady}}
			<h3>Sent messages</h3><hr/>
				<button class="btn" title="Sent messages">Sent: <span class="badge">{{sentCount}}</span></button>
				<br/>
			<section class="sent">
				{{#if sentMsg}}
					<table class="sentMsg">
						<tr>
							<th></th>
							<th>Recipients</th>
							<th>Subject</th>
							<th>Date sent</th>
							<th>Action</th>
						</tr>
						{{#each sentMsg}}
							
								<tr>
									<td>
										<input type="checkbox" name="id" value="{{_id}}">
									</td>
									<td>
										{{staffName}} {{studentName}}
									</td>
									<td>
										{{subject}} <span class="badge" title="Number of replies">{{count}}</span>
									</td>
									<td>
										{{dateFormat createdAt}}
									</td>
									<td>
										<a href="{{pathFor 'message'}}/{{_id}}" style="text-decoration: none;">
											<button class="btn btn-info btn-xs">Open</button>	
										</a>
										<button class="btn btn-danger btn-xs"><span class="fa fa-trash"></span> Delete</button>
									</td>
								</tr>
						{{/each}}
					</table>
				{{else}}
					<p>No sent messages</p>
				{{/if}}
			</section>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>
<template name="singleMessage">
		{{#if Template.subscriptionsReady}}
		<div class="col-md-10 col-md-offset-1">
			{{#with message}}
				<h3>{{subject}}</h3><hr/>
				<p><strong>Sender: {{senderName}}</strong></p><hr/>
				<p><strong>Receiver: {{staffName}}</strong></p><hr/>
				<p><strong>Date: {{dateFormat createdAt}}</strong></p><hr/>
				<p><strong>Replies: {{count}}</strong></p><hr/>
				<hr/>
				<article>
					<p style="padding: 1em;">
						{{content}}
					</p>
				</article>
			{{/with}}
			<form class="col-md-12">
				<div class="form-group  col-md-6">
					<textarea class="form-control" placeholder="Reply to this message" minlength="5" rows="5" name="reply" required></textarea>
				</div>
				<div class="form-group">
					<button class="btn btn-primary" type="submit">Submit reply</button>
				</div>
			</form>

			{{#if msgReply}}
				<h3>Replies <span class="badge" title="{{count}} replies">{{count}}</span></h3><hr/>
				{{#each msgReply}}
				<div class="reply">
					<p><span style="background-color: orangered; padding:2px;color:#fff;cursor:pointer;" title="commenter name"><strong>{{name}} </strong></span>
					<span title="Posted date"><strong> {{dateFormat replyDate}}</strong></span>

					</p>
					<p style="padding-left:2em;">{{reply}}</p>

				</div>
				<hr/>		
				{{/each}}
			
			{{else}}
				<h3>No Replies</h3>
			{{/if}}
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>

<template name="newMessage">
		{{#if Template.subscriptionsReady}}
		<div class="col-md-10">
			<h3>Compose new message</h3><hr/>
			<div class="alert alert-info alert-dismissible" role='alert'>
			<button type="button" class="close" data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button>
				Please Note: 
					<ul>
						<li>
						Select staff(s) to send a message, 
						<strong>hold ctrl key to select multiple staff.</strong>
						</li>
						<li>
							Select class(es) of students to send a message, 
							<strong>select multiple boxes to send message to different classes.</strong>
						</li>
						<li>
							If message is to be sent a single student, <a href="{{pathFor 'studentList'}}" class="alert-link">open student</a> details and click on <strong>send message</strong>.
						</li>
					</ul>
			</div>
			<label>Staff (<small>if sms is for staff</small>)</label><br/>
			<input type="checkbox" class="all_staff">All Staffs
			<form>
				<div class="form-group">
					<select name="staff" class="form-control msgStaff" multiple="true">
						{{#each staff}}
							<option value="{{meteorIdInStaff}}" name='{{lastName}} {{firstName}} {{otherName}}'>{{lastName}}, {{firstName}} {{otherName}}</option>
						{{/each}}
					</select>
				</div>
				<div id="msgClass">
					<label>Class of students (<small>if message is for one or more classes</small>)</label> <br/>
					{{#each classes}}
					<label class="checkbox-inline">
						<input type="checkbox" name="class" value="{{this}}">{{this}}
					</label>
					{{/each}}
				</div><br/>
				<div class="form-group">
					<label for="title">Subject</label><br/>
					<input type="text" name="title" class="form-control" required placeholder="Subject of the message" maxlength="75" minlength="5">
				</div>
				<div class="form-group">
					<label for="content">Message body</label><br/>
					<textarea class="form-control" rows="6" required placeholder="Content of the message" name="body" minlength="10"></textarea>
				</div>

				<button type="submit" class="btn btn-primary">Send message</button>
				<button type="button" class="btn btn-danger">Save to draft</button>
			</form><br/>
		</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>

<template name="draftMessage">
		{{#if Template.subscriptionsReady}}

			<h3>Draft Message</h3>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>
<!-- ******************************************* -->
<!-- *************Break Break Break************* -->
<!-- ******************************************* -->

<template name="sms">
	{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-md-8">
			<h3>Short Message Services</h3><hr/>
			<div class="info">
				<h4>SMS Balance: 15,711</h4><br/>
				<h4><u>Recently sent SMS</u></h4>
			</div>
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>


<template name="newSms">
	{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-md-8">
			<h3>Compose SMS</h3><hr/>
			<label>Staff (<small>if SMS is for staff</small>)</label><br/>
			<input type="checkbox" class="all_staff">All Staffs
			<form>
				<div class="form-group">
					<label class="text-info">Showing only staffs with phone number.</label>
					<select name="staff" class="form-control smsStaff" multiple="true">
						{{#each staff}}
							<option value="{{phone}}">{{lastName}} {{firstName}} ({{phone}})</option>
						{{/each}}
					</select>
				</div>
				<div class="smsClass">
					<label>Class of students (<small>if SMS is for one or more classes</small>)</label> <br/>
					{{#each classes}}
					<span class="checkbox-inline">
						<input type="checkbox" name="class" value="{{this}}">{{this}}(73)
					</span>
					{{/each}}
				</div><br/>
				<div class="form-group">
					<label>Message</label><br/>
					<textarea class="form-control" rows="6" required placeholder="Message" name="message" minlength="10"></textarea>
				</div>
				<p class="smsCost">
					<b>
					Character: <span class="characterCount">0/160</span> =>
					Cost: <span class="smsCount">0</span> SMS
					</b>	
				</p>
				<button type="submit" class="btn btn-primary">Send SMS</button>
			</form><br/>
			
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="performance">
	{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-md-8">
			<h3>Performance Analysis</h3><hr/>
			
			
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="studentPerformance">
	{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-md-8">
			<h3>Student Performance Analysis</h3><hr/>
			
			
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>
<template name="graduatedStudents">
	{{#if Template.subscriptionsReady}}
	<div class="col-md-11 col-md-offset-1">	
		<h3>Graduated Students List</h3><hr/>
		<h4 class="text-info">
			Graduated Students count: {{graduates.count}}
		</h4>
		<form class="filter">
			<input type="text" name="studentId" placeholder="student Id">
			<select name="year">
				{{#each yearArray}}
				<option value="{{this}}">{{this}}</option>
				{{/each}}
			</select>
			<button type="submit" class="btn btn-primary btn-xs">Filter graduates</button>
		</form>
		{{#if graduates}}
			<table class="table table-bordered serial">
				<tr>
					<th>S/N</th>
					<th>Name</th>
					<th>ID</th>
					<th>Gender</th>
					<th>View</th>
				</tr>
			{{#each graduates}}
				<tr>
					<td></td>
					<td>{{lastName}}, {{firstName}} {{otherName}}</td>
					<td>{{studentId}}</td>
					<td>{{gender}}</td>
					<td style="text-align: center;"><a href="{{pathFor 'singleGraduatedStudent'}}/{{studentId}}" class="btn btn-info btn-xs"><span class="fa fa-info-circle"></span> More Details</a> <br/>
					</td>
				</tr>
			{{/each}}
			</table>
		{{else}}
			<h4>Graduated list is empty!</h4>
		{{/if}}
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="singleGraduatedStudent">
	{{#if Template.subscriptionsReady}}
	<div class="col-md-12">
		<!-- Admission Information -->
		{{#with graduate}}	
			<section id="singleGraduateStudent">
				<h3>{{lastName}}, {{firstName}} {{otherName}} Profile ({{currentClass}} {{graduatedYear}})</h3><hr/>
					<div class="col-md-4 col-md-offset-1 col-md-push-8">
						<p><img src="{{studentId}}.png" alt="Student Passport Photograph"></p>
						<p><a href="{{pathFor 'singleResult'}}/{{studentId}}" class="btn btn-primary btn-xs"><span class="fa fa-check-circle"></span> View Results</a></p>
						<p><a href="{{pathFor 'singlePayment'}}/{{studentId}}" class="btn btn-primary btn-xs"><span class="fa fa-money"></span> View Payments</a></p>
						<p><a href="{{pathFor 'performance'}}/{{studentId}}" class="btn btn-primary btn-xs"><span class="fa fa-bar-chart-o"></span> View Performance</a></p>
						<p><button class="btn btn-danger" title="Demote student to SSS3" id="demoteGraduate">Demote student</button></p>
					</div>		
					<div class="col-md-7 col-md-pull-5">	
						<table class="table">
							<tr>
								<td>Last Name</td><td>{{lastName}}</td>
							</tr>
							<tr>
								<td>First Name</td><td>{{firstName}}</td>
							</tr>
							<tr>
								<td>Other Name</td><td>{{otherName}}</td>
							</tr>
							<tr>	
								<td>Gender</td> <td>{{gender}}</td>
							</tr>
							<tr>
								<td>Class</td>	<td>{{currentClass}}</td>
							</tr>
							<tr>
								<td>Student ID</td> <td>{{studentId}}</td>
							</tr>
							<tr>
								<td>Email</td> <td>{{email}}</td>
							</tr>
							<tr>
								<td>Date of Birth</td> <td>{{dayMonthYear dob}}</td>
							</tr>
							<tr>
								<td>State</td> <td>{{state}} State</td>
							</tr>
							<tr>
								<td>Town</td> <td>{{town}}</td>
							</tr>
							
							<tr>
								<td>Club and Society</td> <td>{{club}}</td>
							</tr>
							<tr>
								<td>Contact Number</td> <td>{{phone}}</td>
							</tr>
							<tr>
								<td>Present Address</td> <td>{{presentAddress}}</td>
							</tr>
							<tr>
								<td>Home Address</td> <td>{{homeAddress}}</td>
							</tr>
							<tr>
								<td>Hobbies</td> <td>{{hobby}}</td>
							</tr>
							
							<tr>
								<td>Next of kin name</td> <td>{{nok.name}}</td>
							</tr>
							<tr>
								<td>Next of kin address</td> <td>{{nok.address}}</td>
							
							</tr>
							
							<tr>
								<td>Next of kin contact</td> <td>{{nok.phone}}</td>
							</tr>
							<tr>
								<td>Next of kin relationship</td> <td>{{nok.relationship}}</td>
							</tr>
	
						</table>
					</div>
				</section>
					
		
		{{/with}}
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
	
</template>

<template name="logs">
	{{#if Template.subscriptionsReady}}
		<div class="col-md-offset-1 col-md-8">
			<h3>Activity log</h3><hr/>
			<table class="serial">
				<tr>
					<th>S/N</th>
					<th>Action</th>
					<th>Time</th>
				</tr>
				{{#each log}}
				<tr>
					<td></td>
					<td>{{name}} {{action}}</td>
					<td>{{dateFormat time}}</td>
				</tr>
				{{/each}}
			</table>
			
		</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="subjectMgmt">
	{{#if Template.subscriptionsReady}}
	<div class="col-md-12" id="subjectMgmt">
		<h4>Subject Management</h4><hr/>
		<section class="col-md-5 subject">
			<h4>Subjects</h4><hr/>
			<article class="subjectList">
				<h4>List <span class="fa fa-caret-right pull-right"></span></h4>
				<ol>
				{{#each subjects.subjects}}
					<li name="{{this}}">{{this}} <span class="fa fa-plus pull-right" title="Add this subject to the currently selected category."></span></li> 
					
				{{else}}
					<p>No subject found</p>
				{{/each}}
				</ol>
				<form class="addNewSubject">
					<input type="text" name="subjectName" placeholder="Add new subject" required>
					<button type="submit" class="btn btn-primary btn-xs"><span class="fa fa-plus"></span> Add</button>
				</form>
			</article><hr/>
			<article class="subjectCategory">
				<h4>Category <span class="fa fa-caret-right pull-right"></span></h4>
				<ol>
				{{#each getObjectKey subjects.category}}
					<li name="{{this}}">{{this}}()</li>
				{{else}}
					<p>No subject category found</p>
				{{/each}}
				</ol>
				<form class="addNewSubjectCategory">
					<input type="text" name="subjectCategory" placeholder="Add new subject category" required>
					<button type="submit" class="btn btn-primary btn-xs"><span class="fa fa-plus"></span> Create</button>
				</form>
			</article>
		</section>
		<section class="col-md-6 col-md-offset-1 modifySubjectCategory">
			<form>
				<h4>Modify a subject category</h4>
				<select name="subjectCategory">
					{{#if getSession "subjectCategory"}}
						<option>*{{getSession "subjectCategory"}}</option>
					{{else}}	
						<option selected disabled>Select a category</option>
					{{/if}}
					{{#each getObjectKey subjects.category}}
						<option value="{{this}}">{{this}}</option>
					{{else}}
						<option selected disabled>No category</option>
					{{/each}}
				</select>
				<button type="submit" class="btn btn-primary btn-xs">Show</button>
			</form><hr/>
			<ol>
				{{#each category}}
					<li name="{{this}}">{{this}} <span class="fa fa-trash pull-right" title="delete this subject from this category."></span></li>
				{{else}}
					<p>Subject category empty.</p>
				{{/each}}	
			</ol>
		</section>
	</div>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>