<template name="studentLandingPage">
	{{#if Template.subscriptionsReady}}
	<section id="studentLandingPage">
		<div class="notification" style="overflow-y:scroll;">
			<h4>Notification <span class="fa fa-info"></span></h4>
			<article>
				{{{setting.notification}}}
			</article>
		</div>
		<div class="log">
			<h4>Recent Activities</h4>
			{{#each log}}
				<strong>*</strong> <span>{{name}} {{action}} @{{dateFormat time}}</span><br/>
			{{/each}}
			<a href="{{pathFor 'stLogs'}}">See more...</a>
		</div>
	</section>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>
<template name="studentProfile">
	{{#if Template.subscriptionsReady}}
			{{#with currentStudent}}
				<h3>{{lastName}} {{firstName}} Profile</h3><hr/>
				<table>
						<tr>
							<th colspan="2">Admission Data</th>
						</tr>
						<tr>
							<td><strong>Last Name </strong></td>
							<td> {{lastName}}</td>
						</tr>
						<tr>
							<td><strong>First Name </strong></td>
							<td>{{firstName}}</td>
						</tr>
						<tr>
							<td><strong>Other Name </strong></td>
							<td>{{otherName}}</td>
						</tr>
						<tr>
							<td><strong>Current class</strong></td>
							<td>{{currentClass}}</td>
						</tr>
						<tr>
							<td><strong>Student Id</strong></td>
							<td>{{studentId}}</td>
						</tr>
						<tr>
							<td><strong>Email</strong></td>
							<td>{{email}}</td>
						</tr>
						<tr>
							<td><strong>Gender</strong></td>
							<td>{{gender}}</td>
						</tr>
						<tr>
							<td><strong>Date of birth</strong></td>
							<td>{{dob}}</td>
						</tr>
						<tr>
							<td><strong>State of origin</strong></td>
							<td>{{state}}</td>
						</tr>
						<tr>
							<td><strong>Town</strong></td>
							<td>{{town}}</td>
						</tr>
						<tr>
							<td><strong>Club and Soceity</strong></td>
							<td>{{club}}</td>
						</tr>										
					</table>
						<br/><br/>
					<table>
						<tr>
							<th colspan="2">Student Profile</th>
						</tr>
						<tr>
							<td><strong>Contact phone</strong></td>
							<td>{{phone}}</td>
						</tr>
						<tr>
							<td><strong>Home Address</strong></td>
							<td>{{homeAddress}}</td>
						</tr>
						<tr>
							<td><strong>Present Address</strong></td>
							<td>{{presentAddress}}</td>
						</tr>
						<tr>
							<td><strong>Hobby</strong></td>
							<td>{{hobby}}</td>
						</tr>
						<tr>
							<th colspan="2">Next of Kin details</th>
							
						</tr>
						<tr>
							<td><strong>Name</strong></td>
							<td>{{nok.name}}</td>
						</tr>
						<tr>
							<td><strong>Address</strong></td>
							<td>{{nok.address}}</td>
						</tr>
						<tr>
							<td><strong>Phone contact</strong></td>
							<td>{{nok.phone}}</td>
						</tr>	
						<tr>
							<td><strong>Relationship</strong></td>
							<td>{{nok.relationship}}</td>
						</tr>
						<tfoot>
							<a href="{{pathFor 'editStProfile'}}" class="btn btn-primary btn-xs">Edit profile</a>
						</tfoot>										
				</table>
			{{/with}}
	{{else}}
		{{>smsLoading}}
	{{/if}}

</template>

<template name="editStProfile">
		{{#if Template.subscriptionsReady}}
				<h3>Update Profile</h3><hr/>
				{{#autoForm schema="g.Schemas.UpdateStudent" type="normal" id="editStProfile" doc=currentStudent}}
				{{> afQuickField name="presentAddress"}}
				{{> afQuickField name="homeAddress"}}
				{{> afQuickField name="phone"}}
				{{> afQuickField name="hobby"}}
				{{> afQuickField name="club" options="allowed" firstOption="Club and Society"}}
				{{> afQuickField name="nok"}}
				<div class="form-group">
					<button type="submit" class="btn btn-primary">Update</button>
				</div>
				{{/autoForm}}
		{{/if}}
</template>

<template name="stResult">
		{{#if Template.subscriptionsReady}}
					<h3>Student Results</h3><hr/>
					<form class='searchResult'>
						
						<select name="class">
						{{#if availableClass}}
							{{#each availableClass}}	
									<option value="{{this}}">{{this}}</option>
							{{/each}}
						{{/if}}

						</select>

						<select name="term">
							{{#each termArray}}
								<option value="{{this}}">{{termSuffix this}}</option>
							{{/each}}
						</select>
						
						<button type="submit" class="btn btn-primary btn-xs">Show result</button>

					</form>
					{{#with currentStudent}}
						<table class="table table-striped">
							<tr>
								<td><strong>First Name</strong></td>
								<td>{{firstName}}</td>
								<td><strong>Other Name(s)</strong></td>
								<td>{{lastName}} {{otherName}}</td>
								<td rowspan="3" style="border: 1px solid black">
									<img src="/student10.png" alt="{{studentId}} passport">

								</td>
							</tr>
							<tr>
								<td><strong>Student ID</strong></td>
								<td>{{studentId}}</td>
								<td><strong>Email</strong></td>
								<td>{{email}}</td>
							</tr>
							<tr>
								<td><strong>Current Class</strong></td>
								<td>{{currentClass}}</td>
								<td><strong>Current Term</strong></td>
								<td>{{termSuffix setting.term}}</td>
							</tr>
							
						</table>

					{{/with}}
					{{#if studentRes}}
						{{#with studentRes}}
						<h2>Result details</h2>
						<table class="table table-striped">
							<tr>
								<td><strong>Class</strong></td> <td>{{class}}</td>
								<td><strong>Term</strong></td> <td>{{term}}</td>
								<td><strong>Session</strong></td><td>{{session}}</td>
							</tr>
						</table>
						<table class="table table-striped serial">
							<tr>
								<th>S/N</th>
								<th>Subjects</th>
								<th>CA</th>
								<th>Exam</th>
								<th>Total</th>
								<th>Grade</th>
								<th>Remark</th>
							</tr>
							{{#if english}}
							<tr>
								<td></td>
								<td>English Language</td>
								<td>{{english.ca}}</td>
								<td>{{english.exam}}</td>
								<td>{{english.total}}</td>
								<td>{{english.grade}}</td>
								<td>{{english.remark}}</td>
							</tr>
							{{/if}}
							{{#if mathematics}}
							<tr>
								<td></td>
								<td>Mathematics</td>
								<td>{{mathematics.ca}}</td>
								<td>{{mathematics.exam}}</td>
								<td>{{mathematics.total}}</td>
								<td>{{mathematics.grade}}</td>
								<td>{{mathematics.remark}}</td>
							</tr>
							{{/if}}

							{{#if physics}}
							<tr>
								<td></td>
								<td>Physics</td>
								<td>{{physics.ca}}</td>
								<td>{{physics.exam}}</td>
								<td>{{physics.total}}</td>
								<td>{{physics.grade}}</td>
								<td>{{physics.remark}}</td>
							</tr>
							{{/if}}


							{{#if chemistry}}
							<tr>
								<td></td>
								<td>Chemistry</td>
								<td>{{chemistry.ca}}</td>
								<td>{{chemistry.exam}}</td>
								<td>{{chemistry.total}}</td>
								<td>{{chemistry.grade}}</td>
								<td>{{chemistry.remark}}</td>
							</tr>

							
							{{/if}}

							{{#if biology}}
							<tr>
								<td></td>
								<td>Biolog</td>
								<td>{{biology.ca}}</td>
								<td>{{biology.exam}}</td>
								<td>{{biology.total}}</td>
								<td>{{biology.grade}}</td>
								<td>{{biology.remark}}</td>
							</tr>

							
							{{/if}}


							{{#if account}}
							<tr>
								<td></td>
								<td>Accounting</td>
								<td>{{account.ca}}</td>
								<td>{{account.exam}}</td>
								<td>{{account.total}}</td>
								<td>{{account.grade}}</td>
								<td>{{account.remark}}</td>
							</tr>

							
							{{/if}}


							{{#if commerce}}
							<tr>
								<td></td>
								<td>Commerce</td>
								<td>{{commerce.ca}}</td>
								<td>{{commerce.exam}}</td>
								<td>{{commerce.total}}</td>
								<td>{{commerce.grade}}</td>
								<td>{{commerce.remark}}</td>
							</tr>

							
							{{/if}}

							{{#if economics}}
							<tr>
								<td></td>
								<td>Economics</td>
								<td>{{economics.ca}}</td>
								<td>{{economics.exam}}</td>
								<td>{{economics.total}}</td>
								<td>{{economics.grade}}</td>
								<td>{{economics.remark}}</td>
							</tr>

							
							{{/if}}

							{{#if literature}}
							<tr>
								<td></td>
								<td>Literature</td>
								<td>{{literature.ca}}</td>
								<td>{{literature.exam}}</td>
								<td>{{literature.total}}</td>
								<td>{{literature.grade}}</td>
								<td>{{literature.remark}}</td>
							</tr>

							
							{{/if}}

							{{#if government}}
							<tr>
								<td></td>
								<td>Government</td>
								<td>{{government.ca}}</td>
								<td>{{government.exam}}</td>
								<td>{{government.total}}</td>
								<td>{{government.grade}}</td>
								<td>{{government.remark}}</td>
							</tr>

							
							{{/if}}

							{{#if geography}}
							<tr>
								<td></td>
								<td>Geography</td>
								<td>{{geography.ca}}</td>
								<td>{{geography.exam}}</td>
								<td>{{geography.total}}</td>
								<td>{{geography.grade}}</td>
								<td>{{geography.remark}}</td>
							</tr>

							
							{{/if}}
							
						</table>
						<br/>
						<button class="btn btn-primary" onclick="window.print()">Print</button>
						
						{{/with}}

					{{else}}
						<p style="font-size: 1.5em; text-align: center;">No result found for the current class and term!</p>
					{{/if}}
		{{else}}
			{{>smsLoading}}
		{{/if}}

</template>

<template name="stPayment">
		{{#if Template.subscriptionsReady}}
				<h3>Student Payments</h3><hr/>

				<form class='searchPayment'>
					
					<select name="class">
					{{#if availableClass}}
						{{#each availableClass}}							<option value="{{this}}">{{this}}</option>
						{{/each}}
					{{/if}}

					</select>

					<select name="term">
						{{#each termArray}}
							<option value="{{this}}">{{termSuffix this}}</option>
						{{/each}}
					</select>
					<button type="submit" class="btn btn-primary btn-xs">Show payment</button>

				</form>
				{{#with currentStudent}}
						<table class="table table-striped">
							<tr>
								<td><strong>First Name</strong></td>
								<td>{{firstName}}</td>
								<td><strong>Other Name(s)</strong></td>
								<td>{{lastName}} {{otherName}}</td>
								<td rowspan="3" style="border: 1px solid black">
									<img src="/student10.png" alt="{{studentId}} passport">

								</td>
							</tr>
							<tr>
								<td><strong>Student ID</strong></td>
								<td>{{studentId}}</td>
								<td><strong>Email</strong></td>
								<td>{{email}}</td>
							</tr>
							<tr>
								<td><strong>Current Class</strong></td>
								<td>{{currentClass}}</td>
								<td><strong>Current Term</strong></td>
								<td>{{termSuffix setting.term}}</td>
							</tr>
							
						</table>

					{{/with}}
					{{#with studentPay}}
							<h3>Payment details</h3>
						<table class="table table-striped">
							<tr>
								<td>Class</td>
								<td>{{class}}</td>
							</tr>
							<tr>
								<td>Term</td>
								<td>{{termSuffix term}}</td>
							</tr>
							<tr>
								<td>Session</td>
								<td>{{session}}</td>
							</tr>
							<tr>
								<td>Payment Category</td>
								<td>{{category}}</td>
							</tr>
							<tr>
								<td>Amount Approved</td>
								<td>{{amount}}</td>
							</tr>
							<tr>
								<td>Payment Method</td>
								<td>{{paymentType}}</td>
							</tr>
							<tr>
								<td>Payment Status</td>
								<td>{{paymentStatus}}</td>
							</tr>
							<tr>
								<td>Payment Date</td>
								<td>{{dateFormat date}}</td>
							</tr>
							<tr>
								<td>Transaction ID</td>
								<td>{{transactionId}}</td>
							</tr>
							<tr>
								<td>Receiver's Name</td>
								<td>{{staffName}}</td>
							</tr>
						</table>
						<br/>
						<button class="btn btn-primary" onclick="window.print()">Print</button>
						{{else}}
							<h4 class="text-center">No payment found for the current class and term.</h4>
						{{/with}}
						<br/>
		{{else}}
			{{>smsLoading}}
		{{/if}}	
</template>

<template name="stAssignment">
		{{#if Template.subscriptionsReady}}
				<h3>Assignment list</h3> <hr/>
					<form class="form-inline">
						<div class="form-group">
							<select name="subject" class="form-control">
								{{#each subjects}}
									<option value="{{this}}">{{this}}</option>
								{{/each}}
							</select>
							<button type="submit" class="btn btn-primary btn-xs">Filter assignment</button>
						</div>
					</form>
					<hr/><br>
				{{#if assignmentList}}
					{{#each assignmentList}}
						<div class="row assignmentList">
							<div class="col-md-2 col-sm-2 col-xs-12 badge">
								<h4>{{class}}</h4>
								<p>{{subject}}</p>
							</div>
							<div class="col-md-10 col-sm-10 col-xs-12">
								<h4><a href="{{pathFor 'stSingleAssignment'}}/{{_id}}">{{title}}</a>
								{{#if status}}
									<span class="label label-success">Answered</span>
								{{else}}
									<span class="label label-warning">Not Answered</span>
								{{/if}}	
								{{#if validity}}
									<i class="label label-danger">Expired</i>
								{{/if}}
								</h4>
								<div>
									<span><strong>Start: </strong>{{dateFormat startDate}}</span>
									<span><strong>Due date: </strong>{{dateFormat endDate}}</span>
									<span><strong>Max score: </strong>{{totalScore}}</span>
								</div>
								
							</div>
						</div><hr/>
					{{/each}}
				{{else}}
					<p>No assignment found for your class</p>
				{{/if}}				
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>

<template name="stSingleAssignment">
		{{#if Template.subscriptionsReady}}
				<div class="assignment">
					{{#with assignment}}
						<h3>
							{{title}} 
							{{#if dueDate}}
								<span class="label label-danger">expired</span>
							{{/if}}
						</h3><hr/>
						{{#if stAnswer}}
							<span style="color: green;">Answered</span>
							{{#if stAnswer.score}}
								<span style="color: green;"> and marked <i class="fa fa-check fa-2x" style="color: green;"></i></span>
							{{/if}}
						{{else}}
							<span class="text-warning">Not Answered</span>
						{{/if}}
						<hr/>
						<article>
							<p><strong>Question</strong></p>
							<p>{{content}}</p>
							<span><strong>Class:</strong> {{class}}</span>
							<span><strong>Subject:</strong> {{subject}}</span>
							<span><strong>Mark:</strong> {{totalScore}}</span>
							<span><strong>Start date:</strong> {{dateFormat startDate}}</span>
							<span><strong>End date:</strong> {{dateFormat endDate}}</span><br/>
							<p>
								Posted by: <strong>{{author}}</strong> 
							</p>
							<p>
								{{#if dueDate}}
									<p class="text-danger">Assignment has expired.</p>
								{{/if}}
							</p>
							<hr/>
							{{#if stAnswer}}
								<p><strong>Your submitted answer</strong></p>
								{{#with stAnswer}}
									<p>{{text}}</p>
									<p><span>
									<strong>Score: </strong>
									{{#if score}} 
										{{score}} / {{assignment.totalScore}} <i class="fa fa-check fa-2x" style="color: green; "></i>
									{{else}} 
										Not scored
									{{/if}}
									</span></p>
									<p>
										<span>
										<strong>Comment: </strong>
										</span>
										{{#if comment}}
											<strong>{{comment}}</strong>
										{{else}}
											No comment
										{{/if}}
									</p>
									<span>Submitted on: {{date}}</span>
								{{/with}}
							{{else}}
								{{#if dueDate}}
									<span class="fa fa-ban fa-2x"> Submission not allowed</span>
								{{else}}
									<p>Type your answer in the box below</p>
									<form class="answer form-group">
										<textarea name="answer" cols="45" rows="5" placeholder="Your answer here" class="form-control"></textarea><br/>

										<button type="submit" class="btn btn-success">Submit Answer</button>
									</form>
								{{/if}}
							{{/if}}
						</article>
					{{/with}}
				</div>
		{{else}}
			{{>smsLoading}}
		{{/if}}
</template>
		
<template name="stMessage">
	{{#if Template.subscriptionsReady}}
		
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>

<template name="stLogs">
	{{#if Template.subscriptionsReady}}
			<h3>Your activity logs</h3><hr/>
			<table class="serial">
				<tr>
					<th>S/N</th>
					<th>Action</th>
					<th>Time</th>
				</tr>
				{{#each log}}
				<tr>
					<td></td>
					<td>{{name}} {{action}}</td>
					<td>{{dateFormat time}}</td>
				</tr>
				{{/each}}
			</table>
	{{else}}
		{{>smsLoading}}
	{{/if}}
</template>